/* FRONTEND: src/pages/HomeUser.css — “พร้อมวางทับ” */
@import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700&display=swap');

:root{
  --brand:#6fb36a; --brand-2:#82c07e; --brand-dark:#4c9950;
  --accent:#ffd54f; --text:#263321; --muted:#69706a;
  --bg:#f6f8f5; --card:#ffffff; --border:#e6ede2;
  --shadow: 0 6px 20px rgba(40, 80, 50, .08);
  --radius-lg:14px; --radius-md:12px; --radius-sm:10px; --space:16px;
  --ring: 0 0 0 3px rgba(111,179,106,.24);
}

*{ box-sizing:border-box }
img{ max-width:100%; display:block }
body{ font-family:'Sarabun', system-ui, sans-serif; color:var(--text); background:var(--bg) }
.home-container{ max-width:1200px; margin:0 auto; padding:20px }

/* Card base */
.card{
  background:var(--card); border:1px solid var(--border);
  border-radius:var(--radius-lg); box-shadow:var(--shadow);
  padding:18px;
}

/* Search */
.search-bar{ margin-bottom:18px }
.filters-row{ display:flex; gap:12px; align-items:flex-end; flex-wrap:wrap }
.filters-row label{ display:flex; flex-direction:column; gap:6px; font-size:.95rem; color:#32513a }
.filters-row select,
.filters-row input{
  height:42px; padding:0 12px; border-radius:12px; border:1px solid var(--border);
  outline:none; background:#fff;
}
.filters-row input:focus,
.filters-row select:focus{ box-shadow:var(--ring); border-color:#b9e0b6 }
.filters-row .grow{ flex:1; position:relative }

.btn-search{
  height:42px; padding:0 14px; border:none; border-radius:12px;
  background:var(--brand-dark); color:#fff; cursor:pointer; display:flex; align-items:center; gap:6px
}
.btn-search:disabled{ opacity:.7; cursor:not-allowed }

/* Live Suggest */
.live-suggest{
  position:absolute; top:calc(100% + 6px); left:0; right:0; z-index:60;
  background:var(--card); border:1px solid var(--border);
  border-radius:12px; box-shadow:var(--shadow);
  max-height:320px; overflow:auto;
}
.live-suggest-item{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  width:100%; padding:10px 14px; font-size:.95rem; border:0; background:transparent; cursor:pointer;
}
.live-suggest-item:hover, .live-suggest-item.active{ background:#f1f5f9 }
.live-suggest-loading, .live-suggest-empty{ padding:10px 14px; color:var(--muted); font-size:.9rem }

/* Type explorer */
.type-explorer{ margin:26px 0 8px }
.type-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:14px }

/* wrapper สำหรับ popover */
.type-card-wrap{ position:relative }
.type-card-wrap.active .type-card{ outline:2px solid #cbe7c9; }

.type-card-btn{
  all:unset; display:block; width:100%; cursor:pointer;
}
.type-card{
  display:block; background:var(--card); border:1px solid var(--border);
  border-radius:14px; overflow:hidden; box-shadow:var(--shadow); color:inherit; text-decoration:none
}
.type-card img{ height:120px; width:100%; object-fit:cover }
.type-card h3{ margin:10px 12px }
.type-card .chips{ display:flex; flex-wrap:wrap; gap:8px; padding:0 12px 10px }
.chip{ padding:6px 10px; border-radius:999px; background:#ecf5ec; color:#2f5c34; font-size:.85rem; cursor:default }
.chip.muted{ background:#f3f4f6; color:#6b7280 }
.type-meta{ padding:0 12px 12px; color:#6b7280; font-size:.85rem }

/* Product grid / card */
.product-grid{ display:grid; grid-template-columns:repeat(4,1fr); gap:16px }
@media (max-width:1100px){ .product-grid{ grid-template-columns:repeat(3,1fr) } }
@media (max-width:820px){ .product-grid{ grid-template-columns:repeat(2,1fr) } }
@media (max-width:520px){ .product-grid{ grid-template-columns:1fr } }

.product-card{
  background:var(--card); border:1px solid var(--border);
  border-radius:16px; box-shadow:var(--shadow); padding:12px;
  display:flex; flex-direction:column; gap:10px; position:relative;
}
.product-card .thumb-wrap{ position:relative; display:block }
.product-card img{ height:180px; width:100%; object-fit:contain; background:#fff; border-radius:12px }
.product-card .noimg{
  height:180px; display:flex; align-items:center; justify-content:center;
  background:#f3f4f6; border-radius:12px; color:#6b7280
}
.var-badge{
  position:absolute; left:10px; top:10px; background:#1f2937; color:#fff;
  font-size:.78rem; padding:4px 8px; border-radius:999px; opacity:.92
}

.product-card h3{ margin:2px 2px 0; font-size:1.02rem; line-height:1.35 }
.product-card h3 a{ color:inherit; text-decoration:none }
.product-card p{ margin:0 2px; color:#1f2937 }

.btn-add{
  height:38px; border:none; border-radius:12px;
  background:var(--brand-dark); color:#fff; cursor:pointer;
}
.btn-add:hover{ filter:brightness(.95) }

.var-actions{ display:flex; gap:8px; margin-top:auto }

/* Variant panel */
.btn-choose, .btn-detail{
  flex:1; height:36px; border-radius:10px; border:1px solid var(--border); background:#fff; cursor:pointer; text-align:center; display:flex; align-items:center; justify-content:center; text-decoration:none; color:#1f2937;
}
.btn-choose{ border-color:#bfe3bd; background:#f4faf3 }
.btn-choose:hover{ filter:brightness(.98) }
.btn-detail:hover{ background:#f8fafc }

.var-panel{
  margin-top:8px; border:1px dashed #d1e7cf; background:#fbfefb; border-radius:12px; padding:10px;
}
.var-loading{ font-size:.92rem; color:#6b7280 }

.var-options{ display:flex; flex-direction:column; gap:8px; margin-bottom:6px }
.var-opt-name{ font-weight:600; font-size:.92rem; margin-bottom:4px }
.var-opt-values{ display:flex; gap:6px; flex-wrap:wrap }
.var-opt .chip{ background:#eef6ee; color:#335a38; border:1px solid #e3f2e1 }

.var-list{ display:flex; flex-direction:column; gap:8px; margin-top:6px }
.var-item{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  background:#fff; border:1px solid var(--border); border-radius:10px; padding:8px 10px;
}
.var-item .var-label .l1{ font-size:.95rem }
.var-item .var-label .l2{ font-size:.85rem; color:#64748b }
.btn-add-variant{
  height:32px; padding:0 10px; border:none; border-radius:10px; background:var(--brand-dark); color:#fff; cursor:pointer;
}
.btn-add-variant:disabled{ opacity:.6; cursor:not-allowed }

.var-foot{ margin-top:6px }
.var-foot .btn-detail.wide{ width:100%; height:38px }

/* Sections */
.best-sellers, .all-products{ margin:24px 0 }
.best-sellers h2, .all-products h2{ margin:0 0 12px }

.info-inline{ padding:10px 12px; background:#f8fafc; border:1px solid #e5e7eb; border-radius:12px; color:#475569 }
.info-inline.warn{ background:#fff7ed; border-color:#fde68a; color:#92400e }
.product-grid.fullwidth{ grid-column:1 / -1 }

/* Category Popover */
.cat-popover{
  position:absolute; z-index:70; top:8px; left:8px; right:8px;
  background:#fff; border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow);
  padding:12px; animation:pop .12s ease-out;
}
@keyframes pop{ from{ transform:translateY(-6px); opacity:.6 } to{ transform:none; opacity:1 } }

.cat-pop-head{
  display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px;
}
.cat-pop-head .ttl{ font-weight:700; color:#214d2a }
.cat-pop-head .x{
  border:none; background:#f3f4f6; border-radius:10px; padding:6px 10px; cursor:pointer;
}

.cat-pop-actions{ display:flex; gap:8px; margin-bottom:8px }
.cat-pop-actions .act{
  height:34px; padding:0 12px; border-radius:10px; border:1px solid #cfe6cd; background:#f6fbf6; cursor:pointer;
}
.cat-pop-actions .act.all{ border-color:#b9e0b6; background:#eef8ee }

.cat-pop-list{ display:flex; flex-direction:column; gap:6px; max-height:240px; overflow:auto }
.cat-pop-item{
  display:flex; align-items:center; justify-content:space-between; gap:8px;
  background:#fff; border:1px solid var(--border); border-radius:10px; padding:8px 10px; cursor:pointer;
}
.cat-pop-item:hover{ background:#f7faf7 }
.cat-pop-item .name{ font-size:.95rem }
.cat-pop-item .go{ font-size:.85rem; color:#64748b }
