/* FRONTEND: src/admin/ProductManagement.css — Minimal, Clean, Modern (Merged)  */
/* รวม ProductManagement.css + VariantsManager.css ไว้ในไฟล์เดียว เรียบร้อย */

/* ───────────────── Base & Tokens ───────────────── */
@import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700;800&display=swap');

*,*::before,*::after{ box-sizing:border-box; }
:root{
  --text:#1f2a24;
  --muted:#667085;
  --bg:#f6f8f7;
  --panel:#ffffff;
  --input:#f7f7f7;
  --border:#e7ece9;
  --brand:#2e7d32;
  --brand-600:#256c29;
  --brand-700:#1d5a22;
  --danger:#ef4444;
  --warn:#f59e0b;
  --ok:#10b981;
  --ink:#0f172a;
  --shadow:0 10px 24px rgba(2,22,10,.06);
  --ring: 0 0 0 4px rgba(46,125,50,.15);

  /* ความสูง header ของเว็บ (กันหัวตารางชนหัวเว็บ) */
  --app-header: 56px; /* ปรับ 48–72px ตามของจริง */
}

/* ───────────────── Page ───────────────── */
.pm-page{
  font-family:"Sarabun",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:var(--bg);
  padding:16px;
  scroll-margin-top: calc(var(--app-header) + 12px);
}
.pm-header{
  display:flex; align-items:flex-end; justify-content:space-between;
  gap:12px; margin:2px 0 14px; flex-wrap:wrap;
}
.pm-title{ display:flex; align-items:flex-end; gap:10px; }
.pm-title .emoji{ font-size:26px; line-height:1; }
.pm-title h1{ margin:0; font-weight:800; font-size:26px; letter-spacing:.2px; }
.pm-title .subtitle{ color:var(--muted); font-weight:600; }

/* Links */
.pm-links{ display:flex; gap:8px; flex-wrap:wrap; }

/* ───────────────── Panel ───────────────── */
.pm-panel{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
  box-shadow:var(--shadow);
}
.section-title{ margin:0 0 12px; font-size:20px; font-weight:800; letter-spacing:.2px; }

/* ───────────────── Form ───────────────── */
.pm-form{ display:grid; grid-template-columns:1fr 1fr; gap:12px 14px; }
.frm{ display:flex; flex-direction:column; gap:6px; }
.frm>label{ font-weight:800; color:#1e293b; letter-spacing:.15px; }
.frm .hint{ font-size:12px; color:#7a7a7a; margin-top:4px; }
.pm-form input,.pm-form select,.pm-form textarea{
  width:100%;
  padding:11px 12px;
  border:1.5px solid var(--border);
  background:#fff;
  border-radius:12px;
  outline:none;
  transition:box-shadow .12s ease,border-color .12s ease, background .12s ease;
  font-size:15px;
}
.pm-form input:focus,.pm-form select:focus,.pm-form textarea:focus{
  border-color:var(--brand);
  box-shadow:var(--ring);
  background:#fcfffc;
}
.pm-form textarea{ min-height:120px; resize:vertical; }
.pm-form .col-span-2{ grid-column:1 / -1; }
.pm-input-group.pm-row-3{ display:grid; grid-template-columns:1fr 210px 210px; gap:12px; }

/* ───────────────── Buttons ───────────────── */
.btn{
  display:inline-flex; align-items:center; justify-content:center;
  padding:10px 14px; border:1.5px solid transparent; border-radius:12px;
  font-weight:800; background:#fff; color:#223126; cursor:pointer;
  transition:transform .06s ease, filter .12s ease, box-shadow .12s ease, background .12s ease, border-color .12s ease;
  text-decoration:none; white-space:nowrap;
}
.btn:hover{ filter:brightness(.98); transform:translateY(-1px); }
.btn:active{ transform:translateY(0); }
.btn:disabled{ opacity:.55; cursor:not-allowed; }
.btn:focus-visible{ outline:none; box-shadow:var(--ring); }
.btn-md{ min-width:110px; }
.btn-lg{ min-width:128px; font-size:16px; padding:11px 16px; }
.btn-primary{ background:var(--brand); color:#fff; border-color:var(--brand); }
.btn-primary:hover{ background:var(--brand-600); }
.btn-ghost{ background:#fff; color:#1f2937; border:1.5px solid var(--border); }
.btn-ghost:hover{ background:#fafafa; }
.btn-warn{ background:#fff7e6; color:#92400e; border:1.5px solid #ffd9a3; }
.btn-warn:hover{ background:#ffefcf; }
.btn-danger{ background:#ffe9e7; color:#b91c1c; border:1.5px solid #ffc7c1; }
.btn-danger:hover{ background:#ffe0dc; }
.btn-xxs{ padding:4px 8px; font-size:12px; border:1px solid var(--border); border-radius:8px; background:#fff; }

/* ───────────────── Toolbar ───────────────── */
.pm-toolbar-2{
  display:flex; flex-wrap:wrap; align-items:center;
  gap:10px 10px;
  background:#fff; border:1px solid #eef2ef; border-radius:12px;
  padding:8px; margin:10px 0 12px;
}
.sticky-toolbar{ position:static !important; } /* ปิด sticky 100% */

.pm-toolbar-2 .seg{ flex:0 0 auto; }
.pm-search{ flex:1 1 360px; max-width:520px; }
.pm-filter{ flex:0 1 220px; min-width:200px; }
.pm-search,.pm-filter{
  padding:10px 12px; border:1.5px solid var(--border); border-radius:12px; background:#fff; font-weight:600;
}

/* Per-page block */
.pm-perpage{
  display:flex; align-items:center; gap:8px;
  flex:0 0 auto; min-height:42px;
}

/* Archived toggle */
.btn-archived{ margin-left:auto; flex:0 0 auto; min-height:42px; }
@media (max-width: 1280px){
  .btn-archived{ flex:1 1 100%; margin-left:0; }
}

/* Segmented */
.seg{
  display:flex; gap:0; border:1.5px solid #dfe7e2; border-radius:14px;
  overflow:hidden; background:#fff; width:max-content; box-shadow:0 3px 10px rgba(2,22,10,.04);
}
.seg-btn{
  padding:9px 14px; border:0; background:#fff; cursor:pointer;
  font-weight:800; color:#334155; display:inline-flex; align-items:center; gap:8px;
}
.seg-btn+.seg-btn{ border-left:1px solid #e6eee9; }
.seg-btn.active{ background:var(--brand); color:#fff; }
.seg-btn:focus-visible{ outline:none; box-shadow:var(--ring); }

/* Count badge */
.count-badge{
  display:inline-flex; align-items:center; justify-content:center;
  min-width:26px; height:22px; padding:0 8px; border-radius:999px;
  font-weight:800; font-size:12px; border:1.5px solid transparent;
}
.count-badge.warn{ color:#7c2d12; background:#fff7ed; border-color:#fed7aa; }
.count-badge.danger{ color:#7f1d1d; background:#fef2f2; border-color:#fecaca; }
.count-badge.zero{ opacity:.55; }
@keyframes bump{ 0%{ transform:scale(1); } 30%{ transform:scale(1.15); } 100%{ transform:scale(1); } }
.count-badge.bump{ animation:bump .35s ease; }

/* Switch + archived toggle */
.pm-switch{ display:inline-grid; grid-auto-flow:column; grid-auto-columns:max-content; align-items:center; gap:10px; user-select:none; justify-self:start; }
.pm-switch input{ position:absolute; opacity:0; width:0; height:0; }
.pm-switch .toggle-ui{
  width:54px; height:30px; border-radius:999px; background:#e9ecef; border:1.5px solid #d7dee3;
  position:relative; box-shadow:inset 0 1px 2px rgba(0,0,0,.05); transition:background .15s ease, border-color .15s ease;
}
.pm-switch .toggle-ui::before{
  content:""; position:absolute; top:2.5px; left:2.5px;
  width:24.5px; height:24.5px; border-radius:50%; background:#fff;
  box-shadow:0 1px 3px rgba(0,0,0,.18); transition:transform .18s ease;
}
.pm-switch input:checked + .toggle-ui{ background:var(--brand); border-color:var(--brand); }
.pm-switch input:checked + .toggle-ui::before{ transform:translateX(22px); }
.pm-switch input:focus-visible + .toggle-ui{ outline:3px solid rgba(46,125,50,.35); outline-offset:2px; }
.pm-switch .toggle-label{ font-weight:800; color:#1f2937; white-space:nowrap; line-height:1; transform:translateY(1px); }

.btn-archived{
  display:inline-flex; align-items:center; gap:8px;
  border:1.5px solid var(--brand);
  background:#fff; color:var(--brand-600);
  padding:8px 12px; border-radius:999px; font-weight:800; white-space:nowrap; transition:all .15s ease;
}
.btn-archived .icon{ font-size:18px; line-height:1; }
.btn-archived:hover{ transform:translateY(-1px); box-shadow:0 6px 16px rgba(15,23,42,.08); }
.btn-archived.active{ background:var(--brand); color:#fff; border-color:transparent; }

/* ───────────────── Alert bar ───────────────── */
.pm-alertbar{
  display:flex; gap:8px; align-items:center; margin:8px 0 10px;
}
.pm-alert{
  display:inline-flex; align-items:center; gap:8px;
  padding:10px 12px; border-radius:12px; border:1.5px solid transparent; font-weight:800; cursor:pointer;
}
.pm-alert.warn{ background:#fff7ed; border-color:#fed7aa; color:#7c2d12; }
.pm-alert.clear{ background:#fff; border-color:var(--border); color:#334155; }

/* ───────────────── Summary + pager ───────────────── */
.pm-summary{
  display:flex; justify-content:space-between; align-items:center;
  margin:8px 0 12px; color:#444; gap:10px; flex-wrap:wrap;
}
.big-number{ font-size:16px; font-weight:700; }
.pm-pager{ display:flex; align-items:center; gap:8px; }
.pm-pager .btn-ghost{
  padding:7px 12px; border-radius:12px; border:1.5px solid #e6e6e6; background:#fafafa; font-weight:800;
}
.pm-pager .btn-ghost[disabled]{ opacity:.5; }
.pager-text strong{ font-weight:800; }

/* Per-page control */
.pm-perpage select{
  padding:8px 10px; border:1.5px solid var(--border); border-radius:10px; background:#fff; font-weight:700;
}

/* ───────────────── Table ───────────────── */
.pm-table-wrap{
  position: relative;
  z-index: 1;
  width:100%; overflow:auto; border:1px solid var(--border); border-radius:14px; background:#fff; box-shadow:var(--shadow);
}
.pm-table{ width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed; font-size:15px; }

/* หัวตาราง sticky ใต้หัวเว็บ */
.pm-table thead th{
  background:linear-gradient(0deg,#f7faf7,#ffffff); color:#1f2937; font-weight:800; text-align:left;
  padding:11px 12px; border-bottom:1px solid var(--border);
  position:sticky; top: calc(var(--app-header) + 8px);
  z-index: 5; letter-spacing:.2px;
}
.pm-table thead th.th-actions{ text-align:center; width:380px; }

.pm-table tbody td{ padding:11px 12px; border-bottom:1px solid #f0f3f1; vertical-align:middle; word-break:break-word; }
.pm-table tbody tr:nth-child(even) td{ background:#fcfdfc; }
.pm-table tr:hover td{ background:#f6fbf7; }
.pm-table tr.is-archived td{ opacity:.78; }
.pm-table .cell-actions{ text-align:center; display:flex; gap:8px; flex-wrap:wrap; justify-content:center; }
.pm-table .cell-actions .btn{ min-width:110px; }
.product-name{ font-weight:800; }
.name-with-badges{ display:inline-flex; align-items:center; gap:8px; }
.money{ font-weight:800; color:#0f766e; }

/* Grouped table */
.pm-groups{ display:flex; flex-direction:column; gap:14px; }
.pm-group{ border:1px solid var(--border); border-radius:12px; overflow:hidden; background:#fff; box-shadow:var(--shadow); }
.pm-group-title{ font-weight:800; padding:12px 14px; background:linear-gradient(0deg,#f6fbf6,#f9fdf9); border-bottom:1px solid var(--border); display:flex; align-items:center; gap:8px; }
.pm-group-count{ font-weight:700; color:#475569; font-size:.95rem; }
.pm-table.small thead th{
  position: sticky; top: calc(var(--app-header) + 8px);
  font-size:14px; padding-top:10px; padding-bottom:10px;
}

/* Badges */
.pill{
  display:inline-flex; align-items:center; gap:6px;
  padding:4px 8px; border-radius:999px; font-size:12px; font-weight:800; margin-right:8px;
  border:1px solid #e6ece8; background:#fff;
}
.pill.on{ color:#065f46; border-color:#b7f7d3; background:#edfff6; }
.pill.off{ color:#7c2d12; border-color:#ffe6cc; background:#fff7ec; }
.badge-archived{ display:inline-block; margin-left:0; background:#e5e7eb; color:#374151; border-radius:999px; padding:2px 8px; font-size:12px; font-weight:800; }
.status-badge{ display:inline-block; padding:4px 8px; border-radius:999px; font-weight:800; font-size:12px; border:1px solid transparent; }
.status-badge.ok{ color:#065f46; background:#ecfdf5; border-color:#bbf7d0; }
.status-badge.warn{ color:#7c2d12; background:#fff7ed; border-color:#fed7aa; }
.status-badge.danger{ color:#7f1d1d; background:#fef2f2; border-color:#fecaca; }
.stock-badge{ display:inline-block; padding:3px 8px; border-radius:999px; font-weight:800; border:1px solid transparent; }
.stock-badge.ok{ color:#065f46; background:#ecfdf5; border-color:#bbf7d0; }
.stock-badge.warn{ color:#7c2d12; background:#fff7ed; border-color:#fed7aa; }
.stock-badge.danger{ color:#7f1d1d; background:#fef2f2; border-color:#fecaca; }

/* Files preview */
.pm-files-preview{
  display:grid; gap:10px; grid-template-columns:repeat(auto-fill, minmax(220px, 1fr));
  border:1.5px dashed var(--border); border-radius:12px; padding:10px; background:#fff;
}
.pm-file{ border:1px solid #eef2ef; border-radius:12px; overflow:hidden; background:#fff; position:relative; box-shadow:0 3px 12px rgba(2,22,10,.04); }
.pm-file img{ width:100%; height:150px; object-fit:cover; background:#f6f7f8; display:block; }
.pm-badge{ position:absolute; left:8px; top:8px; background:#111; color:#fff; border-radius:999px; padding:2px 8px; font-size:12px; font-weight:800; }
.pm-meta{ padding:8px; display:grid; gap:6px; }
.pm-name{ font-size:13px; color:#333; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.pm-actions{ display:flex; gap:6px; }

/* Toasts */
.pm-toasts{ position:fixed; right:14px; top:14px; display:flex; flex-direction:column; gap:8px; z-index:9999; }
.toast{
  display:grid; grid-template-columns:1fr auto; align-items:center;
  padding:10px 12px; border-radius:12px; border:1.5px solid transparent; box-shadow:0 8px 18px rgba(0,0,0,.08);
  background:#fff; min-width:240px; max-width:360px; font-weight:800;
}
.toast .toast-x{ background:transparent; border:0; font-size:18px; line-height:1; cursor:pointer; color:#334155; padding:0 4px; }
.toast.info{ border-color:#e2e8f0; }
.toast.ok{ border-color:#bbf7d0; background:#ecfdf5; color:#065f46; }
.toast.warn{ border-color:#fed7aa; background:#fff7ed; color:#7c2d12; }
.toast.danger{ border-color:#fecaca; background:#fef2f2; color:#7f1d1d; }

/* ───────────────── Variants Manager (Embedded styles) ───────────────── */
/* NOTE: เดิมคือ VariantsManager.css  — ผูกไว้ภายในหน้า ProductManagement เพื่อลดผลกระทบกับส่วนอื่น */

.pm-page .vm-page{
  background:#fff;
  border:1px solid var(--border);
  border-radius:12px;
  padding:20px;
  box-shadow:var(--shadow);
  margin-top:16px;
  font-family:"Sarabun",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

/* Header */
.pm-page .vm-header{
  display:flex; justify-content:space-between; align-items:flex-end; margin-bottom:8px;
}
.pm-page .vm-title{ display:grid; gap:2px; }
.pm-page .vm-product-name{
  font-size:26px; font-weight:800; color:#15321c; line-height:1.2;
}
.pm-page .vm-product-code{
  font-size:16px; font-weight:800; color:var(--brand); letter-spacing:.5px;
}
.pm-page .vm-back{
  color:var(--brand); text-decoration:none; font-weight:600;
}

/* Flash message */
.pm-page .vm-msg{
  background:#e8f5e9; color:var(--brand-600);
  padding:8px 12px; border-radius:8px; margin-top:10px; font-weight:600;
}

/* Options */
.pm-page .vm-opt{ margin-top:12px; }
.pm-page .vm-opt label{ display:block; font-weight:800; margin-bottom:6px; color:#1e293b; }
.pm-page .vm-opt input{
  padding:10px 12px; border:1.5px solid var(--border); border-radius:12px; width:100%;
  background:#fff; outline:none; transition:box-shadow .12s,border-color .12s,background .12s;
}
.pm-page .vm-opt input:focus{ border-color:var(--brand); box-shadow:var(--ring); background:#fcfffc; }

.pm-page .vm-chips{ display:flex; flex-wrap:wrap; gap:6px; margin-top:6px; }
.pm-page .vm-chip{
  background:#f0fdf4; color:var(--brand-600); padding:4px 10px; border-radius:20px;
  display:inline-flex; align-items:center; gap:6px; font-size:13px; font-weight:700;
  border:1px solid #bbf7d0;
}
.pm-page .vm-chip button{ background:none; border:none; cursor:pointer; color:#666; font-size:14px; }

/* Table (variants grid) */
.pm-page .vm-table{
  width:100%; border-collapse:separate; border-spacing:0; margin-top:18px;
  border:1px solid var(--border); border-radius:12px; overflow:hidden; box-shadow:var(--shadow);
}
.pm-page .vm-table th, .pm-page .vm-table td{
  border-bottom:1px solid #e7ece9; padding:10px 12px; text-align:center; background:#fff;
}
.pm-page .vm-table thead th{
  background:linear-gradient(0deg,#f7faf7,#ffffff); font-weight:800; color:#1f2937; position:sticky;
  top: calc(var(--app-header) + 8px); z-index:3;
}
.pm-page .vm-thumb{ width:48px; height:48px; object-fit:cover; border-radius:8px; border:1px solid var(--border); }

/* Upload cell */
.pm-page .vm-upload{
  width:48px; height:48px; display:inline-flex; align-items:center; justify-content:center;
  border:1.5px dashed #b9c6bd; border-radius:8px; color:#667085; font-size:20px; cursor:pointer; position:relative; background:#fff;
}
.pm-page .vm-upload input{ position:absolute; inset:0; opacity:0; cursor:pointer; }

/* Actions under variants table (ใช้ปุ่มหลัก .btn เดิม ไม่สร้าง .btn ซ้ำ) */
.pm-page .vm-actions{ display:flex; gap:10px; margin-top:16px; }
.pm-page .vm-hint{ margin-top:12px; font-size:13px; color:#667085; line-height:1.6; }

/* ───────────────── Responsive ───────────────── */
@media (min-width:1200px){ .pm-search{ flex-basis:440px; } }
@media (max-width:1200px){
  .pm-input-group.pm-row-3{ grid-template-columns:1fr 1fr; }
}
@media (max-width:1024px){
  .pm-form{ grid-template-columns:1fr; }
}
@media (max-width:720px){
  .pm-table thead th.th-actions{ width:auto; }
}
@media (max-width:520px){
  .seg{ width:100%; }
  .pm-search,.pm-filter{ flex:1 1 100%; }
}
