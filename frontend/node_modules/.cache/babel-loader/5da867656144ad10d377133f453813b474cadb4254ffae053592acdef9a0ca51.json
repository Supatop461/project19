{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\components\\\\ThaiAddressPicker.js\",\n  _s = $RefreshSig$();\n// src/components/ThaiAddressPicker.js\n// เลือก จังหวัด → อำเภอ → ตำบล แบบโหลดทีละชั้น (ทนพาธ/คีย์สุดๆ + fallback ได้)\n\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\n\n/* -------------------- Helpers: ดึงค่าคีย์แบบยืดหยุ่น -------------------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst pick = (o, keys) => {\n  for (const k of keys) if (o && o[k] != null) return o[k];\n  return null;\n};\n// จังหวัด\nconst provIdOf = o => pick(o, ['province_id', 'PROVINCE_ID', 'id', 'code']);\nconst provCodeOf = o => pick(o, ['code', 'province_code', 'PROVINCE_CODE', 'id']);\nconst provNameOf = o => pick(o, ['name_th', 'name', 'PROVINCE_NAME']) || '';\n// อำเภอ\nconst distIdOf = o => pick(o, ['amphure_id', 'AMPHUR_ID', 'district_id', 'DISTRICT_ID', 'id', 'code']);\nconst distNameOf = o => pick(o, ['name_th', 'name', 'AMPHUR_NAME', 'DISTRICT_NAME']) || '';\nconst distProvIdOf = o => pick(o, ['province_id', 'PROVINCE_ID']);\nconst distProvCodeOf = o => pick(o, ['province_code', 'PROVINCE_CODE']);\n// ตำบล\nconst subIdOf = o => pick(o, ['tambon_id', 'TAMBON_ID', 'subdistrict_id', 'SUBDISTRICT_ID', 'id', 'code']);\nconst subNameOf = o => pick(o, ['name_th', 'name', 'TAMBON_NAME', 'SUBDISTRICT_NAME']) || '';\nconst subDistIdOf = o => pick(o, ['amphure_id', 'AMPHUR_ID', 'district_id', 'DISTRICT_ID']);\nconst subZipOf = o => pick(o, ['zip_code', 'zipcode', 'POSTCODE', 'postcode']);\nconst joinUrl = (base, path) => `${String(base).replace(/\\/+$/, '')}/${String(path).replace(/^\\/+/, '')}`;\n\n/* ---------- fetch JSON แบบกัน index.html / 404 + กันแคช ---------- */\nasync function loadJSONWithFallback(basePath, candidates) {\n  const tried = [];\n  const withBust = u => u + (u.includes('?') ? '&' : '?') + 'v=20250818'; // กันแคชให้แน่นอน\n\n  for (const name of candidates) {\n    const url = withBust(joinUrl(basePath || '', name));\n    tried.push(url);\n    try {\n      const res = await fetch(url, {\n        cache: 'no-store'\n      }); // ปิด force-cache\n      if (!res.ok) continue;\n      const text = await res.text();\n      try {\n        const json = JSON.parse(text);\n        console.info('[ThaiAddressPicker] loaded', url);\n        return json;\n      } catch {\n        continue; // ได้ HTML (index.html) หรือ text อื่น → ลองชื่อถัดไป\n      }\n    } catch {/* ลองชื่อถัดไป */}\n  }\n  throw new Error(`No valid JSON from: ${tried.join(', ')}`);\n}\n\n/* ================================ Component ================================ */\nexport default function ThaiAddressPicker({\n  value,\n  onChange,\n  basePath = '/thai',\n  basePathCandidates = ['/thai', '/data', ''],\n  disabled = false,\n  showZipInput = false // ✅ ใหม่: ซ่อน/โชว์ช่อง ZIP ในคอมโพเนนต์ (ดีฟอลต์ซ่อน)\n}) {\n  _s();\n  const [provinces, setProvinces] = useState([]);\n  const [districts, setDistricts] = useState([]);\n  const [subs, setSubs] = useState([]);\n  const [loadingProv, setLoadingProv] = useState(true);\n  const [loadingDist, setLoadingDist] = useState(false);\n  const [loadingSub, setLoadingSub] = useState(false);\n  const [baseUsed, setBaseUsed] = useState('');\n  const [errMsg, setErrMsg] = useState('');\n  const cacheRef = useRef({\n    districts: {},\n    subs: {}\n  });\n  const patch = obj => onChange && onChange(obj);\n\n  /* -------------------- โหลด \"จังหวัด\" พร้อมลองหลาย basePath -------------------- */\n  useEffect(() => {\n    let alive = true;\n    (async () => {\n      setLoadingProv(true);\n      setErrMsg('');\n      const candidates = [basePath, ...basePathCandidates].filter((v, i, a) => v != null && a.indexOf(v) === i);\n      let loaded = false,\n        lastError = '';\n      for (const bp of candidates) {\n        try {\n          const js = await loadJSONWithFallback(bp || '', ['provinces.json']);\n          if (!alive) return;\n          if (!Array.isArray(js) || js.length === 0) throw new Error('empty provinces');\n          setProvinces(js);\n          setBaseUsed(bp || '');\n          loaded = true;\n          break;\n        } catch (e) {\n          lastError = (e === null || e === void 0 ? void 0 : e.message) || String(e);\n        }\n      }\n      if (!alive) return;\n      if (!loaded) {\n        setProvinces([]);\n        setBaseUsed('');\n        setErrMsg('โหลด provinces.json ไม่ได้ — ตรวจพาธใน public (เช่น /thai หรือ /data)');\n        console.error('[ThaiAddressPicker] provinces load failed:', lastError);\n      }\n      setLoadingProv(false);\n    })();\n    return () => {\n      alive = false;\n    };\n  }, [basePath, JSON.stringify(basePathCandidates)]);\n\n  /* -------------------- ค่าปัจจุบัน (รองรับ *_id และ *_code และชื่อ) -------------------- */\n  const currentProvinceId = useMemo(() => {\n    if (!(provinces !== null && provinces !== void 0 && provinces.length)) return '';\n    if ((value === null || value === void 0 ? void 0 : value.province_id) != null) return String(value.province_id);\n    if ((value === null || value === void 0 ? void 0 : value.province_code) != null) {\n      const pByCode = provinces.find(x => String(provCodeOf(x)) === String(value.province_code));\n      if (pByCode) return String(provIdOf(pByCode));\n    }\n    if (value !== null && value !== void 0 && value.province) {\n      const name = String(value.province).trim().toLowerCase();\n      const pByName = provinces.find(x => provNameOf(x).trim().toLowerCase() === name);\n      if (pByName) return String(provIdOf(pByName));\n    }\n    return '';\n  }, [value === null || value === void 0 ? void 0 : value.province_id, value === null || value === void 0 ? void 0 : value.province_code, value === null || value === void 0 ? void 0 : value.province, provinces]);\n  const currentDistrictId = useMemo(() => {\n    if (!(districts !== null && districts !== void 0 && districts.length)) return '';\n    if ((value === null || value === void 0 ? void 0 : value.district_id) != null) return String(value.district_id);\n    if ((value === null || value === void 0 ? void 0 : value.district_code) != null) {\n      const dByCode = districts.find(x => String(distIdOf(x)) === String(value.district_code));\n      if (dByCode) return String(distIdOf(dByCode));\n    }\n    if (value !== null && value !== void 0 && value.district) {\n      const name = String(value.district).trim().toLowerCase();\n      const dByName = districts.find(x => distNameOf(x).trim().toLowerCase() === name);\n      if (dByName) return String(distIdOf(dByName));\n    }\n    return '';\n  }, [value === null || value === void 0 ? void 0 : value.district_id, value === null || value === void 0 ? void 0 : value.district_code, value === null || value === void 0 ? void 0 : value.district, districts]);\n  const currentSubdistrictId = useMemo(() => {\n    if (!(subs !== null && subs !== void 0 && subs.length)) return '';\n    if ((value === null || value === void 0 ? void 0 : value.subdistrict_id) != null) return String(value.subdistrict_id);\n    if ((value === null || value === void 0 ? void 0 : value.subdistrict_code) != null) {\n      const sByCode = subs.find(x => String(subIdOf(x)) === String(value.subdistrict_code));\n      if (sByCode) return String(subIdOf(sByCode));\n    }\n    if (value !== null && value !== void 0 && value.subdistrict) {\n      const name = String(value.subdistrict).trim().toLowerCase();\n      const sByName = subs.find(x => subNameOf(x).trim().toLowerCase() === name);\n      if (sByName) return String(subIdOf(sByName));\n    }\n    return '';\n  }, [value === null || value === void 0 ? void 0 : value.subdistrict_id, value === null || value === void 0 ? void 0 : value.subdistrict_code, value === null || value === void 0 ? void 0 : value.subdistrict, subs]);\n\n  /* -------------------- เมื่อเลือก/เปลี่ยน \"จังหวัด\" → โหลดอำเภอ -------------------- */\n  useEffect(() => {\n    const provId = currentProvinceId;\n    if (!provId || !baseUsed) {\n      setDistricts([]);\n      setSubs([]);\n      return;\n    }\n    if (cacheRef.current.districts[provId]) {\n      setDistricts(cacheRef.current.districts[provId]);\n      return;\n    }\n    let alive = true;\n    (async () => {\n      setLoadingDist(true);\n      try {\n        var _provCodeOf;\n        const provObj = provinces.find(p => String(provIdOf(p)) === String(provId)) || {};\n        const tryKeys = Array.from(new Set([String(provId), String((_provCodeOf = provCodeOf(provObj)) !== null && _provCodeOf !== void 0 ? _provCodeOf : ''), String(provId).padStart(2, '0'), String(provId).padStart(3, '0')].filter(Boolean)));\n        let data = null,\n          lastErr = '';\n\n        // ไฟล์รายจังหวัด\n        for (const k of tryKeys) {\n          try {\n            const js = await loadJSONWithFallback(baseUsed, [`districts/${k}.json`]);\n            if (Array.isArray(js) && js.length) {\n              data = js;\n              break;\n            }\n          } catch (e) {\n            lastErr = (e === null || e === void 0 ? void 0 : e.message) || String(e);\n          }\n        }\n\n        // ไม่เจอ → ใช้ amphures.json แล้ว filter\n        if (!data) {\n          var _provCodeOf2;\n          const all = await loadJSONWithFallback(baseUsed, ['amphures.json']);\n          const provCandidates = Array.from(new Set([String(provId), String((_provCodeOf2 = provCodeOf(provObj)) !== null && _provCodeOf2 !== void 0 ? _provCodeOf2 : '')].filter(Boolean)));\n          const filtered = (all || []).filter(a => {\n            var _ref, _distProvIdOf;\n            const pid = String((_ref = (_distProvIdOf = distProvIdOf(a)) !== null && _distProvIdOf !== void 0 ? _distProvIdOf : distProvCodeOf(a)) !== null && _ref !== void 0 ? _ref : '');\n            return pid && provCandidates.includes(pid);\n          });\n          data = filtered;\n        }\n        if (!alive) return;\n        const arr = Array.isArray(data) ? data : [];\n        cacheRef.current.districts[provId] = arr;\n        setDistricts(arr);\n        if (arr.length === 0) console.warn('[ThaiAddressPicker] districts empty for provinceId=', provId, 'base=', baseUsed);\n      } catch (e) {\n        console.error('[ThaiAddressPicker] districts load error:', e);\n        if (alive) setDistricts([]);\n      } finally {\n        if (alive) setLoadingDist(false);\n      }\n    })();\n    return () => {\n      alive = false;\n    };\n  }, [currentProvinceId, baseUsed, provinces]);\n\n  /* -------------------- เมื่อเลือก/เปลี่ยน \"อำเภอ\" → โหลดตำบล -------------------- */\n  useEffect(() => {\n    const distId = currentDistrictId;\n    if (!distId || !baseUsed) {\n      setSubs([]);\n      return;\n    }\n    if (cacheRef.current.subs[distId]) {\n      setSubs(cacheRef.current.subs[distId]);\n      return;\n    }\n    let alive = true;\n    (async () => {\n      setLoadingSub(true);\n      try {\n        const tryKeys = Array.from(new Set([String(distId), String(distId).padStart(2, '0'), String(distId).padStart(3, '0')]));\n        let data = null,\n          lastErr = '';\n\n        // ไฟล์รายอำเภอ\n        for (const k of tryKeys) {\n          try {\n            const js = await loadJSONWithFallback(baseUsed, [`subdistricts/${k}.json`]);\n            if (Array.isArray(js) && js.length) {\n              data = js;\n              break;\n            }\n          } catch (e) {\n            lastErr = (e === null || e === void 0 ? void 0 : e.message) || String(e);\n          }\n        }\n\n        // ไม่เจอ → ใช้ tambons.json แล้ว filter\n        if (!data) {\n          const all = await loadJSONWithFallback(baseUsed, ['tambons.json']);\n          const filtered = (all || []).filter(t => {\n            var _subDistIdOf;\n            return String((_subDistIdOf = subDistIdOf(t)) !== null && _subDistIdOf !== void 0 ? _subDistIdOf : '') === String(distId);\n          });\n          data = filtered;\n        }\n        if (!alive) return;\n        const arr = Array.isArray(data) ? data : [];\n        cacheRef.current.subs[distId] = arr;\n        setSubs(arr);\n        if (arr.length === 0) console.warn('[ThaiAddressPicker] subdistricts empty for districtId=', distId, 'base=', baseUsed);\n      } catch (e) {\n        console.error('[ThaiAddressPicker] subdistricts load error:', e);\n        if (alive) setSubs([]);\n      } finally {\n        if (alive) setLoadingSub(false);\n      }\n    })();\n    return () => {\n      alive = false;\n    };\n  }, [currentDistrictId, baseUsed]);\n\n  /* -------------------- onChange ของ select ทั้ง 3 ชั้น -------------------- */\n  const handleProvince = e => {\n    const id = e.target.value || '';\n    const sel = provinces.find(p => String(provIdOf(p)) === String(id)) || null;\n    patch({\n      province: sel ? provNameOf(sel) : '',\n      province_id: sel ? provIdOf(sel) : null,\n      province_code: sel ? provCodeOf(sel) : null,\n      district: '',\n      district_id: null,\n      district_code: null,\n      subdistrict: '',\n      subdistrict_id: null,\n      subdistrict_code: null,\n      postal_code: ''\n    });\n  };\n  const handleDistrict = e => {\n    const id = e.target.value || '';\n    const sel = districts.find(d => String(distIdOf(d)) === String(id)) || null;\n    patch({\n      district: sel ? distNameOf(sel) : '',\n      district_id: sel ? distIdOf(sel) : null,\n      district_code: sel ? distIdOf(sel) : null,\n      // บางชุดไม่มี code แยก ใช้ id แทน\n      subdistrict: '',\n      subdistrict_id: null,\n      subdistrict_code: null,\n      postal_code: ''\n    });\n  };\n  const handleSubdistrict = e => {\n    const id = e.target.value || '';\n    const sel = subs.find(s => String(subIdOf(s)) === String(id)) || null;\n    patch({\n      subdistrict: sel ? subNameOf(sel) : '',\n      subdistrict_id: sel ? subIdOf(sel) : null,\n      subdistrict_code: sel ? subIdOf(sel) : null,\n      postal_code: sel ? String(subZipOf(sel) || '') : ''\n    });\n  };\n\n  /* -------------------- disabled flags -------------------- */\n  const disProv = disabled || loadingProv || !!errMsg;\n  const disDist = disabled || !currentProvinceId || loadingDist || !!errMsg;\n  const disSub = disabled || !currentDistrictId || loadingSub || !!errMsg;\n\n  /* -------------------- UI -------------------- */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'grid',\n      gap: 8\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr 1fr',\n        gap: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        value: currentProvinceId,\n        onChange: handleProvince,\n        disabled: disProv,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: loadingProv ? 'กำลังโหลดจังหวัด...' : errMsg ? 'โหลดจังหวัดไม่สำเร็จ' : '-- เลือกจังหวัด --'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this), provinces.map(p => {\n          var _provIdOf;\n          const id = String((_provIdOf = provIdOf(p)) !== null && _provIdOf !== void 0 ? _provIdOf : '');\n          const name = provNameOf(p);\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: id,\n            children: name\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 20\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: currentDistrictId,\n        onChange: handleDistrict,\n        disabled: disDist,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: loadingDist ? 'กำลังโหลดอำเภอ...' : currentProvinceId ? '-- เลือกอำเภอ --' : 'เลือกจังหวัดก่อน'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this), districts.map(d => {\n          var _distIdOf;\n          const id = String((_distIdOf = distIdOf(d)) !== null && _distIdOf !== void 0 ? _distIdOf : '');\n          const name = distNameOf(d);\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: id,\n            children: name\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 20\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: currentSubdistrictId,\n        onChange: handleSubdistrict,\n        disabled: disSub,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: loadingSub ? 'กำลังโหลดตำบล...' : currentDistrictId ? '-- เลือกตำบล --' : 'เลือกอำเภอก่อน'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), subs.map(s => {\n          var _subIdOf;\n          const id = String((_subIdOf = subIdOf(s)) !== null && _subIdOf !== void 0 ? _subIdOf : '');\n          const name = subNameOf(s);\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: id,\n            children: name\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 20\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this), showZipInput && /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E44\\u0E1B\\u0E23\\u0E29\\u0E13\\u0E35\\u0E22\\u0E4C\",\n      value: (value === null || value === void 0 ? void 0 : value.postal_code) || '',\n      onChange: e => patch({\n        postal_code: e.target.value\n      }),\n      disabled: disabled || !!errMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 9\n    }, this), baseUsed ? /*#__PURE__*/_jsxDEV(\"small\", {\n      style: {\n        color: '#999'\n      },\n      children: [\"\\u0E43\\u0E0A\\u0E49\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E08\\u0E32\\u0E01: \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: baseUsed || '/'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 65\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 19\n    }, this) : null, errMsg ? /*#__PURE__*/_jsxDEV(\"small\", {\n      style: {\n        color: '#c00'\n      },\n      children: errMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 19\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 305,\n    columnNumber: 5\n  }, this);\n}\n_s(ThaiAddressPicker, \"OZLhb7J2j8Y0Q/v1ryyWEsKY+qg=\");\n_c = ThaiAddressPicker;\nvar _c;\n$RefreshReg$(_c, \"ThaiAddressPicker\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","jsxDEV","_jsxDEV","pick","o","keys","k","provIdOf","provCodeOf","provNameOf","distIdOf","distNameOf","distProvIdOf","distProvCodeOf","subIdOf","subNameOf","subDistIdOf","subZipOf","joinUrl","base","path","String","replace","loadJSONWithFallback","basePath","candidates","tried","withBust","u","includes","name","url","push","res","fetch","cache","ok","text","json","JSON","parse","console","info","Error","join","ThaiAddressPicker","value","onChange","basePathCandidates","disabled","showZipInput","_s","provinces","setProvinces","districts","setDistricts","subs","setSubs","loadingProv","setLoadingProv","loadingDist","setLoadingDist","loadingSub","setLoadingSub","baseUsed","setBaseUsed","errMsg","setErrMsg","cacheRef","patch","obj","alive","filter","v","i","a","indexOf","loaded","lastError","bp","js","Array","isArray","length","e","message","error","stringify","currentProvinceId","province_id","province_code","pByCode","find","x","province","trim","toLowerCase","pByName","currentDistrictId","district_id","district_code","dByCode","district","dByName","currentSubdistrictId","subdistrict_id","subdistrict_code","sByCode","subdistrict","sByName","provId","current","_provCodeOf","provObj","p","tryKeys","from","Set","padStart","Boolean","data","lastErr","_provCodeOf2","all","provCandidates","filtered","_ref","_distProvIdOf","pid","arr","warn","distId","t","_subDistIdOf","handleProvince","id","target","sel","postal_code","handleDistrict","d","handleSubdistrict","s","disProv","disDist","disSub","style","display","gap","children","gridTemplateColumns","fileName","_jsxFileName","lineNumber","columnNumber","map","_provIdOf","_distIdOf","_subIdOf","placeholder","color","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/components/ThaiAddressPicker.js"],"sourcesContent":["// src/components/ThaiAddressPicker.js\r\n// เลือก จังหวัด → อำเภอ → ตำบล แบบโหลดทีละชั้น (ทนพาธ/คีย์สุดๆ + fallback ได้)\r\n\r\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\r\n\r\n/* -------------------- Helpers: ดึงค่าคีย์แบบยืดหยุ่น -------------------- */\r\nconst pick = (o, keys) => { for (const k of keys) if (o && o[k] != null) return o[k]; return null; };\r\n// จังหวัด\r\nconst provIdOf   = (o) => pick(o, ['province_id','PROVINCE_ID','id','code']);\r\nconst provCodeOf = (o) => pick(o, ['code','province_code','PROVINCE_CODE','id']);\r\nconst provNameOf = (o) => pick(o, ['name_th','name','PROVINCE_NAME']) || '';\r\n// อำเภอ\r\nconst distIdOf       = (o) => pick(o, ['amphure_id','AMPHUR_ID','district_id','DISTRICT_ID','id','code']);\r\nconst distNameOf     = (o) => pick(o, ['name_th','name','AMPHUR_NAME','DISTRICT_NAME']) || '';\r\nconst distProvIdOf   = (o) => pick(o, ['province_id','PROVINCE_ID']);\r\nconst distProvCodeOf = (o) => pick(o, ['province_code','PROVINCE_CODE']);\r\n// ตำบล\r\nconst subIdOf     = (o) => pick(o, ['tambon_id','TAMBON_ID','subdistrict_id','SUBDISTRICT_ID','id','code']);\r\nconst subNameOf   = (o) => pick(o, ['name_th','name','TAMBON_NAME','SUBDISTRICT_NAME']) || '';\r\nconst subDistIdOf = (o) => pick(o, ['amphure_id','AMPHUR_ID','district_id','DISTRICT_ID']);\r\nconst subZipOf    = (o) => pick(o, ['zip_code','zipcode','POSTCODE','postcode']);\r\n\r\nconst joinUrl = (base, path) => `${String(base).replace(/\\/+$/, '')}/${String(path).replace(/^\\/+/, '')}`;\r\n\r\n/* ---------- fetch JSON แบบกัน index.html / 404 + กันแคช ---------- */\r\nasync function loadJSONWithFallback(basePath, candidates) {\r\n  const tried = [];\r\n  const withBust = (u) => u + (u.includes('?') ? '&' : '?') + 'v=20250818'; // กันแคชให้แน่นอน\r\n\r\n  for (const name of candidates) {\r\n    const url = withBust(joinUrl(basePath || '', name));\r\n    tried.push(url);\r\n    try {\r\n      const res = await fetch(url, { cache: 'no-store' }); // ปิด force-cache\r\n      if (!res.ok) continue;\r\n      const text = await res.text();\r\n      try {\r\n        const json = JSON.parse(text);\r\n        console.info('[ThaiAddressPicker] loaded', url);\r\n        return json;\r\n      } catch {\r\n        continue; // ได้ HTML (index.html) หรือ text อื่น → ลองชื่อถัดไป\r\n      }\r\n    } catch { /* ลองชื่อถัดไป */ }\r\n  }\r\n  throw new Error(`No valid JSON from: ${tried.join(', ')}`);\r\n}\r\n\r\n/* ================================ Component ================================ */\r\nexport default function ThaiAddressPicker({\r\n  value,\r\n  onChange,\r\n  basePath = '/thai',\r\n  basePathCandidates = ['/thai', '/data', ''],\r\n  disabled = false,\r\n  showZipInput = false,       // ✅ ใหม่: ซ่อน/โชว์ช่อง ZIP ในคอมโพเนนต์ (ดีฟอลต์ซ่อน)\r\n}) {\r\n  const [provinces, setProvinces] = useState([]);\r\n  const [districts, setDistricts] = useState([]);\r\n  const [subs, setSubs]           = useState([]);\r\n\r\n  const [loadingProv, setLoadingProv] = useState(true);\r\n  const [loadingDist, setLoadingDist] = useState(false);\r\n  const [loadingSub,  setLoadingSub ] = useState(false);\r\n\r\n  const [baseUsed, setBaseUsed] = useState('');\r\n  const [errMsg, setErrMsg]     = useState('');\r\n\r\n  const cacheRef = useRef({ districts: {}, subs: {} });\r\n  const patch = (obj) => onChange && onChange(obj);\r\n\r\n  /* -------------------- โหลด \"จังหวัด\" พร้อมลองหลาย basePath -------------------- */\r\n  useEffect(() => {\r\n    let alive = true;\r\n    (async () => {\r\n      setLoadingProv(true);\r\n      setErrMsg('');\r\n\r\n      const candidates = [basePath, ...basePathCandidates].filter((v,i,a) => v!=null && a.indexOf(v)===i);\r\n      let loaded = false, lastError = '';\r\n\r\n      for (const bp of candidates) {\r\n        try {\r\n          const js = await loadJSONWithFallback(bp || '', ['provinces.json']);\r\n          if (!alive) return;\r\n          if (!Array.isArray(js) || js.length === 0) throw new Error('empty provinces');\r\n          setProvinces(js);\r\n          setBaseUsed(bp || '');\r\n          loaded = true;\r\n          break;\r\n        } catch (e) { lastError = e?.message || String(e); }\r\n      }\r\n\r\n      if (!alive) return;\r\n      if (!loaded) {\r\n        setProvinces([]);\r\n        setBaseUsed('');\r\n        setErrMsg('โหลด provinces.json ไม่ได้ — ตรวจพาธใน public (เช่น /thai หรือ /data)');\r\n        console.error('[ThaiAddressPicker] provinces load failed:', lastError);\r\n      }\r\n      setLoadingProv(false);\r\n    })();\r\n    return () => { alive = false; };\r\n  }, [basePath, JSON.stringify(basePathCandidates)]);\r\n\r\n  /* -------------------- ค่าปัจจุบัน (รองรับ *_id และ *_code และชื่อ) -------------------- */\r\n  const currentProvinceId = useMemo(() => {\r\n    if (!provinces?.length) return '';\r\n    if (value?.province_id != null) return String(value.province_id);\r\n    if (value?.province_code != null) {\r\n      const pByCode = provinces.find(x => String(provCodeOf(x)) === String(value.province_code));\r\n      if (pByCode) return String(provIdOf(pByCode));\r\n    }\r\n    if (value?.province) {\r\n      const name = String(value.province).trim().toLowerCase();\r\n      const pByName = provinces.find(x => provNameOf(x).trim().toLowerCase() === name);\r\n      if (pByName) return String(provIdOf(pByName));\r\n    }\r\n    return '';\r\n  }, [value?.province_id, value?.province_code, value?.province, provinces]);\r\n\r\n  const currentDistrictId = useMemo(() => {\r\n    if (!districts?.length) return '';\r\n    if (value?.district_id != null) return String(value.district_id);\r\n    if (value?.district_code != null) {\r\n      const dByCode = districts.find(x => String(distIdOf(x)) === String(value.district_code));\r\n      if (dByCode) return String(distIdOf(dByCode));\r\n    }\r\n    if (value?.district) {\r\n      const name = String(value.district).trim().toLowerCase();\r\n      const dByName = districts.find(x => distNameOf(x).trim().toLowerCase() === name);\r\n      if (dByName) return String(distIdOf(dByName));\r\n    }\r\n    return '';\r\n  }, [value?.district_id, value?.district_code, value?.district, districts]);\r\n\r\n  const currentSubdistrictId = useMemo(() => {\r\n    if (!subs?.length) return '';\r\n    if (value?.subdistrict_id != null) return String(value.subdistrict_id);\r\n    if (value?.subdistrict_code != null) {\r\n      const sByCode = subs.find(x => String(subIdOf(x)) === String(value.subdistrict_code));\r\n      if (sByCode) return String(subIdOf(sByCode));\r\n    }\r\n    if (value?.subdistrict) {\r\n      const name = String(value.subdistrict).trim().toLowerCase();\r\n      const sByName = subs.find(x => subNameOf(x).trim().toLowerCase() === name);\r\n      if (sByName) return String(subIdOf(sByName));\r\n    }\r\n    return '';\r\n  }, [value?.subdistrict_id, value?.subdistrict_code, value?.subdistrict, subs]);\r\n\r\n  /* -------------------- เมื่อเลือก/เปลี่ยน \"จังหวัด\" → โหลดอำเภอ -------------------- */\r\n  useEffect(() => {\r\n    const provId = currentProvinceId;\r\n    if (!provId || !baseUsed) { setDistricts([]); setSubs([]); return; }\r\n\r\n    if (cacheRef.current.districts[provId]) { setDistricts(cacheRef.current.districts[provId]); return; }\r\n\r\n    let alive = true;\r\n    (async () => {\r\n      setLoadingDist(true);\r\n      try {\r\n        const provObj = provinces.find(p => String(provIdOf(p)) === String(provId)) || {};\r\n        const tryKeys = Array.from(new Set([\r\n          String(provId),\r\n          String(provCodeOf(provObj) ?? ''),\r\n          String(provId).padStart(2,'0'),\r\n          String(provId).padStart(3,'0'),\r\n        ].filter(Boolean)));\r\n\r\n        let data = null, lastErr = '';\r\n\r\n        // ไฟล์รายจังหวัด\r\n        for (const k of tryKeys) {\r\n          try {\r\n            const js = await loadJSONWithFallback(baseUsed, [`districts/${k}.json`]);\r\n            if (Array.isArray(js) && js.length) { data = js; break; }\r\n          } catch (e) { lastErr = e?.message || String(e); }\r\n        }\r\n\r\n        // ไม่เจอ → ใช้ amphures.json แล้ว filter\r\n        if (!data) {\r\n          const all = await loadJSONWithFallback(baseUsed, ['amphures.json']);\r\n          const provCandidates = Array.from(new Set([\r\n            String(provId),\r\n            String(provCodeOf(provObj) ?? ''),\r\n          ].filter(Boolean)));\r\n          const filtered = (all || []).filter(a => {\r\n            const pid = String(distProvIdOf(a) ?? distProvCodeOf(a) ?? '');\r\n            return pid && provCandidates.includes(pid);\r\n          });\r\n          data = filtered;\r\n        }\r\n\r\n        if (!alive) return;\r\n        const arr = Array.isArray(data) ? data : [];\r\n        cacheRef.current.districts[provId] = arr;\r\n        setDistricts(arr);\r\n        if (arr.length === 0) console.warn('[ThaiAddressPicker] districts empty for provinceId=', provId, 'base=', baseUsed);\r\n      } catch (e) {\r\n        console.error('[ThaiAddressPicker] districts load error:', e);\r\n        if (alive) setDistricts([]);\r\n      } finally {\r\n        if (alive) setLoadingDist(false);\r\n      }\r\n    })();\r\n\r\n    return () => { alive = false; };\r\n  }, [currentProvinceId, baseUsed, provinces]);\r\n\r\n  /* -------------------- เมื่อเลือก/เปลี่ยน \"อำเภอ\" → โหลดตำบล -------------------- */\r\n  useEffect(() => {\r\n    const distId = currentDistrictId;\r\n    if (!distId || !baseUsed) { setSubs([]); return; }\r\n\r\n    if (cacheRef.current.subs[distId]) { setSubs(cacheRef.current.subs[distId]); return; }\r\n\r\n    let alive = true;\r\n    (async () => {\r\n      setLoadingSub(true);\r\n      try {\r\n        const tryKeys = Array.from(new Set([\r\n          String(distId),\r\n          String(distId).padStart(2,'0'),\r\n          String(distId).padStart(3,'0'),\r\n        ]));\r\n\r\n        let data = null, lastErr = '';\r\n\r\n        // ไฟล์รายอำเภอ\r\n        for (const k of tryKeys) {\r\n          try {\r\n            const js = await loadJSONWithFallback(baseUsed, [`subdistricts/${k}.json`]);\r\n            if (Array.isArray(js) && js.length) { data = js; break; }\r\n          } catch (e) { lastErr = e?.message || String(e); }\r\n        }\r\n\r\n        // ไม่เจอ → ใช้ tambons.json แล้ว filter\r\n        if (!data) {\r\n          const all = await loadJSONWithFallback(baseUsed, ['tambons.json']);\r\n          const filtered = (all || []).filter(t => String(subDistIdOf(t) ?? '') === String(distId));\r\n          data = filtered;\r\n        }\r\n\r\n        if (!alive) return;\r\n        const arr = Array.isArray(data) ? data : [];\r\n        cacheRef.current.subs[distId] = arr;\r\n        setSubs(arr);\r\n        if (arr.length === 0) console.warn('[ThaiAddressPicker] subdistricts empty for districtId=', distId, 'base=', baseUsed);\r\n      } catch (e) {\r\n        console.error('[ThaiAddressPicker] subdistricts load error:', e);\r\n        if (alive) setSubs([]);\r\n      } finally {\r\n        if (alive) setLoadingSub(false);\r\n      }\r\n    })();\r\n\r\n    return () => { alive = false; };\r\n  }, [currentDistrictId, baseUsed]);\r\n\r\n  /* -------------------- onChange ของ select ทั้ง 3 ชั้น -------------------- */\r\n  const handleProvince = (e) => {\r\n    const id  = e.target.value || '';\r\n    const sel = provinces.find(p => String(provIdOf(p)) === String(id)) || null;\r\n    patch({\r\n      province:       sel ? provNameOf(sel) : '',\r\n      province_id:    sel ? provIdOf(sel)   : null,\r\n      province_code:  sel ? provCodeOf(sel) : null,\r\n      district: '', district_id: null, district_code: null,\r\n      subdistrict: '', subdistrict_id: null, subdistrict_code: null,\r\n      postal_code: '',\r\n    });\r\n  };\r\n\r\n  const handleDistrict = (e) => {\r\n    const id  = e.target.value || '';\r\n    const sel = districts.find(d => String(distIdOf(d)) === String(id)) || null;\r\n    patch({\r\n      district:       sel ? distNameOf(sel) : '',\r\n      district_id:    sel ? distIdOf(sel)   : null,\r\n      district_code:  sel ? distIdOf(sel)   : null, // บางชุดไม่มี code แยก ใช้ id แทน\r\n      subdistrict: '', subdistrict_id: null, subdistrict_code: null,\r\n      postal_code: '',\r\n    });\r\n  };\r\n\r\n  const handleSubdistrict = (e) => {\r\n    const id  = e.target.value || '';\r\n    const sel = subs.find(s => String(subIdOf(s)) === String(id)) || null;\r\n    patch({\r\n      subdistrict:      sel ? subNameOf(sel) : '',\r\n      subdistrict_id:   sel ? subIdOf(sel)   : null,\r\n      subdistrict_code: sel ? subIdOf(sel)   : null,\r\n      postal_code:      sel ? String(subZipOf(sel) || '') : '',\r\n    });\r\n  };\r\n\r\n  /* -------------------- disabled flags -------------------- */\r\n  const disProv = disabled || loadingProv || !!errMsg;\r\n  const disDist = disabled || !currentProvinceId || loadingDist || !!errMsg;\r\n  const disSub  = disabled || !currentDistrictId || loadingSub  || !!errMsg;\r\n\r\n  /* -------------------- UI -------------------- */\r\n  return (\r\n    <div style={{ display: 'grid', gap: 8 }}>\r\n      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: 8 }}>\r\n        {/* จังหวัด */}\r\n        <select value={currentProvinceId} onChange={handleProvince} disabled={disProv}>\r\n          <option value=\"\">\r\n            {loadingProv ? 'กำลังโหลดจังหวัด...' : (errMsg ? 'โหลดจังหวัดไม่สำเร็จ' : '-- เลือกจังหวัด --')}\r\n          </option>\r\n          {provinces.map(p => {\r\n            const id   = String(provIdOf(p) ?? '');\r\n            const name = provNameOf(p);\r\n            return <option key={id} value={id}>{name}</option>;\r\n          })}\r\n        </select>\r\n\r\n        {/* อำเภอ */}\r\n        <select value={currentDistrictId} onChange={handleDistrict} disabled={disDist}>\r\n          <option value=\"\">\r\n            {loadingDist ? 'กำลังโหลดอำเภอ...' : (currentProvinceId ? '-- เลือกอำเภอ --' : 'เลือกจังหวัดก่อน')}\r\n          </option>\r\n          {districts.map(d => {\r\n            const id   = String(distIdOf(d) ?? '');\r\n            const name = distNameOf(d);\r\n            return <option key={id} value={id}>{name}</option>;\r\n          })}\r\n        </select>\r\n\r\n        {/* ตำบล */}\r\n        <select\r\n          value={currentSubdistrictId}\r\n          onChange={handleSubdistrict}\r\n          disabled={disSub}\r\n        >\r\n          <option value=\"\">\r\n            {loadingSub ? 'กำลังโหลดตำบล...' : (currentDistrictId ? '-- เลือกตำบล --' : 'เลือกอำเภอก่อน')}\r\n          </option>\r\n          {subs.map(s => {\r\n            const id   = String(subIdOf(s) ?? '');\r\n            const name = subNameOf(s);\r\n            return <option key={id} value={id}>{name}</option>;\r\n          })}\r\n        </select>\r\n      </div>\r\n\r\n      {/* รหัสไปรษณีย์ (แสดงเฉพาะเมื่อสั่งให้แสดง) */}\r\n      {showZipInput && (\r\n        <input\r\n          placeholder=\"รหัสไปรษณีย์\"\r\n          value={value?.postal_code || ''}\r\n          onChange={e => patch({ postal_code: e.target.value })}\r\n          disabled={disabled || !!errMsg}\r\n        />\r\n      )}\r\n\r\n      {/* Debug */}\r\n      {baseUsed ? <small style={{ color:'#999' }}>ใช้ข้อมูลจาก: <code>{baseUsed || '/'}</code></small> : null}\r\n      {errMsg   ? <small style={{ color:'#c00' }}>{errMsg}</small> : null}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}