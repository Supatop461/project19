{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\admin\\\\AdminUnits.js\",\n  _s = $RefreshSig$();\n// src/admin/AdminUnits.js\n// ✅ หน่วยสินค้า (product_units) — ฝั่งแอดมิน\n// Endpoints ใช้จริงตอนนี้:\n//   GET    /api/admin/units[?only_visible=1]\n//   POST   /api/admin/units\n//   PUT    /api/admin/units/:code       // :code รองรับเลข id ได้\n//   DELETE /api/admin/units/:code\n\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport './admin-units.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst asStr = v => v === null || v === undefined ? '' : String(v).trim();\nconst toArr = x => Array.isArray(x) ? x : x ? [x] : [];\nconst uniq = xs => Array.from(new Set(xs));\n\n/* ---------- Toggle Button Group (multi) ---------- */\nfunction MultiToggle({\n  options,\n  value = [],\n  onChange\n}) {\n  const set = new Set((value || []).map(String));\n  const toggle = id => {\n    const next = new Set(set);\n    const key = String(id);\n    next.has(key) ? next.delete(key) : next.add(key);\n    onChange(Array.from(next));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mu-wrap\",\n    children: options.map(opt => {\n      const id = String(opt.value);\n      const active = set.has(id);\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: `mu-chip ${active ? 'is-active' : ''}`,\n        onClick: () => toggle(id),\n        \"aria-pressed\": active,\n        title: opt.label,\n        children: opt.label\n      }, id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n}\n\n/* ---------- API helpers (ใช้ fetch โดยตรง) ---------- */\n_c = MultiToggle;\nasync function httpJSON(method, url, body) {\n  const res = await fetch(url, {\n    method,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    credentials: 'include',\n    body: body ? JSON.stringify(body) : undefined\n  });\n  if (!res.ok) {\n    const err = await res.json().catch(() => ({}));\n    throw {\n      status: res.status,\n      response: {\n        data: err\n      }\n    };\n  }\n  return res.json().catch(() => ({}));\n}\nconst listUnits = async (params = {}) => {\n  const qs = new URLSearchParams();\n  if (params.only_visible) qs.set('only_visible', '1');\n  const url = `/api/admin/units${qs.toString() ? `?${qs}` : ''}`;\n  return httpJSON('GET', url);\n};\nconst createUnitAPI = payload => httpJSON('POST', '/api/admin/units', payload);\nconst updateUnitAPI = (codeOrId, payload) => httpJSON('PUT', `/api/admin/units/${encodeURIComponent(codeOrId)}`, payload);\nconst deleteUnitAPI = codeOrId => httpJSON('DELETE', `/api/admin/units/${encodeURIComponent(codeOrId)}`);\n\n/* หาคีย์สำหรับ row (code เป็นหลัก, ถ้าไม่มีค่อยใช้ unit_id/id) */\nconst unitKey = u => {\n  var _u$code, _ref, _u$unit_id;\n  return (_u$code = u === null || u === void 0 ? void 0 : u.code) !== null && _u$code !== void 0 ? _u$code : (_ref = (_u$unit_id = u === null || u === void 0 ? void 0 : u.unit_id) !== null && _u$unit_id !== void 0 ? _u$unit_id : u === null || u === void 0 ? void 0 : u.id) !== null && _ref !== void 0 ? _ref : '';\n};\nexport default function AdminUnits() {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]); // [{value,label}]\n  const [units, setUnits] = useState([]);\n  const [filter, setFilter] = useState('');\n  const [onlyVisible, setOnlyVisible] = useState(false);\n  const [form, setForm] = useState({\n    code: '',\n    unit_name: '',\n    description: '',\n    category_ids: [] // array of TEXT ids\n  });\n  const [editing, setEditing] = useState(null); // เก็บแถวที่กำลังแก้ไข (ใช้ code เป็นหลัก)\n\n  // ====== focus helpers ======\n  const formWrapRef = useRef(null);\n  const unitNameInputRef = useRef(null);\n  const focusForm = () => {\n    var _unitNameInputRef$cur, _formWrapRef$current;\n    const target = unitNameInputRef.current || formWrapRef.current;\n    if (!target) return;\n    target.scrollIntoView({\n      behavior: 'smooth',\n      block: 'center'\n    });\n    (_unitNameInputRef$cur = unitNameInputRef.current) === null || _unitNameInputRef$cur === void 0 ? void 0 : _unitNameInputRef$cur.focus({\n      preventScroll: true\n    });\n    (_formWrapRef$current = formWrapRef.current) === null || _formWrapRef$current === void 0 ? void 0 : _formWrapRef$current.classList.add('flash-focus');\n    setTimeout(() => {\n      var _formWrapRef$current2;\n      return (_formWrapRef$current2 = formWrapRef.current) === null || _formWrapRef$current2 === void 0 ? void 0 : _formWrapRef$current2.classList.remove('flash-focus');\n    }, 700);\n  };\n\n  /* ---------- helpers ---------- */\n  const setField = (k, v) => setForm(prev => ({\n    ...prev,\n    [k]: v\n  }));\n  function extractCategoryIds(u) {\n    if (Array.isArray(u === null || u === void 0 ? void 0 : u.category_ids) && u.category_ids.length) {\n      return u.category_ids.map(String);\n    }\n    if (Array.isArray(u === null || u === void 0 ? void 0 : u.categories) && u.categories.length) {\n      return u.categories.map(c => {\n        var _ref2, _c$category_id;\n        return String((_ref2 = (_c$category_id = c.category_id) !== null && _c$category_id !== void 0 ? _c$category_id : c.id) !== null && _ref2 !== void 0 ? _ref2 : c.code);\n      });\n    }\n    if (u !== null && u !== void 0 && u.category_id) return [String(u.category_id)];\n    return [];\n  }\n  const isPublishedOn = u => (u === null || u === void 0 ? void 0 : u.is_visible) !== false && (u === null || u === void 0 ? void 0 : u.is_active) !== false && (u === null || u === void 0 ? void 0 : u.is_published) !== false;\n\n  /* ---------- load categories + units ---------- */\n  async function loadAll() {\n    setLoading(true);\n    try {\n      // categories (published อย่างเดียว)\n      const catRes = await fetch('/api/categories?published=1', {\n        credentials: 'include'\n      });\n      const catJson = await catRes.json();\n      const cats = (Array.isArray(catJson) ? catJson : []).map(c => {\n        var _ref3, _c$category_id2, _ref4, _c$category_id3, _c$category_name;\n        return {\n          value: String((_ref3 = (_c$category_id2 = c.category_id) !== null && _c$category_id2 !== void 0 ? _c$category_id2 : c.id) !== null && _ref3 !== void 0 ? _ref3 : c.code),\n          label: `${(_ref4 = (_c$category_id3 = c.category_id) !== null && _c$category_id3 !== void 0 ? _c$category_id3 : c.id) !== null && _ref4 !== void 0 ? _ref4 : c.code} — ${(_c$category_name = c.category_name) !== null && _c$category_name !== void 0 ? _c$category_name : c.name}`\n        };\n      });\n      setCategories(cats);\n\n      // units (admin list — alias ไป handler เดียวกับ /api/units)\n      const data = await listUnits({\n        only_visible: onlyVisible ? 1 : undefined\n      });\n      setUnits(Array.isArray(data) ? data : []);\n    } catch (e) {\n      console.error(e);\n      alert('โหลดข้อมูลไม่สำเร็จ');\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function refreshUnits() {\n    try {\n      const data = await listUnits({\n        only_visible: onlyVisible ? 1 : undefined\n      });\n      setUnits(Array.isArray(data) ? data : []);\n    } catch (e) {\n      console.error(e);\n      alert('โหลดรายการหน่วยไม่สำเร็จ');\n    }\n  }\n  useEffect(() => {\n    loadAll();\n  }, []);\n  useEffect(() => {\n    refreshUnits();\n  }, [onlyVisible]); // เปลี่ยน filter แล้วโหลดใหม่\n\n  const rows = useMemo(() => {\n    const q = asStr(filter).toLowerCase();\n    return (units || []).filter(u => !q || asStr(u.code).toLowerCase().includes(q) || asStr(u.unit_name).toLowerCase().includes(q) || asStr(u.description).toLowerCase().includes(q));\n  }, [units, filter]);\n  function startCreate() {\n    setEditing(null);\n    setForm({\n      code: '',\n      unit_name: '',\n      description: '',\n      category_ids: []\n    });\n    setTimeout(focusForm, 0);\n  }\n  function startEdit(u) {\n    setEditing(u);\n    setForm({\n      code: asStr(u.code),\n      unit_name: asStr(u.unit_name),\n      description: asStr(u.description),\n      category_ids: extractCategoryIds(u)\n    });\n    setTimeout(focusForm, 0);\n  }\n  async function doSubmit(e) {\n    var _e$preventDefault;\n    e === null || e === void 0 ? void 0 : (_e$preventDefault = e.preventDefault) === null || _e$preventDefault === void 0 ? void 0 : _e$preventDefault.call(e);\n    const ids = uniq(toArr(form.category_ids).map(String));\n    const codeLower = asStr(form.code).toLowerCase();\n    const payload = {\n      code: codeLower,\n      unit_name: asStr(form.unit_name),\n      description: asStr(form.description) || null,\n      // backend รองรับทั้ง category_id/ids ถ้ามีคอลัมน์\n      category_id: ids.length ? ids[0] : null,\n      category_ids: ids\n    };\n    if (!payload.code || !payload.unit_name) {\n      alert('กรอก code และ unit name ให้ครบ');\n      return;\n    }\n    setLoading(true);\n    try {\n      if (editing !== null && editing !== void 0 && editing.code) {\n        await updateUnitAPI(editing.code, payload);\n      } else {\n        await createUnitAPI(payload);\n      }\n      await refreshUnits();\n      setEditing(null);\n      setForm({\n        code: '',\n        unit_name: '',\n        description: '',\n        category_ids: []\n      });\n    } catch (e2) {\n      var _e2$response, _e2$response$data, _e2$response2, _e2$response2$data;\n      console.error(e2);\n      const msg = (e2 === null || e2 === void 0 ? void 0 : (_e2$response = e2.response) === null || _e2$response === void 0 ? void 0 : (_e2$response$data = _e2$response.data) === null || _e2$response$data === void 0 ? void 0 : _e2$response$data.message) || (e2 === null || e2 === void 0 ? void 0 : (_e2$response2 = e2.response) === null || _e2$response2 === void 0 ? void 0 : (_e2$response2$data = _e2$response2.data) === null || _e2$response2$data === void 0 ? void 0 : _e2$response2$data.error) || 'บันทึกไม่สำเร็จ';\n      alert(msg);\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function onDelete(row) {\n    const key = unitKey(row);\n    if (!key) return alert('ไม่พบรหัสหน่วยที่จะลบ');\n    if (!window.confirm(`ลบหน่วย ${row.code || row.unit_name}?`)) return;\n    setLoading(true);\n    try {\n      await deleteUnitAPI(key);\n      await refreshUnits();\n    } catch (e) {\n      var _e$response, _e$response$data, _e$response2, _e$response2$data;\n      console.error(e);\n      alert((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || (e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.error) || 'ลบไม่สำเร็จ');\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function onTogglePublish(row) {\n    const key = unitKey(row);\n    if (!key) return;\n    setLoading(true);\n    try {\n      const next = !isPublishedOn(row);\n      await updateUnitAPI(key, {\n        is_published: next\n      });\n      await refreshUnits();\n    } catch (e) {\n      var _e$response3, _e$response3$data, _e$response4, _e$response4$data;\n      console.error(e);\n      alert((e === null || e === void 0 ? void 0 : (_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : _e$response3$data.message) || (e === null || e === void 0 ? void 0 : (_e$response4 = e.response) === null || _e$response4 === void 0 ? void 0 : (_e$response4$data = _e$response4.data) === null || _e$response4$data === void 0 ? void 0 : _e$response4$data.error) || 'อัปเดตสถานะเผยแพร่ไม่สำเร็จ');\n    } finally {\n      setLoading(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page page-wide\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-head\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/admin\",\n          children: \"\\u2190 \\u0E01\\u0E25\\u0E31\\u0E1A\\u0E44\\u0E1B\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 (\\u0E08\\u0E32\\u0E01\\u0E10\\u0E32\\u0E19\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      style: {\n        marginBottom: 12,\n        padding: 12\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"toolbar\",\n        style: {\n          display: 'flex',\n          gap: 8,\n          alignItems: 'center',\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"search\",\n          placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32: code / unit_name / description\",\n          value: filter,\n          onChange: e => setFilter(e.target.value),\n          style: {\n            flex: 1,\n            minWidth: 240\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"chk\",\n          style: {\n            display: 'flex',\n            gap: 6,\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: onlyVisible,\n            onChange: e => setOnlyVisible(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this), \"\\u0E40\\u0E09\\u0E1E\\u0E32\\u0E30\\u0E17\\u0E35\\u0E48\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E1C\\u0E25 (visible)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: refreshUnits,\n          disabled: loading,\n          children: \"\\u0E23\\u0E35\\u0E40\\u0E1F\\u0E23\\u0E0A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary\",\n          onClick: startCreate,\n          disabled: loading,\n          children: \"+ \\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      ref: formWrapRef,\n      className: \"card unit-form-card\",\n      onSubmit: doSubmit,\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"code (\\u0E40\\u0E0A\\u0E48\\u0E19: piece, pot) [a-z]\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: form.code,\n          onChange: e => setField('code', e.target.value),\n          placeholder: \"\\u0E40\\u0E0A\\u0E48\\u0E19 pot, bag, kg\",\n          disabled: !!(editing !== null && editing !== void 0 && editing.code) /* กำลังแก้ไข ห้ามแก้ code เพื่อลดปัญหา duplicate */\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"unit name (\\u0E40\\u0E0A\\u0E48\\u0E19: \\u0E0A\\u0E34\\u0E49\\u0E19, \\u0E01\\u0E23\\u0E30\\u0E16\\u0E32\\u0E07)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: unitNameInputRef,\n          value: form.unit_name,\n          onChange: e => setField('unit_name', e.target.value),\n          placeholder: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0E2B\\u0E21\\u0E27\\u0E14 (\\u0E01\\u0E14\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E44\\u0E14\\u0E49\\u0E2B\\u0E25\\u0E32\\u0E22\\u0E04\\u0E48\\u0E32)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MultiToggle, {\n          options: categories,\n          value: form.category_ids,\n          onChange: ids => setField('category_ids', ids)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"hint\",\n          children: \"\\u0E01\\u0E14\\u0E1B\\u0E38\\u0E48\\u0E21\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01/\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01 (\\u0E2B\\u0E25\\u0E32\\u0E22\\u0E04\\u0E48\\u0E32\\u0E44\\u0E14\\u0E49)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"description (\\u0E16\\u0E49\\u0E32\\u0E21\\u0E35)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: form.description,\n          onChange: e => setField('description', e.target.value),\n          placeholder: \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21\",\n          rows: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn-primary\",\n          disabled: loading,\n          children: editing ? 'บันทึกการแก้ไข' : 'เพิ่มหน่วยสินค้า'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this), editing && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-secondary\",\n          onClick: () => {\n            setEditing(null);\n            setForm({\n              code: '',\n              unit_name: '',\n              description: '',\n              category_ids: []\n            });\n          },\n          disabled: loading,\n          children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table card\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-scroll\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"tbl-units\",\n          children: [/*#__PURE__*/_jsxDEV(\"colgroup\", {\n            children: [/*#__PURE__*/_jsxDEV(\"col\", {\n              style: {\n                width: '22%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n              style: {\n                width: '30%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n              style: {\n                width: '18%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n              style: {\n                width: '12%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n              style: {\n                width: '18%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"txt-left\",\n                children: \"code\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"txt-left\",\n                children: \"unit_name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"txt-left\",\n                children: \"category_ids\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"txt-left\",\n                children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"txt-right\",\n                children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [rows.map(u => {\n              const ids = extractCategoryIds(u);\n              const on = isPublishedOn(u);\n              const key = unitKey(u);\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"mono\",\n                  children: u.code || '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"wrap\",\n                  children: u.unit_name || '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: ids.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"badges\",\n                    children: ids.map(id => /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"badge\",\n                      children: id\n                    }, id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 375,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 373,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"muted\",\n                    children: \"-\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: on ? 'badge on' : 'badge off',\n                    children: on ? 'เผยแพร่' : 'ถูกซ่อน'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 381,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"actions-cell\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-chip\",\n                    onClick: () => startEdit(u),\n                    children: \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 386,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-chip danger\",\n                    onClick: () => onDelete(u),\n                    children: \"\\u0E25\\u0E1A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 387,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: on ? 'btn-chip muted' : 'btn-chip primary',\n                    onClick: () => onTogglePublish(u),\n                    children: on ? 'ซ่อน' : 'เผยแพร่'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 388,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 21\n                }, this)]\n              }, key || u.code, true, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 19\n              }, this);\n            }), !rows.length && /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: 5,\n                className: \"muted\",\n                style: {\n                  textAlign: 'center',\n                  padding: 24\n                },\n                children: \"\\u0E44\\u0E21\\u0E48\\u0E1E\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminUnits, \"QQ+xOx5oLVx+nHjbS/DjtX1m82E=\");\n_c2 = AdminUnits;\nvar _c, _c2;\n$RefreshReg$(_c, \"MultiToggle\");\n$RefreshReg$(_c2, \"AdminUnits\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","Link","jsxDEV","_jsxDEV","asStr","v","undefined","String","trim","toArr","x","Array","isArray","uniq","xs","from","Set","MultiToggle","options","value","onChange","set","map","toggle","id","next","key","has","delete","add","className","children","opt","active","type","onClick","title","label","fileName","_jsxFileName","lineNumber","columnNumber","_c","httpJSON","method","url","body","res","fetch","headers","credentials","JSON","stringify","ok","err","json","catch","status","response","data","listUnits","params","qs","URLSearchParams","only_visible","toString","createUnitAPI","payload","updateUnitAPI","codeOrId","encodeURIComponent","deleteUnitAPI","unitKey","u","_u$code","_ref","_u$unit_id","code","unit_id","AdminUnits","_s","loading","setLoading","categories","setCategories","units","setUnits","filter","setFilter","onlyVisible","setOnlyVisible","form","setForm","unit_name","description","category_ids","editing","setEditing","formWrapRef","unitNameInputRef","focusForm","_unitNameInputRef$cur","_formWrapRef$current","target","current","scrollIntoView","behavior","block","focus","preventScroll","classList","setTimeout","_formWrapRef$current2","remove","setField","k","prev","extractCategoryIds","length","c","_ref2","_c$category_id","category_id","isPublishedOn","is_visible","is_active","is_published","loadAll","catRes","catJson","cats","_ref3","_c$category_id2","_ref4","_c$category_id3","_c$category_name","category_name","name","e","console","error","alert","refreshUnits","rows","q","toLowerCase","includes","startCreate","startEdit","doSubmit","_e$preventDefault","preventDefault","call","ids","codeLower","e2","_e2$response","_e2$response$data","_e2$response2","_e2$response2$data","msg","message","onDelete","row","window","confirm","_e$response","_e$response$data","_e$response2","_e$response2$data","onTogglePublish","_e$response3","_e$response3$data","_e$response4","_e$response4$data","to","style","marginBottom","padding","display","gap","alignItems","flexWrap","placeholder","flex","minWidth","checked","disabled","ref","onSubmit","autoComplete","width","on","colSpan","textAlign","_c2","$RefreshReg$"],"sources":["D:/project19/frontend/src/admin/AdminUnits.js"],"sourcesContent":["// src/admin/AdminUnits.js\r\n// ✅ หน่วยสินค้า (product_units) — ฝั่งแอดมิน\r\n// Endpoints ใช้จริงตอนนี้:\r\n//   GET    /api/admin/units[?only_visible=1]\r\n//   POST   /api/admin/units\r\n//   PUT    /api/admin/units/:code       // :code รองรับเลข id ได้\r\n//   DELETE /api/admin/units/:code\r\n\r\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './admin-units.css';\r\n\r\nconst asStr = (v) => (v === null || v === undefined) ? '' : String(v).trim();\r\nconst toArr = (x) => Array.isArray(x) ? x : (x ? [x] : []);\r\nconst uniq = (xs) => Array.from(new Set(xs));\r\n\r\n/* ---------- Toggle Button Group (multi) ---------- */\r\nfunction MultiToggle({ options, value = [], onChange }) {\r\n  const set = new Set((value || []).map(String));\r\n  const toggle = (id) => {\r\n    const next = new Set(set);\r\n    const key = String(id);\r\n    next.has(key) ? next.delete(key) : next.add(key);\r\n    onChange(Array.from(next));\r\n  };\r\n  return (\r\n    <div className=\"mu-wrap\">\r\n      {options.map(opt => {\r\n        const id = String(opt.value);\r\n        const active = set.has(id);\r\n        return (\r\n          <button\r\n            type=\"button\"\r\n            key={id}\r\n            className={`mu-chip ${active ? 'is-active' : ''}`}\r\n            onClick={() => toggle(id)}\r\n            aria-pressed={active}\r\n            title={opt.label}\r\n          >\r\n            {opt.label}\r\n          </button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ---------- API helpers (ใช้ fetch โดยตรง) ---------- */\r\nasync function httpJSON(method, url, body) {\r\n  const res = await fetch(url, {\r\n    method,\r\n    headers: { 'Content-Type': 'application/json' },\r\n    credentials: 'include',\r\n    body: body ? JSON.stringify(body) : undefined,\r\n  });\r\n  if (!res.ok) {\r\n    const err = await res.json().catch(() => ({}));\r\n    throw { status: res.status, response: { data: err } };\r\n  }\r\n  return res.json().catch(() => ({}));\r\n}\r\nconst listUnits = async (params = {}) => {\r\n  const qs = new URLSearchParams();\r\n  if (params.only_visible) qs.set('only_visible', '1');\r\n  const url = `/api/admin/units${qs.toString() ? `?${qs}` : ''}`;\r\n  return httpJSON('GET', url);\r\n};\r\nconst createUnitAPI = (payload) => httpJSON('POST', '/api/admin/units', payload);\r\nconst updateUnitAPI = (codeOrId, payload) => httpJSON('PUT', `/api/admin/units/${encodeURIComponent(codeOrId)}`, payload);\r\nconst deleteUnitAPI = (codeOrId) => httpJSON('DELETE', `/api/admin/units/${encodeURIComponent(codeOrId)}`);\r\n\r\n/* หาคีย์สำหรับ row (code เป็นหลัก, ถ้าไม่มีค่อยใช้ unit_id/id) */\r\nconst unitKey = (u) => u?.code ?? (u?.unit_id ?? u?.id ?? '');\r\n\r\nexport default function AdminUnits() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [categories, setCategories] = useState([]); // [{value,label}]\r\n  const [units, setUnits] = useState([]);\r\n  const [filter, setFilter] = useState('');\r\n  const [onlyVisible, setOnlyVisible] = useState(false);\r\n\r\n  const [form, setForm] = useState({\r\n    code: '',\r\n    unit_name: '',\r\n    description: '',\r\n    category_ids: [], // array of TEXT ids\r\n  });\r\n  const [editing, setEditing] = useState(null); // เก็บแถวที่กำลังแก้ไข (ใช้ code เป็นหลัก)\r\n\r\n  // ====== focus helpers ======\r\n  const formWrapRef = useRef(null);\r\n  const unitNameInputRef = useRef(null);\r\n  const focusForm = () => {\r\n    const target = unitNameInputRef.current || formWrapRef.current;\r\n    if (!target) return;\r\n    target.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n    unitNameInputRef.current?.focus({ preventScroll: true });\r\n    formWrapRef.current?.classList.add('flash-focus');\r\n    setTimeout(() => formWrapRef.current?.classList.remove('flash-focus'), 700);\r\n  };\r\n\r\n  /* ---------- helpers ---------- */\r\n  const setField = (k, v) => setForm(prev => ({ ...prev, [k]: v }));\r\n\r\n  function extractCategoryIds(u) {\r\n    if (Array.isArray(u?.category_ids) && u.category_ids.length) {\r\n      return u.category_ids.map(String);\r\n    }\r\n    if (Array.isArray(u?.categories) && u.categories.length) {\r\n      return u.categories.map(c => String(c.category_id ?? c.id ?? c.code));\r\n    }\r\n    if (u?.category_id) return [String(u.category_id)];\r\n    return [];\r\n  }\r\n\r\n  const isPublishedOn = (u) =>\r\n    (u?.is_visible !== false) && (u?.is_active !== false) && (u?.is_published !== false);\r\n\r\n  /* ---------- load categories + units ---------- */\r\n  async function loadAll() {\r\n    setLoading(true);\r\n    try {\r\n      // categories (published อย่างเดียว)\r\n      const catRes = await fetch('/api/categories?published=1', { credentials: 'include' });\r\n      const catJson = await catRes.json();\r\n      const cats = (Array.isArray(catJson) ? catJson : []).map(c => ({\r\n        value: String(c.category_id ?? c.id ?? c.code),\r\n        label: `${c.category_id ?? c.id ?? c.code} — ${c.category_name ?? c.name}`,\r\n      }));\r\n      setCategories(cats);\r\n\r\n      // units (admin list — alias ไป handler เดียวกับ /api/units)\r\n      const data = await listUnits({ only_visible: onlyVisible ? 1 : undefined });\r\n      setUnits(Array.isArray(data) ? data : []);\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert('โหลดข้อมูลไม่สำเร็จ');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function refreshUnits() {\r\n    try {\r\n      const data = await listUnits({ only_visible: onlyVisible ? 1 : undefined });\r\n      setUnits(Array.isArray(data) ? data : []);\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert('โหลดรายการหน่วยไม่สำเร็จ');\r\n    }\r\n  }\r\n\r\n  useEffect(() => { loadAll(); }, []);\r\n  useEffect(() => { refreshUnits(); }, [onlyVisible]); // เปลี่ยน filter แล้วโหลดใหม่\r\n\r\n  const rows = useMemo(() => {\r\n    const q = asStr(filter).toLowerCase();\r\n    return (units || []).filter(u =>\r\n      !q ||\r\n      asStr(u.code).toLowerCase().includes(q) ||\r\n      asStr(u.unit_name).toLowerCase().includes(q) ||\r\n      asStr(u.description).toLowerCase().includes(q)\r\n    );\r\n  }, [units, filter]);\r\n\r\n  function startCreate() {\r\n    setEditing(null);\r\n    setForm({ code: '', unit_name: '', description: '', category_ids: [] });\r\n    setTimeout(focusForm, 0);\r\n  }\r\n\r\n  function startEdit(u) {\r\n    setEditing(u);\r\n    setForm({\r\n      code: asStr(u.code),\r\n      unit_name: asStr(u.unit_name),\r\n      description: asStr(u.description),\r\n      category_ids: extractCategoryIds(u),\r\n    });\r\n    setTimeout(focusForm, 0);\r\n  }\r\n\r\n  async function doSubmit(e) {\r\n    e?.preventDefault?.();\r\n    const ids = uniq(toArr(form.category_ids).map(String));\r\n    const codeLower = asStr(form.code).toLowerCase();\r\n\r\n    const payload = {\r\n      code: codeLower,\r\n      unit_name: asStr(form.unit_name),\r\n      description: asStr(form.description) || null,\r\n      // backend รองรับทั้ง category_id/ids ถ้ามีคอลัมน์\r\n      category_id: ids.length ? ids[0] : null,\r\n      category_ids: ids,\r\n    };\r\n\r\n    if (!payload.code || !payload.unit_name) {\r\n      alert('กรอก code และ unit name ให้ครบ');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      if (editing?.code) {\r\n        await updateUnitAPI(editing.code, payload);\r\n      } else {\r\n        await createUnitAPI(payload);\r\n      }\r\n      await refreshUnits();\r\n      setEditing(null);\r\n      setForm({ code: '', unit_name: '', description: '', category_ids: [] });\r\n    } catch (e2) {\r\n      console.error(e2);\r\n      const msg = e2?.response?.data?.message || e2?.response?.data?.error || 'บันทึกไม่สำเร็จ';\r\n      alert(msg);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function onDelete(row) {\r\n    const key = unitKey(row);\r\n    if (!key) return alert('ไม่พบรหัสหน่วยที่จะลบ');\r\n    if (!window.confirm(`ลบหน่วย ${row.code || row.unit_name}?`)) return;\r\n    setLoading(true);\r\n    try {\r\n      await deleteUnitAPI(key);\r\n      await refreshUnits();\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(e?.response?.data?.message || e?.response?.data?.error || 'ลบไม่สำเร็จ');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function onTogglePublish(row) {\r\n    const key = unitKey(row);\r\n    if (!key) return;\r\n    setLoading(true);\r\n    try {\r\n      const next = !isPublishedOn(row);\r\n      await updateUnitAPI(key, { is_published: next });\r\n      await refreshUnits();\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(e?.response?.data?.message || e?.response?.data?.error || 'อัปเดตสถานะเผยแพร่ไม่สำเร็จ');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"page page-wide\">\r\n      <div className=\"page-head\">\r\n        <p><Link to=\"/admin\">← กลับไปจัดการสินค้า</Link></p>\r\n        <h2>จัดการหน่วยสินค้า (จากฐานข้อมูล)</h2>\r\n      </div>\r\n\r\n      {/* ───────────── Toolbar ───────────── */}\r\n      <div className=\"card\" style={{ marginBottom: 12, padding: 12 }}>\r\n        <div className=\"toolbar\" style={{ display: 'flex', gap: 8, alignItems: 'center', flexWrap: 'wrap' }}>\r\n          <input\r\n            className=\"search\"\r\n            placeholder=\"ค้นหา: code / unit_name / description\"\r\n            value={filter}\r\n            onChange={(e) => setFilter(e.target.value)}\r\n            style={{ flex: 1, minWidth: 240 }}\r\n          />\r\n          <label className=\"chk\" style={{ display: 'flex', gap: 6, alignItems: 'center' }}>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={onlyVisible}\r\n              onChange={(e) => setOnlyVisible(e.target.checked)}\r\n            />\r\n            เฉพาะที่แสดงผล (visible)\r\n          </label>\r\n          <button onClick={refreshUnits} disabled={loading}>รีเฟรช</button>\r\n          <button className=\"btn-primary\" onClick={startCreate} disabled={loading}>+ เพิ่มหน่วย</button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ───────────── Form ───────────── */}\r\n      <form ref={formWrapRef} className=\"card unit-form-card\" onSubmit={doSubmit} autoComplete=\"off\">\r\n        <div className=\"form-row\">\r\n          <label>code (เช่น: piece, pot) [a-z]</label>\r\n          <input\r\n            value={form.code}\r\n            onChange={e => setField('code', e.target.value)}\r\n            placeholder=\"เช่น pot, bag, kg\"\r\n            disabled={!!editing?.code} /* กำลังแก้ไข ห้ามแก้ code เพื่อลดปัญหา duplicate */\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-row\">\r\n          <label>unit name (เช่น: ชิ้น, กระถาง)</label>\r\n          <input\r\n            ref={unitNameInputRef}\r\n            value={form.unit_name}\r\n            onChange={e => setField('unit_name', e.target.value)}\r\n            placeholder=\"ชื่อหน่วย\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-row\">\r\n          <label>หมวด (กดเลือกได้หลายค่า)</label>\r\n          <MultiToggle\r\n            options={categories}\r\n            value={form.category_ids}\r\n            onChange={(ids) => setField('category_ids', ids)}\r\n          />\r\n          <small className=\"hint\">กดปุ่มเพื่อเลือก/ยกเลิก (หลายค่าได้)</small>\r\n        </div>\r\n\r\n        <div className=\"form-row\">\r\n          <label>description (ถ้ามี)</label>\r\n          <textarea\r\n            value={form.description}\r\n            onChange={e => setField('description', e.target.value)}\r\n            placeholder=\"บันทึกเพิ่มเติม\"\r\n            rows={2}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"actions\">\r\n          <button type=\"submit\" className=\"btn-primary\" disabled={loading}>\r\n            {editing ? 'บันทึกการแก้ไข' : 'เพิ่มหน่วยสินค้า'}\r\n          </button>\r\n          {editing && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn-secondary\"\r\n              onClick={() => { setEditing(null); setForm({ code: '', unit_name: '', description: '', category_ids: [] }); }}\r\n              disabled={loading}\r\n            >\r\n              ยกเลิกแก้ไข\r\n            </button>\r\n          )}\r\n        </div>\r\n      </form>\r\n\r\n      {/* ───────────── Units Table ───────────── */}\r\n      <div className=\"table card\">\r\n        <div className=\"table-scroll\">\r\n          <table className=\"tbl-units\">\r\n            <colgroup>\r\n              <col style={{ width: '22%' }} />\r\n              <col style={{ width: '30%' }} />\r\n              <col style={{ width: '18%' }} />\r\n              <col style={{ width: '12%' }} />\r\n              <col style={{ width: '18%' }} />\r\n            </colgroup>\r\n            <thead>\r\n              <tr>\r\n                <th className=\"txt-left\">code</th>\r\n                <th className=\"txt-left\">unit_name</th>\r\n                <th className=\"txt-left\">category_ids</th>\r\n                <th className=\"txt-left\">สถานะ</th>\r\n                <th className=\"txt-right\">จัดการ</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {rows.map((u) => {\r\n                const ids = extractCategoryIds(u);\r\n                const on = isPublishedOn(u);\r\n                const key = unitKey(u);\r\n                return (\r\n                  <tr key={key || u.code}>\r\n                    <td className=\"mono\">{u.code || '-'}</td>\r\n                    <td className=\"wrap\">{u.unit_name || '-'}</td>\r\n                    <td>\r\n                      {ids.length ? (\r\n                        <div className=\"badges\">\r\n                          {ids.map((id) => (\r\n                            <span className=\"badge\" key={id}>{id}</span>\r\n                          ))}\r\n                        </div>\r\n                      ) : <span className=\"muted\">-</span>}\r\n                    </td>\r\n                    <td>\r\n                      <span className={on ? 'badge on' : 'badge off'}>\r\n                        {on ? 'เผยแพร่' : 'ถูกซ่อน'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"actions-cell\">\r\n                      <button className=\"btn-chip\" onClick={() => startEdit(u)}>แก้ไข</button>\r\n                      <button className=\"btn-chip danger\" onClick={() => onDelete(u)}>ลบ</button>\r\n                      <button className={on ? 'btn-chip muted' : 'btn-chip primary'} onClick={() => onTogglePublish(u)}>\r\n                        {on ? 'ซ่อน' : 'เผยแพร่'}\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n              {!rows.length && (\r\n                <tr>\r\n                  <td colSpan={5} className=\"muted\" style={{ textAlign: 'center', padding: 24 }}>\r\n                    ไม่พบข้อมูล\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}