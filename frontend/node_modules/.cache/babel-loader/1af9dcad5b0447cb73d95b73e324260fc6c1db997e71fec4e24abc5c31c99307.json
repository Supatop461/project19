{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\pages\\\\ProfileModal.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/pages/ProfileModal.js\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./ProfileModal.css\";\n\n/** Path แบบยืดหยุ่น: ถ้า baseURL ลงท้าย /api → ใช้ path สั้น */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst baseEndsWithApi = (axios.defaults.baseURL || \"\").replace(/\\/+$/, \"\").endsWith(\"/api\");\nconst ME_PATH = baseEndsWithApi ? \"/me\" : \"/api/me\";\nconst UPDATE_ME_PATH = baseEndsWithApi ? \"/me\" : \"/api/me\";\nconst ORDERS_PATH = baseEndsWithApi ? \"/orders/my?limit=5\" : \"/api/orders/my?limit=5\";\nconst SETTINGS_PATH = baseEndsWithApi ? \"/settings\" : \"/api/settings\";\nconst UPLOAD_AVATAR = baseEndsWithApi ? \"/uploads/avatar\" : \"/api/uploads/avatar\";\n\n/* ---------- helpers ---------- */\nconst pick = (o, keys) => {\n  for (const k of keys) {\n    const v = o && o[k];\n    if (v !== undefined && v !== null && String(v).trim() !== \"\") return v;\n  }\n  return \"\";\n};\nconst deriveEmail = u => pick(u, [\"email\", \"user_email\", \"mail\", \"username\"]);\nconst deriveFullname = u => {\n  const fromSingle = pick(u, [\"fullname\", \"full_name\", \"name\", \"display_name\"]);\n  if (fromSingle && !String(fromSingle).includes(\"@\")) return String(fromSingle).trim();\n  const first = pick(u, [\"first_name\", \"firstname\", \"given_name\", \"fname\", \"firstName\"]);\n  const last = pick(u, [\"last_name\", \"lastname\", \"family_name\", \"lname\", \"lastName\"]);\n  const joined = [first, last].filter(Boolean).join(\" \").trim();\n  if (joined && !joined.includes(\"@\")) return joined;\n\n  // ❗อย่าเอาอีเมลมาใส่ช่องชื่อ-นามสกุล\n  return \"\";\n};\nconst derivePhone = u => pick(u, [\"phone\", \"phone_number\", \"tel\", \"telephone\", \"mobile\", \"mobile_phone\"]);\nexport default function ProfileModal({\n  initialTab = \"profile\",\n  onClose\n}) {\n  _s();\n  var _form$fullname3;\n  const [tab, setTab] = useState(initialTab);\n  const [loading, setLoading] = useState(true);\n  const [status, setStatus] = useState(\"loading\"); // loading | ok | notfound | error\n\n  const [form, setForm] = useState({\n    fullname: \"\",\n    email: \"\",\n    phone: \"\",\n    avatar_url: \"\"\n  });\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      setLoading(true);\n      try {\n        var _r$data;\n        const r = await axios.get(ME_PATH);\n        const u = ((_r$data = r.data) === null || _r$data === void 0 ? void 0 : _r$data.user) || r.data || {};\n        if (!mounted) return;\n        const email = deriveEmail(u);\n        const fullname = deriveFullname(u);\n        const phone = derivePhone(u);\n        const avatar_url = pick(u, [\"avatar_url\", \"avatar\", \"photo\", \"image_url\"]);\n        setForm(p => ({\n          ...p,\n          email: email || p.email,\n          fullname: fullname,\n          // ← จะว่างถ้าไม่มีจริง (ไม่ใช่อีเมล)\n          phone: phone || \"\",\n          avatar_url: avatar_url || p.avatar_url\n        }));\n        setStatus(\"ok\");\n\n        // อัปเดตชื่อใน localStorage เฉพาะเมื่อมีชื่อจริง (ไม่ใช่อีเมล)\n        if (fullname) {\n          localStorage.setItem(\"fullname\", fullname);\n          window.dispatchEvent(new Event(\"profile:changed\"));\n        }\n        if (email) localStorage.setItem(\"email\", email);\n      } catch (e) {\n        var _e$response;\n        setStatus((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : _e$response.status) === 404 ? \"notfound\" : \"error\");\n      } finally {\n        setLoading(false);\n      }\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n  const onChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setForm(p => ({\n      ...p,\n      [name]: value\n    }));\n  };\n  const onUploadAvatar = async e => {\n    var _e$target$files, _r$data2, _r$data3, _r$data4;\n    const f = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!f) return;\n    const fd = new FormData();\n    fd.append(\"file\", f);\n    const r = await axios.post(UPLOAD_AVATAR, fd, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    });\n    const url = ((_r$data2 = r.data) === null || _r$data2 === void 0 ? void 0 : _r$data2.url) || ((_r$data3 = r.data) === null || _r$data3 === void 0 ? void 0 : _r$data3.location) || ((_r$data4 = r.data) === null || _r$data4 === void 0 ? void 0 : _r$data4.path);\n    if (url) setForm(p => ({\n      ...p,\n      avatar_url: url\n    }));\n  };\n  const onSave = async () => {\n    var _form$fullname, _form$phone, _form$fullname2;\n    await axios.put(UPDATE_ME_PATH, {\n      fullname: ((_form$fullname = form.fullname) === null || _form$fullname === void 0 ? void 0 : _form$fullname.trim()) || null,\n      phone: ((_form$phone = form.phone) === null || _form$phone === void 0 ? void 0 : _form$phone.trim()) || null,\n      avatar_url: form.avatar_url || null\n    });\n    // sync header\n    if ((_form$fullname2 = form.fullname) !== null && _form$fullname2 !== void 0 && _form$fullname2.trim()) localStorage.setItem(\"fullname\", form.fullname.trim());\n    window.dispatchEvent(new Event(\"profile:changed\"));\n    if (onClose) onClose();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: form.avatar_url || process.env.PUBLIC_URL + \"/profile.jpg\",\n            alt: \"avatar\",\n            onError: e => e.currentTarget.src = process.env.PUBLIC_URL + \"/logo.png\",\n            className: \"avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-meta\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-title\",\n              children: ((_form$fullname3 = form.fullname) === null || _form$fullname3 === void 0 ? void 0 : _form$fullname3.trim()) || form.email || \"ผู้ใช้งาน\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-sub\",\n              children: status === \"notfound\" ? \"Not found\" : status === \"error\" ? \"เกิดข้อผิดพลาด\" : form.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-btn\",\n          onClick: onClose,\n          \"aria-label\": \"close\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab ${tab === \"profile\" ? \"active\" : \"\"}`,\n          onClick: () => setTab(\"profile\"),\n          children: \"\\u0E42\\u0E1B\\u0E23\\u0E44\\u0E1F\\u0E25\\u0E4C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab ${tab === \"orders\" ? \"active\" : \"\"}`,\n          onClick: () => setTab(\"orders\"),\n          children: \"\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\\u0E02\\u0E2D\\u0E07\\u0E09\\u0E31\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab ${tab === \"addresses\" ? \"active\" : \"\"}`,\n          onClick: () => setTab(\"addresses\"),\n          children: \"\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48\\u0E02\\u0E2D\\u0E07\\u0E09\\u0E31\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab ${tab === \"settings\" ? \"active\" : \"\"}`,\n          onClick: () => setTab(\"settings\"),\n          children: \"\\u0E01\\u0E32\\u0E23\\u0E15\\u0E31\\u0E49\\u0E07\\u0E04\\u0E48\\u0E32\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), tab === \"profile\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D-\\u0E19\\u0E32\\u0E21\\u0E2A\\u0E01\\u0E38\\u0E25\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"fullname\",\n            placeholder: \"\\u0E40\\u0E0A\\u0E48\\u0E19 \\u0E28\\u0E38\\u0E20\\u0E0A\\u0E31\\u0E22 \\u0E1E\\u0E23\\u0E2B\\u0E21\\u0E2D\\u0E34\\u0E19\\u0E17\\u0E23\\u0E4C\",\n            value: form.fullname,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: form.email,\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"phone\",\n            placeholder: \"\\u0E40\\u0E0A\\u0E48\\u0E19 08x-xxx-xxxx\",\n            value: form.phone,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"\\u0E23\\u0E39\\u0E1B\\u0E42\\u0E1B\\u0E23\\u0E44\\u0E1F\\u0E25\\u0E4C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: form.avatar_url || process.env.PUBLIC_URL + \"/profile.jpg\",\n              alt: \"preview\",\n              className: \"avatar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \".jpg,.jpeg,.png,.webp\",\n              onChange: onUploadAvatar\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"actions\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            onClick: onSave,\n            disabled: loading,\n            children: \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E42\\u0E1B\\u0E23\\u0E44\\u0E1F\\u0E25\\u0E4C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this), tab === \"orders\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-body\",\n        children: /*#__PURE__*/_jsxDEV(OrdersLite, {\n          path: ORDERS_PATH\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this), tab === \"addresses\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-body\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"muted\",\n          children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E1E\\u0E31\\u0E12\\u0E19\\u0E32 (\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }, this), tab === \"settings\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-body\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"muted\",\n          children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E1E\\u0E31\\u0E12\\u0E19\\u0E32 (\\u0E01\\u0E32\\u0E23\\u0E15\\u0E31\\u0E49\\u0E07\\u0E04\\u0E48\\u0E32)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n}\n\n/* ===== ย่อ: รายการคำสั่งซื้อ 5 รายการล่าสุด (ไม่แตะโค้ดส่วนอื่นก็ได้) ===== */\n_s(ProfileModal, \"p7Tkb8JkfdQ8hvBstsu4pw42t58=\");\n_c = ProfileModal;\nfunction OrdersLite({\n  path\n}) {\n  _s2();\n  const [items, setItems] = useState([]);\n  useEffect(() => {\n    (async () => {\n      try {\n        var _r$data5;\n        const r = await axios.get(path);\n        const arr = ((_r$data5 = r.data) === null || _r$data5 === void 0 ? void 0 : _r$data5.items) || r.data || [];\n        setItems(Array.isArray(arr) ? arr : []);\n      } catch {\n        setItems([]);\n      }\n    })();\n  }, [path]);\n  if (!items.length) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"muted\",\n    children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 29\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: \"order-list\",\n    children: items.slice(0, 5).map(o => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: [\"#\", o.id, \" \\u2014 \", o.status, \" \\u2014 \", o.total ? `${o.total}฿` : \"\"]\n    }, o.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, this);\n}\n_s2(OrdersLite, \"E85yb7BhBnl3/OpymRdjFiQJ97s=\");\n_c2 = OrdersLite;\nvar _c, _c2;\n$RefreshReg$(_c, \"ProfileModal\");\n$RefreshReg$(_c2, \"OrdersLite\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","baseEndsWithApi","defaults","baseURL","replace","endsWith","ME_PATH","UPDATE_ME_PATH","ORDERS_PATH","SETTINGS_PATH","UPLOAD_AVATAR","pick","o","keys","k","v","undefined","String","trim","deriveEmail","u","deriveFullname","fromSingle","includes","first","last","joined","filter","Boolean","join","derivePhone","ProfileModal","initialTab","onClose","_s","_form$fullname3","tab","setTab","loading","setLoading","status","setStatus","form","setForm","fullname","email","phone","avatar_url","mounted","_r$data","r","get","data","user","p","localStorage","setItem","window","dispatchEvent","Event","e","_e$response","response","onChange","name","value","target","onUploadAvatar","_e$target$files","_r$data2","_r$data3","_r$data4","f","files","fd","FormData","append","post","headers","url","location","path","onSave","_form$fullname","_form$phone","_form$fullname2","put","className","children","src","process","env","PUBLIC_URL","alt","onError","currentTarget","fileName","_jsxFileName","lineNumber","columnNumber","onClick","placeholder","disabled","type","accept","OrdersLite","_c","_s2","items","setItems","_r$data5","arr","Array","isArray","length","slice","map","id","total","_c2","$RefreshReg$"],"sources":["D:/project19/frontend/src/pages/ProfileModal.js"],"sourcesContent":["// src/pages/ProfileModal.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./ProfileModal.css\";\r\n\r\n/** Path แบบยืดหยุ่น: ถ้า baseURL ลงท้าย /api → ใช้ path สั้น */\r\nconst baseEndsWithApi = (axios.defaults.baseURL || \"\").replace(/\\/+$/, \"\").endsWith(\"/api\");\r\nconst ME_PATH        = baseEndsWithApi ? \"/me\"               : \"/api/me\";\r\nconst UPDATE_ME_PATH = baseEndsWithApi ? \"/me\"               : \"/api/me\";\r\nconst ORDERS_PATH    = baseEndsWithApi ? \"/orders/my?limit=5\": \"/api/orders/my?limit=5\";\r\nconst SETTINGS_PATH  = baseEndsWithApi ? \"/settings\"         : \"/api/settings\";\r\nconst UPLOAD_AVATAR  = baseEndsWithApi ? \"/uploads/avatar\"   : \"/api/uploads/avatar\";\r\n\r\n/* ---------- helpers ---------- */\r\nconst pick = (o, keys) => {\r\n  for (const k of keys) {\r\n    const v = o && o[k];\r\n    if (v !== undefined && v !== null && String(v).trim() !== \"\") return v;\r\n  }\r\n  return \"\";\r\n};\r\nconst deriveEmail = (u) =>\r\n  pick(u, [\"email\", \"user_email\", \"mail\", \"username\"]);\r\n\r\nconst deriveFullname = (u) => {\r\n  const fromSingle = pick(u, [\"fullname\", \"full_name\", \"name\", \"display_name\"]);\r\n  if (fromSingle && !String(fromSingle).includes(\"@\")) return String(fromSingle).trim();\r\n\r\n  const first = pick(u, [\"first_name\", \"firstname\", \"given_name\", \"fname\", \"firstName\"]);\r\n  const last  = pick(u, [\"last_name\", \"lastname\", \"family_name\", \"lname\", \"lastName\"]);\r\n  const joined = [first, last].filter(Boolean).join(\" \").trim();\r\n  if (joined && !joined.includes(\"@\")) return joined;\r\n\r\n  // ❗อย่าเอาอีเมลมาใส่ช่องชื่อ-นามสกุล\r\n  return \"\";\r\n};\r\n\r\nconst derivePhone = (u) =>\r\n  pick(u, [\"phone\", \"phone_number\", \"tel\", \"telephone\", \"mobile\", \"mobile_phone\"]);\r\n\r\nexport default function ProfileModal({ initialTab = \"profile\", onClose }) {\r\n  const [tab, setTab] = useState(initialTab);\r\n  const [loading, setLoading] = useState(true);\r\n  const [status, setStatus] = useState(\"loading\"); // loading | ok | notfound | error\r\n\r\n  const [form, setForm] = useState({\r\n    fullname: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    avatar_url: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const r = await axios.get(ME_PATH);\r\n        const u = r.data?.user || r.data || {};\r\n        if (!mounted) return;\r\n\r\n        const email = deriveEmail(u);\r\n        const fullname = deriveFullname(u);\r\n        const phone = derivePhone(u);\r\n        const avatar_url = pick(u, [\"avatar_url\", \"avatar\", \"photo\", \"image_url\"]);\r\n\r\n        setForm((p) => ({\r\n          ...p,\r\n          email: email || p.email,\r\n          fullname: fullname,            // ← จะว่างถ้าไม่มีจริง (ไม่ใช่อีเมล)\r\n          phone: phone || \"\",\r\n          avatar_url: avatar_url || p.avatar_url,\r\n        }));\r\n        setStatus(\"ok\");\r\n\r\n        // อัปเดตชื่อใน localStorage เฉพาะเมื่อมีชื่อจริง (ไม่ใช่อีเมล)\r\n        if (fullname) {\r\n          localStorage.setItem(\"fullname\", fullname);\r\n          window.dispatchEvent(new Event(\"profile:changed\"));\r\n        }\r\n        if (email) localStorage.setItem(\"email\", email);\r\n      } catch (e) {\r\n        setStatus(e?.response?.status === 404 ? \"notfound\" : \"error\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  const onChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setForm((p) => ({ ...p, [name]: value }));\r\n  };\r\n\r\n  const onUploadAvatar = async (e) => {\r\n    const f = e.target.files?.[0];\r\n    if (!f) return;\r\n    const fd = new FormData();\r\n    fd.append(\"file\", f);\r\n    const r = await axios.post(UPLOAD_AVATAR, fd, {\r\n      headers: { \"Content-Type\": \"multipart/form-data\" },\r\n    });\r\n    const url = r.data?.url || r.data?.location || r.data?.path;\r\n    if (url) setForm((p) => ({ ...p, avatar_url: url }));\r\n  };\r\n\r\n  const onSave = async () => {\r\n    await axios.put(UPDATE_ME_PATH, {\r\n      fullname: form.fullname?.trim() || null,\r\n      phone: form.phone?.trim() || null,\r\n      avatar_url: form.avatar_url || null,\r\n    });\r\n    // sync header\r\n    if (form.fullname?.trim()) localStorage.setItem(\"fullname\", form.fullname.trim());\r\n    window.dispatchEvent(new Event(\"profile:changed\"));\r\n    if (onClose) onClose();\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"modal-card\">\r\n        <div className=\"modal-header\">\r\n          <div className=\"user-head\">\r\n            <img\r\n              src={form.avatar_url || (process.env.PUBLIC_URL + \"/profile.jpg\")}\r\n              alt=\"avatar\"\r\n              onError={(e) => (e.currentTarget.src = process.env.PUBLIC_URL + \"/logo.png\")}\r\n              className=\"avatar\"\r\n            />\r\n            <div className=\"user-meta\">\r\n              <div className=\"user-title\">\r\n                {form.fullname?.trim() || form.email || \"ผู้ใช้งาน\"}\r\n              </div>\r\n              <div className=\"user-sub\">\r\n                {status === \"notfound\" ? \"Not found\" :\r\n                 status === \"error\" ? \"เกิดข้อผิดพลาด\" :\r\n                 form.email}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <button className=\"icon-btn\" onClick={onClose} aria-label=\"close\">✕</button>\r\n        </div>\r\n\r\n        <div className=\"tabs\">\r\n          <button className={`tab ${tab === \"profile\" ? \"active\" : \"\"}`} onClick={() => setTab(\"profile\")}>โปรไฟล์</button>\r\n          <button className={`tab ${tab === \"orders\"  ? \"active\" : \"\"}`} onClick={() => setTab(\"orders\")}>คำสั่งซื้อของฉัน</button>\r\n          <button className={`tab ${tab === \"addresses\" ? \"active\" : \"\"}`} onClick={() => setTab(\"addresses\")}>ที่อยู่ของฉัน</button>\r\n          <button className={`tab ${tab === \"settings\" ? \"active\" : \"\"}`} onClick={() => setTab(\"settings\")}>การตั้งค่า</button>\r\n        </div>\r\n\r\n        {tab === \"profile\" && (\r\n          <div className=\"panel-body\">\r\n            <label className=\"field\">\r\n              <span className=\"label\">ชื่อ-นามสกุล</span>\r\n              <input\r\n                name=\"fullname\"\r\n                placeholder=\"เช่น ศุภชัย พรหมอินทร์\"\r\n                value={form.fullname}\r\n                onChange={onChange}\r\n              />\r\n            </label>\r\n\r\n            <label className=\"field\">\r\n              <span className=\"label\">อีเมล</span>\r\n              <input value={form.email} disabled />\r\n            </label>\r\n\r\n            <label className=\"field\">\r\n              <span className=\"label\">เบอร์โทร</span>\r\n              <input\r\n                name=\"phone\"\r\n                placeholder=\"เช่น 08x-xxx-xxxx\"\r\n                value={form.phone}\r\n                onChange={onChange}\r\n              />\r\n            </label>\r\n\r\n            <div className=\"field\">\r\n              <span className=\"label\">รูปโปรไฟล์</span>\r\n              <div className=\"row\">\r\n                <img\r\n                  src={form.avatar_url || (process.env.PUBLIC_URL + \"/profile.jpg\")}\r\n                  alt=\"preview\"\r\n                  className=\"avatar\"\r\n                />\r\n                <input type=\"file\" accept=\".jpg,.jpeg,.png,.webp\" onChange={onUploadAvatar} />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"actions\">\r\n              <button className=\"btn\" onClick={onSave} disabled={loading}>บันทึกโปรไฟล์</button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {tab === \"orders\" && (\r\n          <div className=\"panel-body\">\r\n            {/* ตัวอย่างโหลดออร์เดอร์ย่อๆ */}\r\n            <OrdersLite path={ORDERS_PATH} />\r\n          </div>\r\n        )}\r\n\r\n        {tab === \"addresses\" && (\r\n          <div className=\"panel-body\">\r\n            <div className=\"muted\">กำลังพัฒนา (ที่อยู่)</div>\r\n          </div>\r\n        )}\r\n\r\n        {tab === \"settings\" && (\r\n          <div className=\"panel-body\">\r\n            <div className=\"muted\">กำลังพัฒนา (การตั้งค่า)</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ===== ย่อ: รายการคำสั่งซื้อ 5 รายการล่าสุด (ไม่แตะโค้ดส่วนอื่นก็ได้) ===== */\r\nfunction OrdersLite({ path }) {\r\n  const [items, setItems] = useState([]);\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const r = await axios.get(path);\r\n        const arr = r.data?.items || r.data || [];\r\n        setItems(Array.isArray(arr) ? arr : []);\r\n      } catch {\r\n        setItems([]);\r\n      }\r\n    })();\r\n  }, [path]);\r\n  if (!items.length) return <div className=\"muted\">ยังไม่มีคำสั่งซื้อ</div>;\r\n  return (\r\n    <ul className=\"order-list\">\r\n      {items.slice(0, 5).map((o) => (\r\n        <li key={o.id}>\r\n          #{o.id} — {o.status} — {o.total ? `${o.total}฿` : \"\"}\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}