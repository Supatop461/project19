{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\admin\\\\ProductManagement.js\",\n  _s = $RefreshSig$();\n// frontend/src/admin/ProductManagement.js\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport './ProductManagement.css';\nimport { api, path } from '../lib/api';\nimport { useLookups } from '../lib/lookups';\n\n/* ---------- Helpers ---------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst asStr = v => v === null || v === undefined ? '' : String(v);\nconst pickStatusName = x => {\n  var _ref, _ref2, _x$status_name;\n  return (_ref = (_ref2 = (_x$status_name = x === null || x === void 0 ? void 0 : x.status_name) !== null && _x$status_name !== void 0 ? _x$status_name : x === null || x === void 0 ? void 0 : x.StatusName) !== null && _ref2 !== void 0 ? _ref2 : x === null || x === void 0 ? void 0 : x.name) !== null && _ref !== void 0 ? _ref : '';\n};\nconst toNum = v => {\n  if (v === null || v === undefined) return null;\n  const n = Number(String(v).replace(/[,\\s฿]/g, ''));\n  return Number.isFinite(n) ? n : null;\n};\n\n/* ---------- map \"name or id\" -> numeric id from lookups ---------- */\nconst coerceId = (val, list, idKeys, nameKeys) => {\n  const normalizeDigits = s => asStr(s).replace(/[๐-๙]/g, d => '๐๑๒๓๔๕๖๗๘๙'.indexOf(d));\n  const norm = s => normalizeDigits(asStr(s)).trim().toLowerCase();\n  const raw = norm(val);\n  if (!raw) return null;\n  if (/^\\d+$/.test(raw)) return Number(raw); // already numeric\n\n  const arr = Array.isArray(list) ? list : [];\n  const getId = obj => {\n    for (const k of idKeys) {\n      if ((obj === null || obj === void 0 ? void 0 : obj[k]) != null && /^\\d+$/.test(String(obj[k]))) return Number(obj[k]);\n    }\n    return null;\n  };\n  const hasName = obj => nameKeys.some(k => norm(obj === null || obj === void 0 ? void 0 : obj[k]) === raw);\n  const found = arr.find(hasName);\n  return found ? getId(found) : null;\n};\nexport default function ProductManagement() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [statuses, setStatuses] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showArchived, setShowArchived] = useState(false);\n  const [visibilityFilter, setVisibilityFilter] = useState('all');\n  const {\n    data: lookups,\n    loading: lkLoading,\n    error: lkError,\n    reload: reloadLookups\n  } = useLookups({\n    published: true\n  });\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [previews, setPreviews] = useState([]);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editProductId, setEditProductId] = useState(null);\n  const [form, setForm] = useState({\n    product_name: '',\n    description: '',\n    selling_price: '',\n    category_id: '',\n    subcategory_id: '',\n    product_unit_id: '',\n    size_value: '',\n    size_unit_id: '',\n    origin: '',\n    product_status_id: ''\n  });\n  const catRef = useRef(null);\n\n  /* ---------- API helpers ---------- */\n  const handleApiError = (err, fallback = 'เกิดข้อผิดพลาด') => {\n    var _err$response, _err$response2, _err$response2$data, _err$response3, _err$response3$data;\n    console.error(fallback, (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || (err === null || err === void 0 ? void 0 : err.message) || err);\n    alert((err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || (err === null || err === void 0 ? void 0 : (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || (err === null || err === void 0 ? void 0 : err.message) || fallback);\n  };\n  const fetchProducts = useCallback(async () => {\n    try {\n      const {\n        data\n      } = await api.get(path('/admin/products'), {\n        params: {\n          include_archived: showArchived ? 1 : 0\n        }\n      });\n      const items = Array.isArray(data === null || data === void 0 ? void 0 : data.items) ? data.items : data;\n      setProducts(items || []);\n    } catch (err) {\n      handleApiError(err, '❌ โหลดสินค้าไม่สำเร็จ');\n    }\n  }, [showArchived]);\n  const fetchStatuses = useCallback(async () => {\n    try {\n      let res = await api.get(path('/product-status'));\n      if (!Array.isArray(res.data)) {\n        try {\n          res = await api.get(path('/product-statuses'));\n        } catch {}\n      }\n      const normalized = (res.data || []).map(x => {\n        var _ref3, _x$product_status_id;\n        return {\n          id: asStr((_ref3 = (_x$product_status_id = x === null || x === void 0 ? void 0 : x.product_status_id) !== null && _x$product_status_id !== void 0 ? _x$product_status_id : x === null || x === void 0 ? void 0 : x.ProductStatusID) !== null && _ref3 !== void 0 ? _ref3 : x === null || x === void 0 ? void 0 : x.id),\n          name: pickStatusName(x)\n        };\n      });\n      setStatuses(normalized);\n    } catch {\n      console.warn('⚠ ไม่มี endpoint product-status | product-statuses');\n      setStatuses([]);\n    }\n  }, []);\n\n  /* ---------- Submit ---------- */\n  const onSubmit = async e => {\n    e.preventDefault();\n    const trimmedPrice = asStr(form.selling_price).trim();\n    const priceInt = Number.parseInt(trimmedPrice, 10);\n    if (!Number.isInteger(priceInt) || priceInt < 0) {\n      return alert('ราคาขายต้องเป็นจำนวนเต็มไม่ติดลบ');\n    }\n    const catRaw = asStr(form.category_id).trim();\n    if (!catRaw) {\n      var _catRef$current;\n      alert('กรุณาเลือก \"ประเภท\" ให้ถูกต้อง');\n      (_catRef$current = catRef.current) === null || _catRef$current === void 0 ? void 0 : _catRef$current.scrollIntoView({\n        behavior: 'smooth',\n        block: 'center'\n      });\n      return;\n    }\n\n    // 🔁 แปลงเป็น id โดยใช้ fallback key\n    const catId = coerceId(catRaw, lookups.product_categories || lookups.categories || [], ['category_id', 'id', 'code'], ['category_name', 'name']);\n    const subId = coerceId(form.subcategory_id, lookups.subcategories || lookups.sub_categories || [], ['subcategory_id', 'id', 'code'], ['subcategory_name', 'name']);\n    const puId = coerceId(form.product_unit_id, lookups.product_units || [], ['unit_id', 'id'], ['unit_name', 'name']);\n    const suId = coerceId(form.size_unit_id, lookups.size_units || [], ['size_unit_id', 'id'], ['unit_name', 'size_unit_name', 'name']);\n    const stId = coerceId(form.product_status_id, statuses, ['id', 'product_status_id'], ['name', 'status_name', 'StatusName']);\n    if (catId == null) return alert('กรุณาเลือก \"ประเภท\" ให้ถูกต้อง (ไม่มี ID ที่ตรงกับชื่อ)');\n    if (puId == null) return alert('กรุณาเลือก \"หน่วยสินค้า\"');\n    const sValStr = asStr(form.size_value).trim();\n    const sizeV = sValStr === '' ? null : toNum(sValStr);\n    if (sizeV !== null && suId == null) return alert('กรุณาเลือก \"หน่วยของขนาด\" ให้ครบ');\n    if (sizeV === null && suId !== null) return alert('กรุณากรอก \"ขนาดสินค้า (ตัวเลข)\" ให้ครบ');\n\n    // TODO: upload image + post/put API (ใช้โค้ดเดิมของคุณต่อ)\n  };\n\n  /* ---------- Options ---------- */\n  const categoryOptions = useMemo(() => [/*#__PURE__*/_jsxDEV(\"option\", {\n    value: \"\",\n    children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E20\\u0E17\"\n  }, \"\", false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this), ...(lookups.product_categories || lookups.categories || []).map(c => {\n    var _ref4, _c$category_id;\n    const id = (_ref4 = (_c$category_id = c.category_id) !== null && _c$category_id !== void 0 ? _c$category_id : c.id) !== null && _ref4 !== void 0 ? _ref4 : c.code;\n    return /*#__PURE__*/_jsxDEV(\"option\", {\n      value: asStr(id),\n      children: c.category_name\n    }, id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 14\n    }, this);\n  })], [lookups.product_categories, lookups.categories]);\n  const filteredSubcategoriesByForm = useMemo(() => {\n    if (!form.category_id) return [];\n    const cid = asStr(form.category_id).trim();\n    return (lookups.subcategories || lookups.sub_categories || []).filter(s => {\n      var _s$category_id;\n      return asStr((_s$category_id = s.category_id) !== null && _s$category_id !== void 0 ? _s$category_id : s.parent_id).trim() === cid || asStr(s.subcategory_name).trim() === cid;\n    });\n  }, [form.category_id, lookups.subcategories, lookups.sub_categories]);\n  const subcategoryOptions = useMemo(() => [/*#__PURE__*/_jsxDEV(\"option\", {\n    value: \"\",\n    children: form.category_id ? 'เลือกหมวดย่อย' : 'เลือกประเภทก่อน'\n  }, \"\", false, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this), ...filteredSubcategoriesByForm.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n    value: asStr(s.subcategory_id),\n    children: s.subcategory_name\n  }, s.subcategory_id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 7\n  }, this))], [filteredSubcategoriesByForm, form.category_id]);\n\n  // … ที่เหลือใช้โค้ดเดิมของคุณได้เลย (fetchProducts, toggle, UI table ฯลฯ) …\n}\n_s(ProductManagement, \"EibbyRGlQv5Jv0y6Pmp6oO9mhWs=\", false, function () {\n  return [useLookups];\n});\n_c = ProductManagement;\nvar _c;\n$RefreshReg$(_c, \"ProductManagement\");","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","Link","api","path","useLookups","jsxDEV","_jsxDEV","asStr","v","undefined","String","pickStatusName","x","_ref","_ref2","_x$status_name","status_name","StatusName","name","toNum","n","Number","replace","isFinite","coerceId","val","list","idKeys","nameKeys","normalizeDigits","s","d","indexOf","norm","trim","toLowerCase","raw","test","arr","Array","isArray","getId","obj","k","hasName","some","found","find","ProductManagement","_s","products","setProducts","statuses","setStatuses","loading","setLoading","showArchived","setShowArchived","visibilityFilter","setVisibilityFilter","data","lookups","lkLoading","error","lkError","reload","reloadLookups","published","selectedFiles","setSelectedFiles","previews","setPreviews","isEditing","setIsEditing","editProductId","setEditProductId","form","setForm","product_name","description","selling_price","category_id","subcategory_id","product_unit_id","size_value","size_unit_id","origin","product_status_id","catRef","handleApiError","err","fallback","_err$response","_err$response2","_err$response2$data","_err$response3","_err$response3$data","console","response","message","alert","fetchProducts","get","params","include_archived","items","fetchStatuses","res","normalized","map","_ref3","_x$product_status_id","id","ProductStatusID","warn","onSubmit","e","preventDefault","trimmedPrice","priceInt","parseInt","isInteger","catRaw","_catRef$current","current","scrollIntoView","behavior","block","catId","product_categories","categories","subId","subcategories","sub_categories","puId","product_units","suId","size_units","stId","sValStr","sizeV","categoryOptions","value","children","fileName","_jsxFileName","lineNumber","columnNumber","c","_ref4","_c$category_id","code","category_name","filteredSubcategoriesByForm","cid","filter","_s$category_id","parent_id","subcategory_name","subcategoryOptions","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/admin/ProductManagement.js"],"sourcesContent":["// frontend/src/admin/ProductManagement.js\r\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './ProductManagement.css';\r\nimport { api, path } from '../lib/api';\r\nimport { useLookups } from '../lib/lookups';\r\n\r\n/* ---------- Helpers ---------- */\r\nconst asStr = (v) => (v === null || v === undefined) ? '' : String(v);\r\nconst pickStatusName = (x) => x?.status_name ?? x?.StatusName ?? x?.name ?? '';\r\nconst toNum = (v) => {\r\n  if (v === null || v === undefined) return null;\r\n  const n = Number(String(v).replace(/[,\\s฿]/g, ''));\r\n  return Number.isFinite(n) ? n : null;\r\n};\r\n\r\n/* ---------- map \"name or id\" -> numeric id from lookups ---------- */\r\nconst coerceId = (val, list, idKeys, nameKeys) => {\r\n  const normalizeDigits = (s) => asStr(s).replace(/[๐-๙]/g, d => '๐๑๒๓๔๕๖๗๘๙'.indexOf(d));\r\n  const norm = (s) => normalizeDigits(asStr(s)).trim().toLowerCase();\r\n  const raw = norm(val);\r\n  if (!raw) return null;\r\n  if (/^\\d+$/.test(raw)) return Number(raw); // already numeric\r\n\r\n  const arr = Array.isArray(list) ? list : [];\r\n  const getId = (obj) => {\r\n    for (const k of idKeys) {\r\n      if (obj?.[k] != null && /^\\d+$/.test(String(obj[k]))) return Number(obj[k]);\r\n    }\r\n    return null;\r\n  };\r\n  const hasName = (obj) => nameKeys.some(k => norm(obj?.[k]) === raw);\r\n  const found = arr.find(hasName);\r\n  return found ? getId(found) : null;\r\n};\r\n\r\nexport default function ProductManagement() {\r\n  const [products, setProducts] = useState([]);\r\n  const [statuses, setStatuses] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showArchived, setShowArchived] = useState(false);\r\n  const [visibilityFilter, setVisibilityFilter] = useState('all');\r\n\r\n  const { data: lookups, loading: lkLoading, error: lkError, reload: reloadLookups } = useLookups({ published: true });\r\n\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [previews, setPreviews] = useState([]);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editProductId, setEditProductId] = useState(null);\r\n\r\n  const [form, setForm] = useState({\r\n    product_name: '',\r\n    description: '',\r\n    selling_price: '',\r\n    category_id: '',\r\n    subcategory_id: '',\r\n    product_unit_id: '',\r\n    size_value: '',\r\n    size_unit_id: '',\r\n    origin: '',\r\n    product_status_id: ''\r\n  });\r\n\r\n  const catRef = useRef(null);\r\n\r\n  /* ---------- API helpers ---------- */\r\n  const handleApiError = (err, fallback = 'เกิดข้อผิดพลาด') => {\r\n    console.error(fallback, err?.response?.data || err?.message || err);\r\n    alert(err?.response?.data?.message || err?.response?.data?.error || err?.message || fallback);\r\n  };\r\n\r\n  const fetchProducts = useCallback(async () => {\r\n    try {\r\n      const { data } = await api.get(path('/admin/products'), {\r\n        params: { include_archived: showArchived ? 1 : 0 }\r\n      });\r\n      const items = Array.isArray(data?.items) ? data.items : data;\r\n      setProducts(items || []);\r\n    } catch (err) {\r\n      handleApiError(err, '❌ โหลดสินค้าไม่สำเร็จ');\r\n    }\r\n  }, [showArchived]);\r\n\r\n  const fetchStatuses = useCallback(async () => {\r\n    try {\r\n      let res = await api.get(path('/product-status'));\r\n      if (!Array.isArray(res.data)) {\r\n        try { res = await api.get(path('/product-statuses')); } catch {}\r\n      }\r\n      const normalized = (res.data || []).map((x) => ({\r\n        id: asStr(x?.product_status_id ?? x?.ProductStatusID ?? x?.id),\r\n        name: pickStatusName(x)\r\n      }));\r\n      setStatuses(normalized);\r\n    } catch {\r\n      console.warn('⚠ ไม่มี endpoint product-status | product-statuses');\r\n      setStatuses([]);\r\n    }\r\n  }, []);\r\n\r\n  /* ---------- Submit ---------- */\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const trimmedPrice = asStr(form.selling_price).trim();\r\n    const priceInt = Number.parseInt(trimmedPrice, 10);\r\n    if (!Number.isInteger(priceInt) || priceInt < 0) {\r\n      return alert('ราคาขายต้องเป็นจำนวนเต็มไม่ติดลบ');\r\n    }\r\n\r\n    const catRaw = asStr(form.category_id).trim();\r\n    if (!catRaw) {\r\n      alert('กรุณาเลือก \"ประเภท\" ให้ถูกต้อง');\r\n      catRef.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n      return;\r\n    }\r\n\r\n    // 🔁 แปลงเป็น id โดยใช้ fallback key\r\n    const catId = coerceId(\r\n      catRaw,\r\n      (lookups.product_categories || lookups.categories || []),\r\n      ['category_id','id','code'],\r\n      ['category_name','name']\r\n    );\r\n    const subId = coerceId(\r\n      form.subcategory_id,\r\n      (lookups.subcategories || lookups.sub_categories || []),\r\n      ['subcategory_id','id','code'],\r\n      ['subcategory_name','name']\r\n    );\r\n    const puId  = coerceId(form.product_unit_id, (lookups.product_units || []), ['unit_id','id'], ['unit_name','name']);\r\n    const suId  = coerceId(form.size_unit_id, (lookups.size_units || []), ['size_unit_id','id'], ['unit_name','size_unit_name','name']);\r\n    const stId  = coerceId(form.product_status_id, statuses, ['id','product_status_id'], ['name','status_name','StatusName']);\r\n\r\n    if (catId == null) return alert('กรุณาเลือก \"ประเภท\" ให้ถูกต้อง (ไม่มี ID ที่ตรงกับชื่อ)');\r\n    if (puId  == null) return alert('กรุณาเลือก \"หน่วยสินค้า\"');\r\n\r\n    const sValStr = asStr(form.size_value).trim();\r\n    const sizeV   = sValStr === '' ? null : toNum(sValStr);\r\n    if (sizeV !== null && suId == null) return alert('กรุณาเลือก \"หน่วยของขนาด\" ให้ครบ');\r\n    if (sizeV === null && suId !== null) return alert('กรุณากรอก \"ขนาดสินค้า (ตัวเลข)\" ให้ครบ');\r\n\r\n    // TODO: upload image + post/put API (ใช้โค้ดเดิมของคุณต่อ)\r\n  };\r\n\r\n  /* ---------- Options ---------- */\r\n  const categoryOptions = useMemo(() => ([\r\n    <option key=\"\" value=\"\">เลือกประเภท</option>,\r\n    ...((lookups.product_categories || lookups.categories) || []).map(c => {\r\n      const id = c.category_id ?? c.id ?? c.code;\r\n      return <option key={id} value={asStr(id)}>{c.category_name}</option>;\r\n    })\r\n  ]), [lookups.product_categories, lookups.categories]);\r\n\r\n  const filteredSubcategoriesByForm = useMemo(() => {\r\n    if (!form.category_id) return [];\r\n    const cid = asStr(form.category_id).trim();\r\n    return ((lookups.subcategories || lookups.sub_categories) || []).filter(s =>\r\n      asStr(s.category_id ?? s.parent_id).trim() === cid\r\n      || asStr(s.subcategory_name).trim() === cid\r\n    );\r\n  }, [form.category_id, lookups.subcategories, lookups.sub_categories]);\r\n\r\n  const subcategoryOptions = useMemo(() => ([\r\n    <option key=\"\" value=\"\">{form.category_id ? 'เลือกหมวดย่อย' : 'เลือกประเภทก่อน'}</option>,\r\n    ...filteredSubcategoriesByForm.map(s => (\r\n      <option key={s.subcategory_id} value={asStr(s.subcategory_id)}>{s.subcategory_name}</option>\r\n    ))\r\n  ]), [filteredSubcategoriesByForm, form.category_id]);\r\n\r\n  // … ที่เหลือใช้โค้ดเดิมของคุณได้เลย (fetchProducts, toggle, UI table ฯลฯ) …\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}