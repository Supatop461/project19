{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\pages\\\\ProfileModal.js\",\n  _import$meta,\n  _import$meta$env,\n  _s = $RefreshSig$();\n// src/pages/ProfileModal.js\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./ProfileModal.css\";\n\n/**\r\n * BACKEND ที่คาดหวัง:\r\n * - POST /api/uploads/avatar (multipart/form-data, field: \"file\") -> { url }\r\n * - GET  /api/me                             -> { id, email, fullname, phone, avatar_url, settings:{...} }\r\n * - PUT  /api/me                             -> body: { fullname, phone, avatar_url }\r\n * - GET  /api/orders/my?limit=5              -> [{ id, code, total, status, created_at }]\r\n * - PUT  /api/settings                       -> body: { order_updates, marketing_email, dark_mode, language }\r\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE = axios.defaults.baseURL || ((_import$meta = import.meta) === null || _import$meta === void 0 ? void 0 : (_import$meta$env = _import$meta.env) === null || _import$meta$env === void 0 ? void 0 : _import$meta$env.VITE_API_BASE) || process.env.REACT_APP_API_BASE || \"http://localhost:3001\";\nconst UPLOAD_ENDPOINT = \"/api/uploads/avatar\";\nexport default function ProfileModal({\n  open = true,\n  onClose\n}) {\n  _s();\n  var _me$settings, _me$settings2, _me$settings3, _me$settings4;\n  const [me, setMe] = useState(null);\n  const [orders, setOrders] = useState([]);\n  const [saving, setSaving] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const axiosClient = useMemo(() => {\n    const token = localStorage.getItem(\"token\") || \"\";\n    return axios.create({\n      baseURL: API_BASE,\n      headers: token ? {\n        Authorization: `Bearer ${token}`\n      } : {},\n      timeout: 15000\n    });\n  }, []);\n\n  // โหลดข้อมูลเริ่มต้น\n  useEffect(() => {\n    if (!open) return;\n    setError(\"\");\n    const load = async () => {\n      try {\n        const [meRes, ordRes] = await Promise.all([axiosClient.get(\"/api/me\"), axiosClient.get(\"/api/orders/my\", {\n          params: {\n            limit: 5\n          }\n        })]);\n        setMe(meRes.data || {});\n        setOrders(Array.isArray(ordRes.data) ? ordRes.data : []);\n      } catch (e) {\n        console.error(e);\n        setError(\"โหลดข้อมูลโปรไฟล์ล้มเหลว\");\n      }\n    };\n    load();\n  }, [open, axiosClient]);\n  const onFileChange = async e => {\n    if (!e.target.files || !e.target.files[0]) return;\n    const file = e.target.files[0];\n    const form = new FormData();\n    form.append(\"file\", file);\n    try {\n      var _res$data;\n      setUploading(true);\n      const res = await axiosClient.post(UPLOAD_ENDPOINT, form, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      const url = res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.url;\n      if (!url) throw new Error(\"no url returned\");\n      setMe(prev => ({\n        ...prev,\n        avatar_url: url\n      }));\n    } catch (err) {\n      console.error(err);\n      alert(\"อัปโหลดรูปไม่สำเร็จ\");\n    } finally {\n      setUploading(false);\n    }\n  };\n  const onChangeField = (key, value) => {\n    setMe(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n  const onSave = async () => {\n    if (!me) return;\n    setSaving(true);\n    setError(\"\");\n    try {\n      // บันทึกข้อมูลส่วนตัว\n      await axiosClient.put(\"/api/me\", {\n        fullname: me.fullname || \"\",\n        phone: me.phone || \"\",\n        avatar_url: me.avatar_url || \"\"\n      });\n\n      // บันทึก settings (ถ้ามีใน me.settings)\n      if (me.settings) {\n        await axiosClient.put(\"/api/settings\", {\n          order_updates: !!me.settings.order_updates,\n          marketing_email: !!me.settings.marketing_email,\n          dark_mode: !!me.settings.dark_mode,\n          language: me.settings.language || \"th\"\n        });\n      }\n      alert(\"บันทึกเรียบร้อย\");\n      if (typeof onClose === \"function\") onClose(); // ปุ่มตกลงแล้วปิดโมดัล\n    } catch (e) {\n      console.error(e);\n      setError(\"บันทึกไม่สำเร็จ\");\n    } finally {\n      setSaving(false);\n    }\n  };\n  if (!open) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-modal-backdrop\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0E42\\u0E1B\\u0E23\\u0E44\\u0E1F\\u0E25\\u0E4C\\u0E02\\u0E2D\\u0E07\\u0E09\\u0E31\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-close\",\n          onClick: onClose,\n          \"aria-label\": \"close\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-body\",\n        children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this), !me ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\",\n          children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"avatar-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"avatar\",\n                src: me.avatar_url || `${process.env.PUBLIC_URL}/avatar-placeholder.png`,\n                alt: \"avatar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"btn-outline\",\n                children: [uploading ? \"กำลังอัปโหลด...\" : \"เปลี่ยนรูปโปรไฟล์\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"image/*\",\n                  onChange: onFileChange,\n                  disabled: uploading,\n                  hidden: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"info-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: me.email || \"\",\n                  disabled: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D-\\u0E2A\\u0E01\\u0E38\\u0E25\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: me.fullname || \"\",\n                  onChange: e => onChangeField(\"fullname\", e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: me.phone || \"\",\n                  onChange: e => onChangeField(\"phone\", e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"settings-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"\\u0E01\\u0E32\\u0E23\\u0E15\\u0E31\\u0E49\\u0E07\\u0E04\\u0E48\\u0E32\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-row\",\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"checkbox\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: !!(me !== null && me !== void 0 && (_me$settings = me.settings) !== null && _me$settings !== void 0 && _me$settings.order_updates),\n                    onChange: e => setMe(prev => ({\n                      ...prev,\n                      settings: {\n                        ...prev.settings,\n                        order_updates: e.target.checked\n                      }\n                    }))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 23\n                  }, this), \"\\u0E41\\u0E08\\u0E49\\u0E07\\u0E2D\\u0E31\\u0E1B\\u0E40\\u0E14\\u0E15\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-row\",\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"checkbox\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: !!(me !== null && me !== void 0 && (_me$settings2 = me.settings) !== null && _me$settings2 !== void 0 && _me$settings2.marketing_email),\n                    onChange: e => setMe(prev => ({\n                      ...prev,\n                      settings: {\n                        ...prev.settings,\n                        marketing_email: e.target.checked\n                      }\n                    }))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 23\n                  }, this), \"\\u0E23\\u0E31\\u0E1A\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\\u0E01\\u0E32\\u0E23\\u0E15\\u0E25\\u0E32\\u0E14\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-row\",\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"checkbox\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: !!(me !== null && me !== void 0 && (_me$settings3 = me.settings) !== null && _me$settings3 !== void 0 && _me$settings3.dark_mode),\n                    onChange: e => setMe(prev => ({\n                      ...prev,\n                      settings: {\n                        ...prev.settings,\n                        dark_mode: e.target.checked\n                      }\n                    }))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 23\n                  }, this), \"\\u0E42\\u0E2B\\u0E21\\u0E14\\u0E21\\u0E37\\u0E14\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"\\u0E20\\u0E32\\u0E29\\u0E32\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: (me === null || me === void 0 ? void 0 : (_me$settings4 = me.settings) === null || _me$settings4 === void 0 ? void 0 : _me$settings4.language) || \"th\",\n                  onChange: e => setMe(prev => ({\n                    ...prev,\n                    settings: {\n                      ...prev.settings,\n                      language: e.target.value\n                    }\n                  })),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"th\",\n                    children: \"\\u0E44\\u0E17\\u0E22\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"en\",\n                    children: \"English\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"orders-col\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\\u0E25\\u0E48\\u0E32\\u0E2A\\u0E38\\u0E14\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 19\n              }, this), orders.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E04\\u0E33\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"orders\",\n                children: orders.map(o => /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ord-top\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"code\",\n                      children: [\"#\", o.code || o.id]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 252,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `status status-${o.status}`,\n                      children: o.status\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 253,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ord-bot\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"\\u0E22\\u0E2D\\u0E14\\u0E23\\u0E27\\u0E21: \", Number(o.total || 0).toLocaleString(\"th-TH\"), \" \\u0E3F\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: new Date(o.created_at).toLocaleString(\"th-TH\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 257,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(Link, {\n                      to: `/orders/${o.id}`,\n                      className: \"link\",\n                      children: \"\\u0E14\\u0E39\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 258,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 27\n                  }, this)]\n                }, o.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-outline\",\n          onClick: onClose,\n          disabled: saving || uploading,\n          children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary\",\n          onClick: onSave,\n          disabled: saving || uploading,\n          \"aria-busy\": saving ? \"true\" : \"false\",\n          children: saving ? \"กำลังบันทึก...\" : \"ตกลง\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n}\n_s(ProfileModal, \"MukIj0isu368DJUEH4y4d5KEH10=\");\n_c = ProfileModal;\nvar _c;\n$RefreshReg$(_c, \"ProfileModal\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","Link","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE","defaults","baseURL","_import$meta","import","meta","_import$meta$env","env","VITE_API_BASE","process","REACT_APP_API_BASE","UPLOAD_ENDPOINT","ProfileModal","open","onClose","_s","_me$settings","_me$settings2","_me$settings3","_me$settings4","me","setMe","orders","setOrders","saving","setSaving","uploading","setUploading","error","setError","axiosClient","token","localStorage","getItem","create","headers","Authorization","timeout","load","meRes","ordRes","Promise","all","get","params","limit","data","Array","isArray","e","console","onFileChange","target","files","file","form","FormData","append","_res$data","res","post","url","Error","prev","avatar_url","err","alert","onChangeField","key","value","onSave","put","fullname","phone","settings","order_updates","marketing_email","dark_mode","language","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","src","PUBLIC_URL","alt","type","accept","onChange","disabled","hidden","email","checked","length","map","o","code","id","status","Number","total","toLocaleString","Date","created_at","to","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/pages/ProfileModal.js"],"sourcesContent":["// src/pages/ProfileModal.js\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport \"./ProfileModal.css\";\r\n\r\n/**\r\n * BACKEND ที่คาดหวัง:\r\n * - POST /api/uploads/avatar (multipart/form-data, field: \"file\") -> { url }\r\n * - GET  /api/me                             -> { id, email, fullname, phone, avatar_url, settings:{...} }\r\n * - PUT  /api/me                             -> body: { fullname, phone, avatar_url }\r\n * - GET  /api/orders/my?limit=5              -> [{ id, code, total, status, created_at }]\r\n * - PUT  /api/settings                       -> body: { order_updates, marketing_email, dark_mode, language }\r\n */\r\nconst API_BASE =\r\n  axios.defaults.baseURL ||\r\n  import.meta?.env?.VITE_API_BASE ||\r\n  process.env.REACT_APP_API_BASE ||\r\n  \"http://localhost:3001\";\r\n\r\nconst UPLOAD_ENDPOINT = \"/api/uploads/avatar\";\r\n\r\nexport default function ProfileModal({ open = true, onClose }) {\r\n  const [me, setMe] = useState(null);\r\n  const [orders, setOrders] = useState([]);\r\n  const [saving, setSaving] = useState(false);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const axiosClient = useMemo(() => {\r\n    const token = localStorage.getItem(\"token\") || \"\";\r\n    return axios.create({\r\n      baseURL: API_BASE,\r\n      headers: token ? { Authorization: `Bearer ${token}` } : {},\r\n      timeout: 15000,\r\n    });\r\n  }, []);\r\n\r\n  // โหลดข้อมูลเริ่มต้น\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    setError(\"\");\r\n\r\n    const load = async () => {\r\n      try {\r\n        const [meRes, ordRes] = await Promise.all([\r\n          axiosClient.get(\"/api/me\"),\r\n          axiosClient.get(\"/api/orders/my\", { params: { limit: 5 } }),\r\n        ]);\r\n        setMe(meRes.data || {});\r\n        setOrders(Array.isArray(ordRes.data) ? ordRes.data : []);\r\n      } catch (e) {\r\n        console.error(e);\r\n        setError(\"โหลดข้อมูลโปรไฟล์ล้มเหลว\");\r\n      }\r\n    };\r\n    load();\r\n  }, [open, axiosClient]);\r\n\r\n  const onFileChange = async (e) => {\r\n    if (!e.target.files || !e.target.files[0]) return;\r\n    const file = e.target.files[0];\r\n\r\n    const form = new FormData();\r\n    form.append(\"file\", file);\r\n\r\n    try {\r\n      setUploading(true);\r\n      const res = await axiosClient.post(UPLOAD_ENDPOINT, form, {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" },\r\n      });\r\n      const url = res?.data?.url;\r\n      if (!url) throw new Error(\"no url returned\");\r\n      setMe((prev) => ({ ...prev, avatar_url: url }));\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"อัปโหลดรูปไม่สำเร็จ\");\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const onChangeField = (key, value) => {\r\n    setMe((prev) => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const onSave = async () => {\r\n    if (!me) return;\r\n    setSaving(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      // บันทึกข้อมูลส่วนตัว\r\n      await axiosClient.put(\"/api/me\", {\r\n        fullname: me.fullname || \"\",\r\n        phone: me.phone || \"\",\r\n        avatar_url: me.avatar_url || \"\",\r\n      });\r\n\r\n      // บันทึก settings (ถ้ามีใน me.settings)\r\n      if (me.settings) {\r\n        await axiosClient.put(\"/api/settings\", {\r\n          order_updates: !!me.settings.order_updates,\r\n          marketing_email: !!me.settings.marketing_email,\r\n          dark_mode: !!me.settings.dark_mode,\r\n          language: me.settings.language || \"th\",\r\n        });\r\n      }\r\n\r\n      alert(\"บันทึกเรียบร้อย\");\r\n      if (typeof onClose === \"function\") onClose(); // ปุ่มตกลงแล้วปิดโมดัล\r\n    } catch (e) {\r\n      console.error(e);\r\n      setError(\"บันทึกไม่สำเร็จ\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <div className=\"profile-modal-backdrop\">\r\n      <div className=\"profile-modal\">\r\n        <div className=\"modal-header\">\r\n          <h3>โปรไฟล์ของฉัน</h3>\r\n          <button className=\"btn-close\" onClick={onClose} aria-label=\"close\">×</button>\r\n        </div>\r\n\r\n        <div className=\"modal-body\">\r\n          {error && <div className=\"error\">{error}</div>}\r\n\r\n          {!me ? (\r\n            <div className=\"loading\">กำลังโหลด...</div>\r\n          ) : (\r\n            <>\r\n              <section className=\"row\">\r\n                <div className=\"avatar-col\">\r\n                  <img\r\n                    className=\"avatar\"\r\n                    src={me.avatar_url || `${process.env.PUBLIC_URL}/avatar-placeholder.png`}\r\n                    alt=\"avatar\"\r\n                  />\r\n                  <label className=\"btn-outline\">\r\n                    {uploading ? \"กำลังอัปโหลด...\" : \"เปลี่ยนรูปโปรไฟล์\"}\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={onFileChange}\r\n                      disabled={uploading}\r\n                      hidden\r\n                    />\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"info-col\">\r\n                  <div className=\"form-row\">\r\n                    <label>อีเมล</label>\r\n                    <input value={me.email || \"\"} disabled />\r\n                  </div>\r\n                  <div className=\"form-row\">\r\n                    <label>ชื่อ-สกุล</label>\r\n                    <input\r\n                      value={me.fullname || \"\"}\r\n                      onChange={(e) => onChangeField(\"fullname\", e.target.value)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-row\">\r\n                    <label>เบอร์โทร</label>\r\n                    <input\r\n                      value={me.phone || \"\"}\r\n                      onChange={(e) => onChangeField(\"phone\", e.target.value)}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </section>\r\n\r\n              <section className=\"row\">\r\n                <div className=\"settings-col\">\r\n                  <h4>การตั้งค่า</h4>\r\n                  <div className=\"form-row\">\r\n                    <label className=\"checkbox\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={!!me?.settings?.order_updates}\r\n                        onChange={(e) =>\r\n                          setMe((prev) => ({\r\n                            ...prev,\r\n                            settings: { ...prev.settings, order_updates: e.target.checked },\r\n                          }))\r\n                        }\r\n                      />\r\n                      แจ้งอัปเดตคำสั่งซื้อ\r\n                    </label>\r\n                  </div>\r\n                  <div className=\"form-row\">\r\n                    <label className=\"checkbox\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={!!me?.settings?.marketing_email}\r\n                        onChange={(e) =>\r\n                          setMe((prev) => ({\r\n                            ...prev,\r\n                            settings: { ...prev.settings, marketing_email: e.target.checked },\r\n                          }))\r\n                        }\r\n                      />\r\n                      รับอีเมลการตลาด\r\n                    </label>\r\n                  </div>\r\n                  <div className=\"form-row\">\r\n                    <label className=\"checkbox\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={!!me?.settings?.dark_mode}\r\n                        onChange={(e) =>\r\n                          setMe((prev) => ({\r\n                            ...prev,\r\n                            settings: { ...prev.settings, dark_mode: e.target.checked },\r\n                          }))\r\n                        }\r\n                      />\r\n                      โหมดมืด\r\n                    </label>\r\n                  </div>\r\n                  <div className=\"form-row\">\r\n                    <label>ภาษา</label>\r\n                    <select\r\n                      value={me?.settings?.language || \"th\"}\r\n                      onChange={(e) =>\r\n                        setMe((prev) => ({\r\n                          ...prev,\r\n                          settings: { ...prev.settings, language: e.target.value },\r\n                        }))\r\n                      }\r\n                    >\r\n                      <option value=\"th\">ไทย</option>\r\n                      <option value=\"en\">English</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"orders-col\">\r\n                  <h4>คำสั่งซื้อล่าสุด</h4>\r\n                  {orders.length === 0 ? (\r\n                    <div className=\"muted\">ยังไม่มีคำสั่งซื้อ</div>\r\n                  ) : (\r\n                    <ul className=\"orders\">\r\n                      {orders.map((o) => (\r\n                        <li key={o.id}>\r\n                          <div className=\"ord-top\">\r\n                            <span className=\"code\">#{o.code || o.id}</span>\r\n                            <span className={`status status-${o.status}`}>{o.status}</span>\r\n                          </div>\r\n                          <div className=\"ord-bot\">\r\n                            <span>ยอดรวม: {Number(o.total || 0).toLocaleString(\"th-TH\")} ฿</span>\r\n                            <span>{new Date(o.created_at).toLocaleString(\"th-TH\")}</span>\r\n                            <Link to={`/orders/${o.id}`} className=\"link\">ดูรายละเอียด</Link>\r\n                          </div>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  )}\r\n                </div>\r\n              </section>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"modal-footer\">\r\n          <button className=\"btn-outline\" onClick={onClose} disabled={saving || uploading}>\r\n            ยกเลิก\r\n          </button>\r\n          <button\r\n            className=\"btn-primary\"\r\n            onClick={onSave}\r\n            disabled={saving || uploading}\r\n            aria-busy={saving ? \"true\" : \"false\"}\r\n          >\r\n            {saving ? \"กำลังบันทึก...\" : \"ตกลง\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}