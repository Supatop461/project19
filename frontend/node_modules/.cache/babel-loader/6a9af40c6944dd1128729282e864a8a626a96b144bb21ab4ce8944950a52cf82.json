{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\pages\\\\HomeUser.js\",\n  _s = $RefreshSig$();\n// frontend/src/admin/AllProducts.js\n// -------------------------------------------------------------\n// หน้าที่: แสดงแคตตาล็อกสินค้าฝั่งแอดมิน + filter/sort/pagination\n// ผูกกับ: /api/admin/products (พร้อม fallback /api/products, /api/public/products)\n// โฟกัส: ประสิทธิภาพ (server-side params), ความยืดหยุ่นรูปทรงข้อมูล,\n//        โค้ดอ่านง่าย + จัดโน้ตให้เฉพาะจุดสำคัญแบบไม่รก\n// -------------------------------------------------------------\n\nimport React, { useEffect, useMemo, useCallback, useRef, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./all-products.css\"; // ✅ ใช้ธีมที่คุณอัปโหลดไว้\nimport { api, path } from \"../lib/api\"; // ✅ เหมือนไฟล์ฝั่ง pages (admin อยู่คนละโฟลเดอร์แต่ path เดียวกัน)\n\n// -------------------------- Helpers (เล็ก กระชับ) --------------------------\n\n// แปลงเลขจากรูปแบบ \"฿1,234\" → 1234 (หรือ null ถ้าเปลี่ยนไม่ได้)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst toNum = v => {\n  if (v === null || v === undefined) return null;\n  const n = Number(String(v).replace(/[,\\s฿ ]/g, \"\"));\n  return Number.isFinite(n) ? n : null;\n};\n\n// ราคาแบบไทย (ไม่มีทศนิยม)\nconst fmtBaht = n => {\n  const v = Number(n || 0);\n  return v.toLocaleString(\"th-TH\", {\n    style: \"currency\",\n    currency: \"THB\",\n    maximumFractionDigits: 0\n  });\n};\n\n// ดึง \"อาเรย์รายการ\" ออกมาจาก response ได้หลายฟอร์แมต\nfunction pickArrayLike(res) {\n  var _res$data, _data$data;\n  const data = (_res$data = res === null || res === void 0 ? void 0 : res.data) !== null && _res$data !== void 0 ? _res$data : res;\n  if (Array.isArray(data)) return data;\n  if (Array.isArray(data === null || data === void 0 ? void 0 : data.items)) return data.items;\n  if (Array.isArray(data === null || data === void 0 ? void 0 : data.data)) return data.data;\n  if (Array.isArray(data === null || data === void 0 ? void 0 : data.rows)) return data.rows;\n  if (Array.isArray(data === null || data === void 0 ? void 0 : data.result)) return data.result;\n  if (data !== null && data !== void 0 && data.success && Array.isArray(data === null || data === void 0 ? void 0 : data.payload)) return data.payload;\n  if (data !== null && data !== void 0 && data.success && Array.isArray(data === null || data === void 0 ? void 0 : (_data$data = data.data) === null || _data$data === void 0 ? void 0 : _data$data.rows)) return data.data.rows;\n  if (data !== null && data !== void 0 && data.ok && Array.isArray(data === null || data === void 0 ? void 0 : data.data)) return data.data;\n  return null;\n}\n\n// ดึง \"เมตาเพจจิ้ง\" จาก response ได้หลายฟอร์แมต (รวม total/page/perPage)\nfunction pickMeta(res) {\n  var _ref, _res$data2, _ref2, _ref3, _ref4, _ref5, _ref6, _data$meta, _ref7, _ref8, _ref9, _meta$total, _ref0, _ref1, _ref10, _meta$page, _ref11, _ref12, _ref13, _ref14, _meta$per_page, _ref15, _ref16, _ref17, _meta$pages;\n  const data = (_ref = (_res$data2 = res === null || res === void 0 ? void 0 : res.data) !== null && _res$data2 !== void 0 ? _res$data2 : res) !== null && _ref !== void 0 ? _ref : {};\n  // รูปแบบที่พบบ่อย\n  const meta = (_ref2 = (_ref3 = (_ref4 = (_ref5 = (_ref6 = (_data$meta = data.meta) !== null && _data$meta !== void 0 ? _data$meta : data.pagination) !== null && _ref6 !== void 0 ? _ref6 : data.pageInfo) !== null && _ref5 !== void 0 ? _ref5 : data.pageinfo) !== null && _ref4 !== void 0 ? _ref4 : data.page_meta) !== null && _ref3 !== void 0 ? _ref3 : data.pageMeta) !== null && _ref2 !== void 0 ? _ref2 : {};\n  const total = (_ref7 = (_ref8 = (_ref9 = (_meta$total = meta.total) !== null && _meta$total !== void 0 ? _meta$total : meta.count) !== null && _ref9 !== void 0 ? _ref9 : data.total) !== null && _ref8 !== void 0 ? _ref8 : data.count) !== null && _ref7 !== void 0 ? _ref7 : Array.isArray(data === null || data === void 0 ? void 0 : data.items) ? data.items.length : null;\n  const page = (_ref0 = (_ref1 = (_ref10 = (_meta$page = meta.page) !== null && _meta$page !== void 0 ? _meta$page : meta.current_page) !== null && _ref10 !== void 0 ? _ref10 : data.page) !== null && _ref1 !== void 0 ? _ref1 : data.current_page) !== null && _ref0 !== void 0 ? _ref0 : 1;\n  const perPage = (_ref11 = (_ref12 = (_ref13 = (_ref14 = (_meta$per_page = meta.per_page) !== null && _meta$per_page !== void 0 ? _meta$per_page : meta.perPage) !== null && _ref14 !== void 0 ? _ref14 : meta.limit) !== null && _ref13 !== void 0 ? _ref13 : data.per_page) !== null && _ref12 !== void 0 ? _ref12 : data.limit) !== null && _ref11 !== void 0 ? _ref11 : null;\n  const pages = (_ref15 = (_ref16 = (_ref17 = (_meta$pages = meta.pages) !== null && _meta$pages !== void 0 ? _meta$pages : meta.total_pages) !== null && _ref17 !== void 0 ? _ref17 : data.pages) !== null && _ref16 !== void 0 ? _ref16 : data.total_pages) !== null && _ref15 !== void 0 ? _ref15 : total && perPage ? Math.ceil(total / perPage) : null;\n  return {\n    total: Number(total !== null && total !== void 0 ? total : 0),\n    page: Number(page !== null && page !== void 0 ? page : 1),\n    perPage: Number(perPage !== null && perPage !== void 0 ? perPage : 0),\n    pages: Number(pages !== null && pages !== void 0 ? pages : 0)\n  };\n}\n\n// -------------------------- Fetchers (ยืดหยุ่น + server params) --------------------------\n\n// รวมพารามิเตอร์สำหรับ server-side filtering/sorting/pagination\nfunction buildQueryParams({\n  q,\n  categoryId,\n  isPublished,\n  sortBy,\n  sortDir,\n  page,\n  perPage\n}) {\n  const qs = new URLSearchParams();\n\n  // ชื่อพารามิเตอร์ตั้งกว้าง ๆ ให้ backend ฝั่งคุณ map ได้เอง (รองรับหลาย API)\n  if (q) qs.set(\"q\", q); // คีย์เวิร์ด\n  if (categoryId) qs.set(\"category_id\", String(categoryId));\n  if (isPublished !== \"all\") {\n    // '1' เผยแพร่, '0' ไม่เผยแพร่ (หรือจะ map เป็น true/false ที่ backend ก็ได้)\n    qs.set(\"is_published\", isPublished === \"1\" ? \"1\" : \"0\");\n  }\n  if (sortBy) qs.set(\"sort\", sortBy); // ตัวอย่าง: 'created_at' | 'name' | 'price'\n  if (sortDir) qs.set(\"order\", sortDir); // 'asc' | 'desc'\n  if (page) qs.set(\"page\", String(page));\n  if (perPage) qs.set(\"limit\", String(perPage)); // หรือ 'per_page' ถ้า backend ต้องการ\n\n  return qs.toString();\n}\n\n// ดึงรายการสินค้า (พยายามใช้ /api/admin/products ก่อน แล้วค่อย fallback)\nasync function fetchProductsFlex(params) {\n  const query = buildQueryParams(params);\n  const candidates = [`/api/admin/products?${query}`, `/api/products?${query}`, `/api/public/products?${query}`];\n  for (const url of candidates) {\n    try {\n      const res = await api.get(url);\n      const items = pickArrayLike(res);\n      if (items) {\n        return {\n          items,\n          meta: pickMeta(res)\n        };\n      }\n    } catch (err) {\n      console.warn(`fetch products fail: ${url}`, err);\n    }\n  }\n  console.warn(\"⚠️ no product array found\");\n  return {\n    items: [],\n    meta: {\n      total: 0,\n      page: 1,\n      perPage: 0,\n      pages: 0\n    }\n  };\n}\n\n// ดึงหมวดหมู่เพื่อทำ filter\nasync function fetchCategoriesFlex() {\n  const candidates = [\"/api/categories?published=1\", \"/api/categories\", \"/api/admin/categories\", \"/api/public/categories\"];\n  for (const url of candidates) {\n    try {\n      const res = await api.get(url);\n      const arr = pickArrayLike(res);\n      if (arr) return arr;\n    } catch (err) {\n      console.warn(`fetch categories fail: ${url}`, err);\n    }\n  }\n  return [];\n}\n\n// -------------------------- Normalizers (รวมราคา/สต็อคอย่างยืดหยุ่น) --------------------------\n\nfunction normalizeProduct(p) {\n  var _ref18, _p$id, _ref19, _p$name, _ref20, _ref21, _p$image_url, _p$images, _p$images$, _p$images2, _ref25, _minPrice, _ref26, _maxPrice, _ref27, _ref28, _ref29, _ref30, _p$is_published, _p$category_id, _ref31, _p$category_name, _ref32, _p$created_at, _ref33, _p$updated_at;\n  const id = (_ref18 = (_p$id = p.id) !== null && _p$id !== void 0 ? _p$id : p.product_id) !== null && _ref18 !== void 0 ? _ref18 : null;\n  const name = (_ref19 = (_p$name = p.name) !== null && _p$name !== void 0 ? _p$name : p.product_name) !== null && _ref19 !== void 0 ? _ref19 : \"ไม่ระบุชื่อ\";\n  const image = (_ref20 = (_ref21 = (_p$image_url = p.image_url) !== null && _p$image_url !== void 0 ? _p$image_url : p.cover_url) !== null && _ref21 !== void 0 ? _ref21 : ((_p$images = p.images) === null || _p$images === void 0 ? void 0 : (_p$images$ = _p$images[0]) === null || _p$images$ === void 0 ? void 0 : _p$images$.url) || ((_p$images2 = p.images) === null || _p$images2 === void 0 ? void 0 : _p$images2[0])) !== null && _ref20 !== void 0 ? _ref20 : null;\n  const variants = Array.isArray(p.variants) ? p.variants : [];\n  const basePrice = toNum(p.price);\n  const baseStock = toNum(p.stock);\n\n  // รวมช่วงราคาและสต็อคจาก variants ถ้ามี\n  let minPrice = null,\n    maxPrice = null,\n    sumStock = 0;\n  for (const v of variants) {\n    var _ref22, _ref23, _v$price, _ref24, _v$stock;\n    const vp = toNum((_ref22 = (_ref23 = (_v$price = v.price) !== null && _v$price !== void 0 ? _v$price : v.price_override) !== null && _ref23 !== void 0 ? _ref23 : v.sale_price) !== null && _ref22 !== void 0 ? _ref22 : v.base_price);\n    const vs = toNum((_ref24 = (_v$stock = v.stock) !== null && _v$stock !== void 0 ? _v$stock : v.live_stock) !== null && _ref24 !== void 0 ? _ref24 : v.qty);\n    if (vp !== null) {\n      minPrice = minPrice === null ? vp : Math.min(minPrice, vp);\n      maxPrice = maxPrice === null ? vp : Math.max(maxPrice, vp);\n    }\n    if (vs !== null) sumStock += vs;\n  }\n  const priceMin = (_ref25 = (_minPrice = minPrice) !== null && _minPrice !== void 0 ? _minPrice : basePrice) !== null && _ref25 !== void 0 ? _ref25 : null;\n  const priceMax = (_ref26 = (_maxPrice = maxPrice) !== null && _maxPrice !== void 0 ? _maxPrice : basePrice) !== null && _ref26 !== void 0 ? _ref26 : null;\n  const totalStock = variants.length ? sumStock : baseStock !== null && baseStock !== void 0 ? baseStock : 0;\n\n  // สถานะเผยแพร่ (พยายามดึงจากหลายชื่อคอลัมน์)\n  const isPublished = (_ref27 = (_ref28 = (_ref29 = (_ref30 = (_p$is_published = p.is_published) !== null && _p$is_published !== void 0 ? _p$is_published : p.published) !== null && _ref30 !== void 0 ? _ref30 : p.enabled) !== null && _ref29 !== void 0 ? _ref29 : p.active) !== null && _ref28 !== void 0 ? _ref28 : p.visible) !== null && _ref27 !== void 0 ? _ref27 : null;\n  return {\n    id,\n    name,\n    image,\n    priceMin,\n    priceMax,\n    totalStock,\n    variantsCount: variants.length,\n    category_id: (_p$category_id = p.category_id) !== null && _p$category_id !== void 0 ? _p$category_id : null,\n    category_name: (_ref31 = (_p$category_name = p.category_name) !== null && _p$category_name !== void 0 ? _p$category_name : p.category) !== null && _ref31 !== void 0 ? _ref31 : null,\n    isPublished,\n    created_at: (_ref32 = (_p$created_at = p.created_at) !== null && _p$created_at !== void 0 ? _p$created_at : p.createdAt) !== null && _ref32 !== void 0 ? _ref32 : null,\n    updated_at: (_ref33 = (_p$updated_at = p.updated_at) !== null && _p$updated_at !== void 0 ? _p$updated_at : p.updatedAt) !== null && _ref33 !== void 0 ? _ref33 : null,\n    raw: p // เก็บไว้ debug/ขยายในอนาคต\n  };\n}\n\n// -------------------------- Main Component --------------------------\n\nexport default function AllProducts() {\n  _s();\n  // สถานะ filter/sort/pagination\n  const [q, setQ] = useState(\"\");\n  const [categoryId, setCategoryId] = useState(\"\");\n  const [isPublished, setIsPublished] = useState(\"all\"); // 'all' | '1' | '0'\n  const [sortBy, setSortBy] = useState(\"created_at\"); // ตัวเลือกตัวอย่าง: created_at | name | price\n  const [sortDir, setSortDir] = useState(\"desc\"); // asc | desc\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(12);\n\n  // ข้อมูลที่แสดง\n  const [items, setItems] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [meta, setMeta] = useState({\n    total: 0,\n    page: 1,\n    perPage: 0,\n    pages: 0\n  });\n\n  // สถานะ UI\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const qDebounceRef = useRef(null);\n\n  // โหลดหมวดหมู่ครั้งแรก\n  useEffect(() => {\n    (async () => {\n      const cats = await fetchCategoriesFlex();\n      setCategories(cats);\n    })();\n  }, []);\n\n  // โหลดสินค้าตาม state (มี debounce เวลาเปลี่ยน q)\n  const load = useCallback(async params => {\n    setLoading(true);\n    setError(\"\");\n    try {\n      const {\n        items,\n        meta\n      } = await fetchProductsFlex(params);\n      setItems(items.map(normalizeProduct));\n      setMeta(meta);\n    } catch (err) {\n      console.error(err);\n      setError(\"เกิดข้อผิดพลาดในการดึงข้อมูล\");\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // ยิงโหลดเมื่อ filter/sort/page เปลี่ยน\n  useEffect(() => {\n    // สำหรับ q ให้หน่วง 300ms กันยิงถี่\n    if (qDebounceRef.current) clearTimeout(qDebounceRef.current);\n    qDebounceRef.current = setTimeout(() => {\n      load({\n        q,\n        categoryId,\n        isPublished,\n        sortBy,\n        sortDir,\n        page,\n        perPage\n      });\n    }, 300);\n    return () => clearTimeout(qDebounceRef.current);\n  }, [q, categoryId, isPublished, sortBy, sortDir, page, perPage, load]);\n\n  // เปลี่ยนหน้า\n  const canPrev = meta.page > 1;\n  const canNext = meta.pages ? meta.page < meta.pages : items.length === perPage;\n  const goPrev = () => canPrev && setPage(p => Math.max(1, p - 1));\n  const goNext = () => canNext && setPage(p => p + 1);\n  const resetPage = () => setPage(1);\n\n  // เปลี่ยน filter → reset หน้าให้กลับไป 1\n  const onCategoryChange = e => {\n    setCategoryId(e.target.value);\n    resetPage();\n  };\n  const onPublishedChange = e => {\n    setIsPublished(e.target.value);\n    resetPage();\n  };\n  const onSortByChange = e => {\n    setSortBy(e.target.value);\n    resetPage();\n  };\n  const onSortDirChange = e => {\n    setSortDir(e.target.value);\n    resetPage();\n  };\n  const onPerPageChange = e => {\n    setPerPage(Number(e.target.value) || 12);\n    resetPage();\n  };\n\n  // แสดงจำนวน\n  const totalText = useMemo(() => {\n    if (meta.total) return `${meta.total.toLocaleString()} รายการ`;\n    return `${items.length.toLocaleString()} รายการ`;\n  }, [meta.total, items.length]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"all-products-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      style: {\n        padding: 16,\n        marginBottom: 18\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filters-row\",\n        style: {\n          display: \"grid\",\n          gridTemplateColumns: \"1.5fr 1fr 1fr 1fr 1fr 1fr\",\n          gap: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: \"block\",\n              fontWeight: 600,\n              marginBottom: 6\n            },\n            children: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: q,\n            onChange: e => {\n              setQ(e.target.value);\n              resetPage();\n            },\n            placeholder: \"\\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C\\u0E04\\u0E33\\u0E04\\u0E49\\u0E19 \\u0E40\\u0E0A\\u0E48\\u0E19 \\u0E01\\u0E38\\u0E2B\\u0E25\\u0E32\\u0E1A, \\u0E01\\u0E23\\u0E30\\u0E16\\u0E32\\u0E07, \\u0E14\\u0E34\\u0E19\\u0E1B\\u0E25\\u0E39\\u0E01\\u2026\",\n            className: \"search-input\",\n            style: {\n              width: \"100%\",\n              padding: \"10px 12px\",\n              borderRadius: 10,\n              border: \"1px solid var(--border)\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: \"block\",\n              fontWeight: 600,\n              marginBottom: 6\n            },\n            children: \"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: categoryId,\n            onChange: onCategoryChange,\n            style: {\n              width: \"100%\",\n              padding: \"10px 12px\",\n              borderRadius: 10,\n              border: \"1px solid var(--border)\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this), categories.map(c => {\n              var _c$id, _c$id2, _c$name;\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                value: (_c$id2 = c.id) !== null && _c$id2 !== void 0 ? _c$id2 : c.category_id,\n                children: (_c$name = c.name) !== null && _c$name !== void 0 ? _c$name : c.category_name\n              }, (_c$id = c.id) !== null && _c$id !== void 0 ? _c$id : c.category_id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 17\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: \"block\",\n              fontWeight: 600,\n              marginBottom: 6\n            },\n            children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: isPublished,\n            onChange: onPublishedChange,\n            style: {\n              width: \"100%\",\n              padding: \"10px 12px\",\n              borderRadius: 10,\n              border: \"1px solid var(--border)\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1\",\n              children: \"\\u0E40\\u0E1C\\u0E22\\u0E41\\u0E1E\\u0E23\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"0\",\n              children: \"\\u0E0B\\u0E48\\u0E2D\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: \"block\",\n              fontWeight: 600,\n              marginBottom: 6\n            },\n            children: \"\\u0E40\\u0E23\\u0E35\\u0E22\\u0E07\\u0E15\\u0E32\\u0E21\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: sortBy,\n            onChange: onSortByChange,\n            style: {\n              width: \"100%\",\n              padding: \"10px 12px\",\n              borderRadius: 10,\n              border: \"1px solid var(--border)\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"created_at\",\n              children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"updated_at\",\n              children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"name\",\n              children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"price\",\n              children: \"\\u0E23\\u0E32\\u0E04\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"stock\",\n              children: \"\\u0E2A\\u0E15\\u0E47\\u0E2D\\u0E04\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: \"block\",\n              fontWeight: 600,\n              marginBottom: 6\n            },\n            children: \"\\u0E17\\u0E34\\u0E28\\u0E17\\u0E32\\u0E07\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: sortDir,\n            onChange: onSortDirChange,\n            style: {\n              width: \"100%\",\n              padding: \"10px 12px\",\n              borderRadius: 10,\n              border: \"1px solid var(--border)\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"desc\",\n              children: \"\\u0E21\\u0E32\\u0E01 \\u2192 \\u0E19\\u0E49\\u0E2D\\u0E22\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"asc\",\n              children: \"\\u0E19\\u0E49\\u0E2D\\u0E22 \\u2192 \\u0E21\\u0E32\\u0E01\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: \"block\",\n              fontWeight: 600,\n              marginBottom: 6\n            },\n            children: \"\\u0E15\\u0E48\\u0E2D\\u0E2B\\u0E19\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: perPage,\n            onChange: onPerPageChange,\n            style: {\n              width: \"100%\",\n              padding: \"10px 12px\",\n              borderRadius: 10,\n              border: \"1px solid var(--border)\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: 8,\n              children: \"8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: 12,\n              children: \"12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: 16,\n              children: \"16\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: 24,\n              children: \"24\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"space-between\",\n          marginTop: 14\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"var(--muted)\"\n          },\n          children: [totalText, meta.pages ? ` • หน้า ${meta.page}/${meta.pages}` : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: goPrev,\n            disabled: !canPrev,\n            className: \"btn\",\n            style: {\n              width: 120,\n              opacity: canPrev ? 1 : 0.6\n            },\n            children: \"\\u0E01\\u0E48\\u0E2D\\u0E19\\u0E2B\\u0E19\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: goNext,\n            disabled: !canNext,\n            className: \"btn\",\n            style: {\n              width: 120,\n              opacity: canNext ? 1 : 0.6\n            },\n            children: \"\\u0E16\\u0E31\\u0E14\\u0E44\\u0E1B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u23F3 \\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 19\n    }, this), !!error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"#b00020\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 19\n    }, this), !loading && !items.length && !error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u0E44\\u0E21\\u0E48\\u0E1E\\u0E1A\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 47\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid\",\n      children: items.map(p => {\n        const priceText = p.priceMin == null && p.priceMax == null ? \"-\" : p.priceMin === p.priceMax ? fmtBaht(p.priceMin) : `${fmtBaht(p.priceMin)} – ${fmtBaht(p.priceMax)}`;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: p.image ? path(p.image) : \"/no-image.png\",\n            alt: p.name,\n            loading: \"lazy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              title: p.name,\n              children: p.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u0E23\\u0E32\\u0E04\\u0E32: \", priceText, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 34\n              }, this), \"\\u0E2A\\u0E15\\u0E47\\u0E2D\\u0E04: \", Number(p.totalStock || 0).toLocaleString(), \" \", p.variantsCount ? `• SKU ${p.variantsCount}` : \"\", p.category_name ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 38\n                }, this), \"\\u0E2B\\u0E21\\u0E27\\u0E14: \", p.category_name]\n              }, void 0, true) : null, p.isPublished !== null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 45\n                }, this), \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30: \", String(p.isPublished ? \"เผยแพร่\" : \"ซ่อน\")]\n              }, void 0, true) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"grid\",\n                gridTemplateColumns: \"1fr 1fr\",\n                gap: 10\n              },\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: `/admin/products/${p.id}`,\n                className: \"btn\",\n                children: \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: `/products/${p.id}`,\n                className: \"btn\",\n                style: {\n                  background: \"var(--muted)\"\n                },\n                children: \"\\u0E14\\u0E39\\u0E2B\\u0E19\\u0E49\\u0E32 User\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 13\n          }, this)]\n        }, p.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 290,\n    columnNumber: 5\n  }, this);\n}\n_s(AllProducts, \"pSW50XI+EPJTGxOR+Xk2gwdG7xo=\");\n_c = AllProducts;\nvar _c;\n$RefreshReg$(_c, \"AllProducts\");","map":{"version":3,"names":["React","useEffect","useMemo","useCallback","useRef","useState","Link","api","path","jsxDEV","_jsxDEV","Fragment","_Fragment","toNum","v","undefined","n","Number","String","replace","isFinite","fmtBaht","toLocaleString","style","currency","maximumFractionDigits","pickArrayLike","res","_res$data","_data$data","data","Array","isArray","items","rows","result","success","payload","ok","pickMeta","_ref","_res$data2","_ref2","_ref3","_ref4","_ref5","_ref6","_data$meta","_ref7","_ref8","_ref9","_meta$total","_ref0","_ref1","_ref10","_meta$page","_ref11","_ref12","_ref13","_ref14","_meta$per_page","_ref15","_ref16","_ref17","_meta$pages","meta","pagination","pageInfo","pageinfo","page_meta","pageMeta","total","count","length","page","current_page","perPage","per_page","limit","pages","total_pages","Math","ceil","buildQueryParams","q","categoryId","isPublished","sortBy","sortDir","qs","URLSearchParams","set","toString","fetchProductsFlex","params","query","candidates","url","get","err","console","warn","fetchCategoriesFlex","arr","normalizeProduct","p","_ref18","_p$id","_ref19","_p$name","_ref20","_ref21","_p$image_url","_p$images","_p$images$","_p$images2","_ref25","_minPrice","_ref26","_maxPrice","_ref27","_ref28","_ref29","_ref30","_p$is_published","_p$category_id","_ref31","_p$category_name","_ref32","_p$created_at","_ref33","_p$updated_at","id","product_id","name","product_name","image","image_url","cover_url","images","variants","basePrice","price","baseStock","stock","minPrice","maxPrice","sumStock","_ref22","_ref23","_v$price","_ref24","_v$stock","vp","price_override","sale_price","base_price","vs","live_stock","qty","min","max","priceMin","priceMax","totalStock","is_published","published","enabled","active","visible","variantsCount","category_id","category_name","category","created_at","createdAt","updated_at","updatedAt","raw","AllProducts","_s","setQ","setCategoryId","setIsPublished","setSortBy","setSortDir","setPage","setPerPage","setItems","categories","setCategories","setMeta","loading","setLoading","error","setError","qDebounceRef","cats","load","map","current","clearTimeout","setTimeout","canPrev","canNext","goPrev","goNext","resetPage","onCategoryChange","e","target","value","onPublishedChange","onSortByChange","onSortDirChange","onPerPageChange","totalText","className","children","fileName","_jsxFileName","lineNumber","columnNumber","padding","marginBottom","display","gridTemplateColumns","gap","fontWeight","onChange","placeholder","width","borderRadius","border","c","_c$id","_c$id2","_c$name","alignItems","justifyContent","marginTop","color","onClick","disabled","opacity","priceText","src","alt","title","to","background","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/pages/HomeUser.js"],"sourcesContent":["// frontend/src/admin/AllProducts.js\r\n// -------------------------------------------------------------\r\n// หน้าที่: แสดงแคตตาล็อกสินค้าฝั่งแอดมิน + filter/sort/pagination\r\n// ผูกกับ: /api/admin/products (พร้อม fallback /api/products, /api/public/products)\r\n// โฟกัส: ประสิทธิภาพ (server-side params), ความยืดหยุ่นรูปทรงข้อมูล,\r\n//        โค้ดอ่านง่าย + จัดโน้ตให้เฉพาะจุดสำคัญแบบไม่รก\r\n// -------------------------------------------------------------\r\n\r\nimport React, { useEffect, useMemo, useCallback, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./all-products.css\";               // ✅ ใช้ธีมที่คุณอัปโหลดไว้\r\nimport { api, path } from \"../lib/api\";    // ✅ เหมือนไฟล์ฝั่ง pages (admin อยู่คนละโฟลเดอร์แต่ path เดียวกัน)\r\n\r\n// -------------------------- Helpers (เล็ก กระชับ) --------------------------\r\n\r\n// แปลงเลขจากรูปแบบ \"฿1,234\" → 1234 (หรือ null ถ้าเปลี่ยนไม่ได้)\r\nconst toNum = (v) => {\r\n  if (v === null || v === undefined) return null;\r\n  const n = Number(String(v).replace(/[,\\s฿ ]/g, \"\"));\r\n  return Number.isFinite(n) ? n : null;\r\n};\r\n\r\n// ราคาแบบไทย (ไม่มีทศนิยม)\r\nconst fmtBaht = (n) => {\r\n  const v = Number(n || 0);\r\n  return v.toLocaleString(\"th-TH\", { style: \"currency\", currency: \"THB\", maximumFractionDigits: 0 });\r\n};\r\n\r\n// ดึง \"อาเรย์รายการ\" ออกมาจาก response ได้หลายฟอร์แมต\r\nfunction pickArrayLike(res) {\r\n  const data = res?.data ?? res;\r\n  if (Array.isArray(data)) return data;\r\n  if (Array.isArray(data?.items)) return data.items;\r\n  if (Array.isArray(data?.data)) return data.data;\r\n  if (Array.isArray(data?.rows)) return data.rows;\r\n  if (Array.isArray(data?.result)) return data.result;\r\n  if (data?.success && Array.isArray(data?.payload)) return data.payload;\r\n  if (data?.success && Array.isArray(data?.data?.rows)) return data.data.rows;\r\n  if (data?.ok && Array.isArray(data?.data)) return data.data;\r\n  return null;\r\n}\r\n\r\n// ดึง \"เมตาเพจจิ้ง\" จาก response ได้หลายฟอร์แมต (รวม total/page/perPage)\r\nfunction pickMeta(res) {\r\n  const data = res?.data ?? res ?? {};\r\n  // รูปแบบที่พบบ่อย\r\n  const meta =\r\n    data.meta ??\r\n    data.pagination ??\r\n    data.pageInfo ??\r\n    data.pageinfo ??\r\n    data.page_meta ??\r\n    data.pageMeta ?? {};\r\n\r\n  const total =\r\n    meta.total ??\r\n    meta.count ??\r\n    data.total ??\r\n    data.count ??\r\n    (Array.isArray(data?.items) ? data.items.length : null);\r\n\r\n  const page =\r\n    meta.page ??\r\n    meta.current_page ??\r\n    data.page ??\r\n    data.current_page ?? 1;\r\n\r\n  const perPage =\r\n    meta.per_page ??\r\n    meta.perPage ??\r\n    meta.limit ??\r\n    data.per_page ??\r\n    data.limit ?? null;\r\n\r\n  const pages =\r\n    meta.pages ??\r\n    meta.total_pages ??\r\n    data.pages ??\r\n    data.total_pages ??\r\n    (total && perPage ? Math.ceil(total / perPage) : null);\r\n\r\n  return {\r\n    total: Number(total ?? 0),\r\n    page: Number(page ?? 1),\r\n    perPage: Number(perPage ?? 0),\r\n    pages: Number(pages ?? 0),\r\n  };\r\n}\r\n\r\n// -------------------------- Fetchers (ยืดหยุ่น + server params) --------------------------\r\n\r\n// รวมพารามิเตอร์สำหรับ server-side filtering/sorting/pagination\r\nfunction buildQueryParams({ q, categoryId, isPublished, sortBy, sortDir, page, perPage }) {\r\n  const qs = new URLSearchParams();\r\n\r\n  // ชื่อพารามิเตอร์ตั้งกว้าง ๆ ให้ backend ฝั่งคุณ map ได้เอง (รองรับหลาย API)\r\n  if (q) qs.set(\"q\", q);                         // คีย์เวิร์ด\r\n  if (categoryId) qs.set(\"category_id\", String(categoryId));\r\n  if (isPublished !== \"all\") {\r\n    // '1' เผยแพร่, '0' ไม่เผยแพร่ (หรือจะ map เป็น true/false ที่ backend ก็ได้)\r\n    qs.set(\"is_published\", isPublished === \"1\" ? \"1\" : \"0\");\r\n  }\r\n  if (sortBy) qs.set(\"sort\", sortBy);            // ตัวอย่าง: 'created_at' | 'name' | 'price'\r\n  if (sortDir) qs.set(\"order\", sortDir);         // 'asc' | 'desc'\r\n  if (page) qs.set(\"page\", String(page));\r\n  if (perPage) qs.set(\"limit\", String(perPage)); // หรือ 'per_page' ถ้า backend ต้องการ\r\n\r\n  return qs.toString();\r\n}\r\n\r\n// ดึงรายการสินค้า (พยายามใช้ /api/admin/products ก่อน แล้วค่อย fallback)\r\nasync function fetchProductsFlex(params) {\r\n  const query = buildQueryParams(params);\r\n  const candidates = [\r\n    `/api/admin/products?${query}`,\r\n    `/api/products?${query}`,\r\n    `/api/public/products?${query}`,\r\n  ];\r\n\r\n  for (const url of candidates) {\r\n    try {\r\n      const res = await api.get(url);\r\n      const items = pickArrayLike(res);\r\n      if (items) {\r\n        return { items, meta: pickMeta(res) };\r\n      }\r\n    } catch (err) {\r\n      console.warn(`fetch products fail: ${url}`, err);\r\n    }\r\n  }\r\n  console.warn(\"⚠️ no product array found\");\r\n  return { items: [], meta: { total: 0, page: 1, perPage: 0, pages: 0 } };\r\n}\r\n\r\n// ดึงหมวดหมู่เพื่อทำ filter\r\nasync function fetchCategoriesFlex() {\r\n  const candidates = [\r\n    \"/api/categories?published=1\",\r\n    \"/api/categories\",\r\n    \"/api/admin/categories\",\r\n    \"/api/public/categories\",\r\n  ];\r\n  for (const url of candidates) {\r\n    try {\r\n      const res = await api.get(url);\r\n      const arr = pickArrayLike(res);\r\n      if (arr) return arr;\r\n    } catch (err) {\r\n      console.warn(`fetch categories fail: ${url}`, err);\r\n    }\r\n  }\r\n  return [];\r\n}\r\n\r\n// -------------------------- Normalizers (รวมราคา/สต็อคอย่างยืดหยุ่น) --------------------------\r\n\r\nfunction normalizeProduct(p) {\r\n  const id = p.id ?? p.product_id ?? null;\r\n  const name = p.name ?? p.product_name ?? \"ไม่ระบุชื่อ\";\r\n  const image =\r\n    p.image_url ??\r\n    p.cover_url ??\r\n    (p.images?.[0]?.url || p.images?.[0]) ??\r\n    null;\r\n\r\n  const variants = Array.isArray(p.variants) ? p.variants : [];\r\n  const basePrice = toNum(p.price);\r\n  const baseStock = toNum(p.stock);\r\n\r\n  // รวมช่วงราคาและสต็อคจาก variants ถ้ามี\r\n  let minPrice = null, maxPrice = null, sumStock = 0;\r\n  for (const v of variants) {\r\n    const vp = toNum(v.price ?? v.price_override ?? v.sale_price ?? v.base_price);\r\n    const vs = toNum(v.stock ?? v.live_stock ?? v.qty);\r\n    if (vp !== null) {\r\n      minPrice = minPrice === null ? vp : Math.min(minPrice, vp);\r\n      maxPrice = maxPrice === null ? vp : Math.max(maxPrice, vp);\r\n    }\r\n    if (vs !== null) sumStock += vs;\r\n  }\r\n\r\n  const priceMin = minPrice ?? basePrice ?? null;\r\n  const priceMax = maxPrice ?? basePrice ?? null;\r\n  const totalStock = variants.length ? sumStock : (baseStock ?? 0);\r\n\r\n  // สถานะเผยแพร่ (พยายามดึงจากหลายชื่อคอลัมน์)\r\n  const isPublished =\r\n    p.is_published ??\r\n    p.published ??\r\n    p.enabled ??\r\n    p.active ??\r\n    p.visible ??\r\n    null;\r\n\r\n  return {\r\n    id,\r\n    name,\r\n    image,\r\n    priceMin,\r\n    priceMax,\r\n    totalStock,\r\n    variantsCount: variants.length,\r\n    category_id: p.category_id ?? null,\r\n    category_name: p.category_name ?? p.category ?? null,\r\n    isPublished,\r\n    created_at: p.created_at ?? p.createdAt ?? null,\r\n    updated_at: p.updated_at ?? p.updatedAt ?? null,\r\n    raw: p, // เก็บไว้ debug/ขยายในอนาคต\r\n  };\r\n}\r\n\r\n// -------------------------- Main Component --------------------------\r\n\r\nexport default function AllProducts() {\r\n  // สถานะ filter/sort/pagination\r\n  const [q, setQ] = useState(\"\");\r\n  const [categoryId, setCategoryId] = useState(\"\");\r\n  const [isPublished, setIsPublished] = useState(\"all\"); // 'all' | '1' | '0'\r\n  const [sortBy, setSortBy] = useState(\"created_at\");    // ตัวเลือกตัวอย่าง: created_at | name | price\r\n  const [sortDir, setSortDir] = useState(\"desc\");        // asc | desc\r\n  const [page, setPage] = useState(1);\r\n  const [perPage, setPerPage] = useState(12);\r\n\r\n  // ข้อมูลที่แสดง\r\n  const [items, setItems] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [meta, setMeta] = useState({ total: 0, page: 1, perPage: 0, pages: 0 });\r\n\r\n  // สถานะ UI\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const qDebounceRef = useRef(null);\r\n\r\n  // โหลดหมวดหมู่ครั้งแรก\r\n  useEffect(() => {\r\n    (async () => {\r\n      const cats = await fetchCategoriesFlex();\r\n      setCategories(cats);\r\n    })();\r\n  }, []);\r\n\r\n  // โหลดสินค้าตาม state (มี debounce เวลาเปลี่ยน q)\r\n  const load = useCallback(async (params) => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n    try {\r\n      const { items, meta } = await fetchProductsFlex(params);\r\n      setItems(items.map(normalizeProduct));\r\n      setMeta(meta);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"เกิดข้อผิดพลาดในการดึงข้อมูล\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // ยิงโหลดเมื่อ filter/sort/page เปลี่ยน\r\n  useEffect(() => {\r\n    // สำหรับ q ให้หน่วง 300ms กันยิงถี่\r\n    if (qDebounceRef.current) clearTimeout(qDebounceRef.current);\r\n    qDebounceRef.current = setTimeout(() => {\r\n      load({ q, categoryId, isPublished, sortBy, sortDir, page, perPage });\r\n    }, 300);\r\n    return () => clearTimeout(qDebounceRef.current);\r\n  }, [q, categoryId, isPublished, sortBy, sortDir, page, perPage, load]);\r\n\r\n  // เปลี่ยนหน้า\r\n  const canPrev = meta.page > 1;\r\n  const canNext = meta.pages ? meta.page < meta.pages : items.length === perPage;\r\n\r\n  const goPrev = () => canPrev && setPage((p) => Math.max(1, p - 1));\r\n  const goNext = () => canNext && setPage((p) => p + 1);\r\n  const resetPage = () => setPage(1);\r\n\r\n  // เปลี่ยน filter → reset หน้าให้กลับไป 1\r\n  const onCategoryChange = (e) => { setCategoryId(e.target.value); resetPage(); };\r\n  const onPublishedChange = (e) => { setIsPublished(e.target.value); resetPage(); };\r\n  const onSortByChange = (e) => { setSortBy(e.target.value); resetPage(); };\r\n  const onSortDirChange = (e) => { setSortDir(e.target.value); resetPage(); };\r\n  const onPerPageChange = (e) => { setPerPage(Number(e.target.value) || 12); resetPage(); };\r\n\r\n  // แสดงจำนวน\r\n  const totalText = useMemo(() => {\r\n    if (meta.total) return `${meta.total.toLocaleString()} รายการ`;\r\n    return `${items.length.toLocaleString()} รายการ`;\r\n  }, [meta.total, items.length]);\r\n\r\n  return (\r\n    <div className=\"all-products-page\">\r\n      <h1>สินค้าทั้งหมด</h1>\r\n\r\n      {/* ---------------- Toolbar: ค้นหา/กรอง/จัดเรียง/เพจจิ้ง ---------------- */}\r\n      <div className=\"card\" style={{ padding: 16, marginBottom: 18 }}>\r\n        <div className=\"filters-row\" style={{ display: \"grid\", gridTemplateColumns: \"1.5fr 1fr 1fr 1fr 1fr 1fr\", gap: 12 }}>\r\n          {/* ค้นหาชื่อ/คำอธิบาย */}\r\n          <div>\r\n            <label style={{ display: \"block\", fontWeight: 600, marginBottom: 6 }}>ค้นหา</label>\r\n            <input\r\n              value={q}\r\n              onChange={(e) => { setQ(e.target.value); resetPage(); }}\r\n              placeholder=\"พิมพ์คำค้น เช่น กุหลาบ, กระถาง, ดินปลูก…\"\r\n              className=\"search-input\"\r\n              style={{ width: \"100%\", padding: \"10px 12px\", borderRadius: 10, border: \"1px solid var(--border)\" }}\r\n            />\r\n          </div>\r\n\r\n          {/* หมวดหมู่ */}\r\n          <div>\r\n            <label style={{ display: \"block\", fontWeight: 600, marginBottom: 6 }}>หมวดหมู่</label>\r\n            <select value={categoryId} onChange={onCategoryChange} style={{ width: \"100%\", padding: \"10px 12px\", borderRadius: 10, border: \"1px solid var(--border)\" }}>\r\n              <option value=\"\">ทั้งหมด</option>\r\n              {categories.map((c) => (\r\n                <option key={c.id ?? c.category_id} value={c.id ?? c.category_id}>\r\n                  {c.name ?? c.category_name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* สถานะเผยแพร่ */}\r\n          <div>\r\n            <label style={{ display: \"block\", fontWeight: 600, marginBottom: 6 }}>สถานะ</label>\r\n            <select value={isPublished} onChange={onPublishedChange} style={{ width: \"100%\", padding: \"10px 12px\", borderRadius: 10, border: \"1px solid var(--border)\" }}>\r\n              <option value=\"all\">ทั้งหมด</option>\r\n              <option value=\"1\">เผยแพร่</option>\r\n              <option value=\"0\">ซ่อน</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* เรียงตาม */}\r\n          <div>\r\n            <label style={{ display: \"block\", fontWeight: 600, marginBottom: 6 }}>เรียงตาม</label>\r\n            <select value={sortBy} onChange={onSortByChange} style={{ width: \"100%\", padding: \"10px 12px\", borderRadius: 10, border: \"1px solid var(--border)\" }}>\r\n              <option value=\"created_at\">วันที่สร้าง</option>\r\n              <option value=\"updated_at\">วันที่แก้ไข</option>\r\n              <option value=\"name\">ชื่อสินค้า</option>\r\n              <option value=\"price\">ราคา</option>\r\n              <option value=\"stock\">สต็อค</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* ทิศทางเรียง */}\r\n          <div>\r\n            <label style={{ display: \"block\", fontWeight: 600, marginBottom: 6 }}>ทิศทาง</label>\r\n            <select value={sortDir} onChange={onSortDirChange} style={{ width: \"100%\", padding: \"10px 12px\", borderRadius: 10, border: \"1px solid var(--border)\" }}>\r\n              <option value=\"desc\">มาก → น้อย</option>\r\n              <option value=\"asc\">น้อย → มาก</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* จำนวนต่อหน้า */}\r\n          <div>\r\n            <label style={{ display: \"block\", fontWeight: 600, marginBottom: 6 }}>ต่อหน้า</label>\r\n            <select value={perPage} onChange={onPerPageChange} style={{ width: \"100%\", padding: \"10px 12px\", borderRadius: 10, border: \"1px solid var(--border)\" }}>\r\n              <option value={8}>8</option>\r\n              <option value={12}>12</option>\r\n              <option value={16}>16</option>\r\n              <option value={24}>24</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* สรุปจำนวน + ปุ่มเปลี่ยนหน้า */}\r\n        <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", marginTop: 14 }}>\r\n          <div style={{ color: \"var(--muted)\" }}>{totalText}{meta.pages ? ` • หน้า ${meta.page}/${meta.pages}` : \"\"}</div>\r\n          <div style={{ display: \"flex\", gap: 8 }}>\r\n            <button onClick={goPrev} disabled={!canPrev} className=\"btn\" style={{ width: 120, opacity: canPrev ? 1 : 0.6 }}>ก่อนหน้า</button>\r\n            <button onClick={goNext} disabled={!canNext} className=\"btn\" style={{ width: 120, opacity: canNext ? 1 : 0.6 }}>ถัดไป</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ---------------- สถานะโหลด/เออเรอร์ ---------------- */}\r\n      {loading && <p>⏳ กำลังโหลด...</p>}\r\n      {!!error && <p style={{ color: \"#b00020\" }}>{error}</p>}\r\n      {!loading && !items.length && !error && <p>ไม่พบรายการสินค้า</p>}\r\n\r\n      {/* ---------------- Grid สินค้า ---------------- */}\r\n      <div className=\"grid\">\r\n        {items.map((p) => {\r\n          const priceText =\r\n            p.priceMin == null && p.priceMax == null\r\n              ? \"-\"\r\n              : p.priceMin === p.priceMax\r\n              ? fmtBaht(p.priceMin)\r\n              : `${fmtBaht(p.priceMin)} – ${fmtBaht(p.priceMax)}`;\r\n\r\n        return (\r\n          <div key={p.id} className=\"card\">\r\n            <img\r\n              src={p.image ? path(p.image) : \"/no-image.png\"}\r\n              alt={p.name}\r\n              loading=\"lazy\"\r\n            />\r\n            <div className=\"info\">\r\n              <h3 title={p.name}>{p.name}</h3>\r\n              <p>\r\n                ราคา: {priceText}<br/>\r\n                สต็อค: {Number(p.totalStock || 0).toLocaleString()} {p.variantsCount ? `• SKU ${p.variantsCount}` : \"\"}\r\n                {p.category_name ? <><br/>หมวด: {p.category_name}</> : null}\r\n                {p.isPublished !== null ? <><br/>สถานะ: {String(p.isPublished ? \"เผยแพร่\" : \"ซ่อน\")}</> : null}\r\n              </p>\r\n\r\n              {/* ปุ่มจัดการ: ไปหน้าแก้ไขสินค้า (admin) */}\r\n              <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 10 }}>\r\n                <Link to={`/admin/products/${p.id}`} className=\"btn\">แก้ไข</Link>\r\n                <Link\r\n                  to={`/products/${p.id}`}\r\n                  className=\"btn\"\r\n                  style={{ background: \"var(--muted)\" }}\r\n                >\r\n                  ดูหน้า User\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );})}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}