{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\pages\\\\HomeUser.js\",\n  _s = $RefreshSig$();\n// src/pages/HomeUser.js\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport './HomeUser.css';\nimport { addItem as addToCart } from '../lib/cart';\n\n/* -------------------- ‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÄ‡∏ú‡∏∑‡πà‡∏≠ API ‡∏ß‡πà‡∏≤‡∏á -------------------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FALLBACK_CATEGORIES = [{\n  id: 'plants',\n  slug: 'plants',\n  name: '‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ',\n  image: process.env.PUBLIC_URL + '/tonmai.jpg'\n}, {\n  id: 'tools',\n  slug: 'tools',\n  name: '‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏û‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å',\n  image: process.env.PUBLIC_URL + '/opakorn.jpg'\n}];\nexport default function HomeUser() {\n  _s();\n  // ‡∏Å‡∏±‡∏ô baseURL ‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢ /api ‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô\n  const apiPath = p => (axios.defaults.baseURL || '').replace(/\\/+$/, '').endsWith('/api') ? p : '/api' + p;\n  const [categories, setCategories] = useState([]);\n  const [bestSellers, setBestSellers] = useState([]); // 5 ‡∏ä‡∏¥‡πâ‡∏ô\n  const [allProducts, setAllProducts] = useState([]); // ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏Å‡∏£‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á)\n  const [loading, setLoading] = useState({\n    cat: true,\n    best: true,\n    all: true\n  });\n  const [errMsg, setErrMsg] = useState('');\n\n  /* -------------------- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å DB ‚Üí UI -------------------- */\n  const normalizeProduct = (p, idx) => {\n    var _ref, _p$product_id, _ref2, _p$product_name, _ref3, _ref4, _p$selling_price;\n    return {\n      id: (_ref = (_p$product_id = p.product_id) !== null && _p$product_id !== void 0 ? _p$product_id : p.id) !== null && _ref !== void 0 ? _ref : `p-${idx}`,\n      name: (_ref2 = (_p$product_name = p.product_name) !== null && _p$product_name !== void 0 ? _p$product_name : p.name) !== null && _ref2 !== void 0 ? _ref2 : '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤',\n      // ‡∏£‡∏≤‡∏Ñ‡∏≤: ‡πÉ‡∏ä‡πâ‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∏‡∏ì ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô 0 ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô\n      price: Number((_ref3 = (_ref4 = (_p$selling_price = p.selling_price) !== null && _p$selling_price !== void 0 ? _p$selling_price : p.price) !== null && _ref4 !== void 0 ? _ref4 : p.unit_price) !== null && _ref3 !== void 0 ? _ref3 : 0),\n      img: p.image_url || p.cover_url || p.image || (Array.isArray(p.images) ? p.images[0] : '') || process.env.PUBLIC_URL + '/logo.png'\n    };\n  };\n  const normalizeCategory = (c, idx) => {\n    var _ref5, _ref6, _ref7, _c$category_id, _ref8, _c$category_name, _c$slug;\n    const cid = (_ref5 = (_ref6 = (_ref7 = (_c$category_id = c.category_id) !== null && _c$category_id !== void 0 ? _c$category_id : c.id) !== null && _ref7 !== void 0 ? _ref7 : c.code) !== null && _ref6 !== void 0 ? _ref6 : c.slug) !== null && _ref5 !== void 0 ? _ref5 : `cat-${idx}`;\n    const name = (_ref8 = (_c$category_name = c.category_name) !== null && _c$category_name !== void 0 ? _c$category_name : c.name) !== null && _ref8 !== void 0 ? _ref8 : '‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà';\n    const slug = (_c$slug = c.slug) !== null && _c$slug !== void 0 ? _c$slug : String(cid).toLowerCase();\n    const image = c.image_url || c.image || (slug.includes('tool') ? process.env.PUBLIC_URL + '/opakorn.jpg' : process.env.PUBLIC_URL + '/tonmai.jpg');\n    return {\n      id: String(cid),\n      slug,\n      name,\n      image\n    };\n  };\n  const toArray = data => {\n    if (Array.isArray(data)) return data;\n    if (Array.isArray(data === null || data === void 0 ? void 0 : data.data)) return data.data;\n    if (Array.isArray(data === null || data === void 0 ? void 0 : data.rows)) return data.rows;\n    return [];\n  };\n\n  /* -------------------- ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà (‡πÉ‡∏ä‡πâ‡πÅ‡∏Ñ‡πà 2 ‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô) -------------------- */\n  useEffect(() => {\n    (async () => {\n      try {\n        setLoading(s => ({\n          ...s,\n          cat: true\n        }));\n        const res = await axios.get(apiPath('/categories'), {\n          params: {\n            status: 'active',\n            _: Date.now()\n          }\n        });\n        const list = toArray(res.data).map(normalizeCategory);\n        // ‡∏ñ‡πâ‡∏≤ DB ‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 2 ‡∏´‡∏°‡∏ß‡∏î ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏á ‚Äú‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ ‚Üí ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‚Äù ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô\n        const order = ['plants', 'tools'];\n        const arranged = order.map(k => list.find(x => (x.slug || '').toLowerCase() === k)).filter(Boolean);\n        setCategories(arranged.length ? arranged.slice(0, 2) : list.slice(0, 2).length ? list.slice(0, 2) : FALLBACK_CATEGORIES);\n      } catch {\n        setCategories(FALLBACK_CATEGORIES);\n      } finally {\n        setLoading(s => ({\n          ...s,\n          cat: false\n        }));\n      }\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /* -------------------- ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ (5 ‡∏ä‡∏¥‡πâ‡∏ô ‡∏à‡∏≤‡∏Å DB ‡∏à‡∏£‡∏¥‡∏á) -------------------- */\n  useEffect(() => {\n    (async () => {\n      try {\n        setLoading(s => ({\n          ...s,\n          best: true\n        }));\n        // ‡πÉ‡∏ä‡πâ endpoint ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ popular ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≥‡∏£‡∏≠‡∏á\n        let res = null;\n        try {\n          res = await axios.get(apiPath('/products/best-sellers'), {\n            params: {\n              limit: 5,\n              _: Date.now()\n            }\n          });\n        } catch {\n          res = await axios.get(apiPath('/products'), {\n            params: {\n              sort: 'popular',\n              limit: 5,\n              _: Date.now()\n            }\n          });\n        }\n        const list = toArray(res.data).map(normalizeProduct).slice(0, 5);\n        setBestSellers(list);\n      } catch {\n        setBestSellers([]); // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏ä‡∏ß‡πå mock ‡πÅ‡∏•‡πâ‡∏ß\n      } finally {\n        setLoading(s => ({\n          ...s,\n          best: false\n        }));\n      }\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /* -------------------- ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å DB ‡∏à‡∏£‡∏¥‡∏á) -------------------- */\n  useEffect(() => {\n    (async () => {\n      try {\n        setLoading(s => ({\n          ...s,\n          all: true\n        }));\n        const res = await axios.get(apiPath('/products'), {\n          params: {\n            limit: 100,\n            _: Date.now()\n          }\n        });\n        const list = toArray(res.data).map(normalizeProduct);\n        setAllProducts(list);\n        if (!list.length) setErrMsg('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠ API ‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');\n      } catch {\n        setAllProducts([]);\n        setErrMsg('‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');\n      } finally {\n        setLoading(s => ({\n          ...s,\n          all: false\n        }));\n      }\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"search-btn\",\n        children: \"\\uD83D\\uDD0D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"hero\",\n      style: {\n        backgroundImage: `url(${process.env.PUBLIC_URL + '/p2.png'})`,\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n        backgroundSize: 'cover'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hero-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"\\u201C\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"highlight\",\n            children: \"\\u0E23\\u0E49\\u0E32\\u0E19\\u0E1B\\u0E23\\u0E32\\u0E0A\\u0E0D\\u0E4C\\u0E41\\u0E21\\u0E48\\u0E42\\u0E08\\u0E49\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 16\n          }, this), \"\\u201D\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0E41\\u0E2B\\u0E25\\u0E48\\u0E07\\u0E1C\\u0E25\\u0E34\\u0E15\\u0E41\\u0E25\\u0E30\\u0E08\\u0E31\\u0E14\\u0E08\\u0E33\\u0E2B\\u0E19\\u0E48\\u0E32\\u0E22 \\u0E15\\u0E49\\u0E19\\u0E44\\u0E21\\u0E49 \\u0E41\\u0E25\\u0E30\\u0E27\\u0E31\\u0E2A\\u0E14\\u0E38\\u0E1B\\u0E25\\u0E39\\u0E01 \\u0E21\\u0E32\\u0E01\\u0E01\\u0E27\\u0E48\\u0E32 100 \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"categories\",\n      children: (loading.cat ? FALLBACK_CATEGORIES : categories).map((cat, idx) => /*#__PURE__*/_jsxDEV(Link, {\n        to: `/products?category=${encodeURIComponent(cat.slug || cat.id)}`,\n        className: \"category-card\",\n        title: cat.name,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: cat.image,\n          alt: cat.name,\n          onError: e => {\n            e.currentTarget.src = (cat.slug || '').toLowerCase().includes('tool') ? process.env.PUBLIC_URL + '/opakorn.jpg' : process.env.PUBLIC_URL + '/tonmai.jpg';\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: cat.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this)]\n      }, cat.id || `cat-${idx}`, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), bestSellers.length > 0 && /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"best-sellers\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83C\\uDF1F \\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E02\\u0E32\\u0E22\\u0E14\\u0E35\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-grid\",\n        children: (loading.best ? [] : bestSellers).map((item, idx) => {\n          var _item$id;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.img,\n              alt: item.name,\n              onError: e => {\n                e.currentTarget.src = process.env.PUBLIC_URL + '/logo.png';\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [Number(item.price || 0).toLocaleString(), \" \\u0E1A\\u0E32\\u0E17\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-add\",\n              onClick: () => addToCart(item),\n              children: \"+ \\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E07\\u0E15\\u0E30\\u0E01\\u0E23\\u0E49\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 17\n            }, this)]\n          }, (_item$id = item.id) !== null && _item$id !== void 0 ? _item$id : `best-${idx}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"all-products\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDED2 \\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), loading.all ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-inline\",\n        children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this) : allProducts.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-grid\",\n        children: allProducts.map((p, idx) => {\n          var _p$id;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: p.img,\n              alt: p.name,\n              onError: e => {\n                e.currentTarget.src = process.env.PUBLIC_URL + '/logo.png';\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: p.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [Number(p.price || 0).toLocaleString(), \" \\u0E1A\\u0E32\\u0E17\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-add\",\n              onClick: () => addToCart(p),\n              children: \"+ \\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E07\\u0E15\\u0E30\\u0E01\\u0E23\\u0E49\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this)]\n          }, (_p$id = p.id) !== null && _p$id !== void 0 ? _p$id : `all-${idx}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-inline\",\n        children: errMsg || '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n}\n_s(HomeUser, \"gln+wmKNkm2fz2sJzS+Da9wGd3g=\");\n_c = HomeUser;\nvar _c;\n$RefreshReg$(_c, \"HomeUser\");","map":{"version":3,"names":["React","useEffect","useState","Link","axios","addItem","addToCart","jsxDEV","_jsxDEV","FALLBACK_CATEGORIES","id","slug","name","image","process","env","PUBLIC_URL","HomeUser","_s","apiPath","p","defaults","baseURL","replace","endsWith","categories","setCategories","bestSellers","setBestSellers","allProducts","setAllProducts","loading","setLoading","cat","best","all","errMsg","setErrMsg","normalizeProduct","idx","_ref","_p$product_id","_ref2","_p$product_name","_ref3","_ref4","_p$selling_price","product_id","product_name","price","Number","selling_price","unit_price","img","image_url","cover_url","Array","isArray","images","normalizeCategory","c","_ref5","_ref6","_ref7","_c$category_id","_ref8","_c$category_name","_c$slug","cid","category_id","code","category_name","String","toLowerCase","includes","toArray","data","rows","s","res","get","params","status","_","Date","now","list","map","order","arranged","k","find","x","filter","Boolean","length","slice","limit","sort","className","children","type","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","style","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","to","encodeURIComponent","title","src","alt","onError","e","currentTarget","item","_item$id","toLocaleString","onClick","_p$id","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/pages/HomeUser.js"],"sourcesContent":["// src/pages/HomeUser.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './HomeUser.css';\r\nimport { addItem as addToCart } from '../lib/cart';\r\n\r\n/* -------------------- ‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÄ‡∏ú‡∏∑‡πà‡∏≠ API ‡∏ß‡πà‡∏≤‡∏á -------------------- */\r\nconst FALLBACK_CATEGORIES = [\r\n  { id: 'plants', slug: 'plants', name: '‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ',            image: process.env.PUBLIC_URL + '/tonmai.jpg' },\r\n  { id: 'tools',  slug: 'tools',  name: '‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏û‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å', image: process.env.PUBLIC_URL + '/opakorn.jpg' },\r\n];\r\n\r\nexport default function HomeUser() {\r\n  // ‡∏Å‡∏±‡∏ô baseURL ‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢ /api ‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô\r\n  const apiPath = (p) =>\r\n    (axios.defaults.baseURL || '').replace(/\\/+$/, '').endsWith('/api') ? p : '/api' + p;\r\n\r\n  const [categories, setCategories]   = useState([]);\r\n  const [bestSellers, setBestSellers] = useState([]); // 5 ‡∏ä‡∏¥‡πâ‡∏ô\r\n  const [allProducts, setAllProducts] = useState([]); // ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏Å‡∏£‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á)\r\n  const [loading, setLoading]         = useState({ cat: true, best: true, all: true });\r\n  const [errMsg, setErrMsg]           = useState('');\r\n\r\n  /* -------------------- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å DB ‚Üí UI -------------------- */\r\n  const normalizeProduct = (p, idx) => ({\r\n    id:    p.product_id ?? p.id ?? `p-${idx}`,\r\n    name:  p.product_name ?? p.name ?? '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤',\r\n    // ‡∏£‡∏≤‡∏Ñ‡∏≤: ‡πÉ‡∏ä‡πâ‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∏‡∏ì ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô 0 ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô\r\n    price: Number(p.selling_price ?? p.price ?? p.unit_price ?? 0),\r\n    img:\r\n      p.image_url ||\r\n      p.cover_url ||\r\n      p.image ||\r\n      (Array.isArray(p.images) ? p.images[0] : '') ||\r\n      process.env.PUBLIC_URL + '/logo.png',\r\n  });\r\n\r\n  const normalizeCategory = (c, idx) => {\r\n    const cid   = c.category_id ?? c.id ?? c.code ?? c.slug ?? `cat-${idx}`;\r\n    const name  = c.category_name ?? c.name ?? '‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà';\r\n    const slug  = c.slug ?? String(cid).toLowerCase();\r\n    const image = c.image_url || c.image || (\r\n      slug.includes('tool') ? process.env.PUBLIC_URL + '/opakorn.jpg'\r\n                            : process.env.PUBLIC_URL + '/tonmai.jpg'\r\n    );\r\n    return { id: String(cid), slug, name, image };\r\n  };\r\n\r\n  const toArray = (data) => {\r\n    if (Array.isArray(data)) return data;\r\n    if (Array.isArray(data?.data)) return data.data;\r\n    if (Array.isArray(data?.rows)) return data.rows;\r\n    return [];\r\n  };\r\n\r\n  /* -------------------- ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà (‡πÉ‡∏ä‡πâ‡πÅ‡∏Ñ‡πà 2 ‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô) -------------------- */\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setLoading(s => ({ ...s, cat: true }));\r\n        const res  = await axios.get(apiPath('/categories'), { params: { status: 'active', _: Date.now() }});\r\n        const list = toArray(res.data).map(normalizeCategory);\r\n        // ‡∏ñ‡πâ‡∏≤ DB ‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 2 ‡∏´‡∏°‡∏ß‡∏î ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏á ‚Äú‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ ‚Üí ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‚Äù ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô\r\n        const order = ['plants', 'tools'];\r\n        const arranged =\r\n          order.map(k => list.find(x => (x.slug || '').toLowerCase() === k)).filter(Boolean);\r\n        setCategories(arranged.length ? arranged.slice(0, 2) : (list.slice(0, 2).length ? list.slice(0, 2) : FALLBACK_CATEGORIES));\r\n      } catch {\r\n        setCategories(FALLBACK_CATEGORIES);\r\n      } finally {\r\n        setLoading(s => ({ ...s, cat: false }));\r\n      }\r\n    })();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  /* -------------------- ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ (5 ‡∏ä‡∏¥‡πâ‡∏ô ‡∏à‡∏≤‡∏Å DB ‡∏à‡∏£‡∏¥‡∏á) -------------------- */\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setLoading(s => ({ ...s, best: true }));\r\n        // ‡πÉ‡∏ä‡πâ endpoint ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ popular ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≥‡∏£‡∏≠‡∏á\r\n        let res = null;\r\n        try {\r\n          res = await axios.get(apiPath('/products/best-sellers'), { params: { limit: 5, _: Date.now() }});\r\n        } catch {\r\n          res = await axios.get(apiPath('/products'), { params: { sort: 'popular', limit: 5, _: Date.now() }});\r\n        }\r\n        const list = toArray(res.data).map(normalizeProduct).slice(0, 5);\r\n        setBestSellers(list);\r\n      } catch {\r\n        setBestSellers([]); // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏ä‡∏ß‡πå mock ‡πÅ‡∏•‡πâ‡∏ß\r\n      } finally {\r\n        setLoading(s => ({ ...s, best: false }));\r\n      }\r\n    })();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  /* -------------------- ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å DB ‡∏à‡∏£‡∏¥‡∏á) -------------------- */\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setLoading(s => ({ ...s, all: true }));\r\n        const res  = await axios.get(apiPath('/products'), { params: { limit: 100, _: Date.now() }});\r\n        const list = toArray(res.data).map(normalizeProduct);\r\n        setAllProducts(list);\r\n        if (!list.length) setErrMsg('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠ API ‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');\r\n      } catch {\r\n        setAllProducts([]);\r\n        setErrMsg('‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');\r\n      } finally {\r\n        setLoading(s => ({ ...s, all: false }));\r\n      }\r\n    })();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"home-container\">\r\n      {/* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ú‡∏π‡∏Å logic) */}\r\n      <div className=\"search-box\">\r\n        <input type=\"text\" placeholder=\"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\" />\r\n        <button className=\"search-btn\">üîç</button>\r\n      </div>\r\n\r\n      {/* ‡πÅ‡∏ö‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå */}\r\n      <section\r\n        className=\"hero\"\r\n        style={{\r\n          backgroundImage: `url(${process.env.PUBLIC_URL + '/p2.png'})`,\r\n          backgroundRepeat: 'no-repeat',\r\n          backgroundPosition: 'center',\r\n          backgroundSize: 'cover',\r\n        }}\r\n      >\r\n        <div className=\"hero-text\">\r\n          <h1>‚Äú<span className=\"highlight\">‡∏£‡πâ‡∏≤‡∏ô‡∏õ‡∏£‡∏≤‡∏ä‡∏ç‡πå‡πÅ‡∏°‡πà‡πÇ‡∏à‡πâ</span>‚Äù</h1>\r\n          <p>‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ú‡∏•‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢ ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏õ‡∏•‡∏π‡∏Å ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 100 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>\r\n        </div>\r\n      </section>\r\n\r\n      {/* ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏•‡∏±‡∏Å 2 ‡∏õ‡∏∏‡πà‡∏°‡∏à‡∏≤‡∏Å DB */}\r\n      <section className=\"categories\">\r\n        {(loading.cat ? FALLBACK_CATEGORIES : categories).map((cat, idx) => (\r\n          <Link\r\n            key={cat.id || `cat-${idx}`}\r\n            to={`/products?category=${encodeURIComponent(cat.slug || cat.id)}`}\r\n            className=\"category-card\"\r\n            title={cat.name}\r\n          >\r\n            <img\r\n              src={cat.image}\r\n              alt={cat.name}\r\n              onError={(e) => {\r\n                e.currentTarget.src =\r\n                  (cat.slug || '').toLowerCase().includes('tool')\r\n                    ? process.env.PUBLIC_URL + '/opakorn.jpg'\r\n                    : process.env.PUBLIC_URL + '/tonmai.jpg';\r\n              }}\r\n            />\r\n            <p>{cat.name}</p>\r\n          </Link>\r\n        ))}\r\n      </section>\r\n\r\n      {/* ‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ (5 ‡∏ä‡∏¥‡πâ‡∏ô) */}\r\n      {bestSellers.length > 0 && (\r\n        <section className=\"best-sellers\">\r\n          <h2>üåü ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ</h2>\r\n          <div className=\"product-grid\">\r\n            {(loading.best ? [] : bestSellers).map((item, idx) => (\r\n              <div className=\"product-card\" key={item.id ?? `best-${idx}`}>\r\n                <img\r\n                  src={item.img}\r\n                  alt={item.name}\r\n                  onError={(e) => { e.currentTarget.src = process.env.PUBLIC_URL + '/logo.png'; }}\r\n                />\r\n                <h3>{item.name}</h3>\r\n                <p>{Number(item.price || 0).toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>\r\n                <button className=\"btn-add\" onClick={() => addToCart(item)}>\r\n                  + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {/* ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á) */}\r\n      <section className=\"all-products\">\r\n        <h2>üõí ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>\r\n        {loading.all ? (\r\n          <div className=\"info-inline\">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‚Ä¶</div>\r\n        ) : allProducts.length ? (\r\n          <div className=\"product-grid\">\r\n            {allProducts.map((p, idx) => (\r\n              <div className=\"product-card\" key={p.id ?? `all-${idx}`}>\r\n                <img\r\n                  src={p.img}\r\n                  alt={p.name}\r\n                  onError={(e) => { e.currentTarget.src = process.env.PUBLIC_URL + '/logo.png'; }}\r\n                />\r\n                <h3>{p.name}</h3>\r\n                <p>{Number(p.price || 0).toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>\r\n                <button className=\"btn-add\" onClick={() => addToCart(p)}>\r\n                  + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"info-inline\">{errMsg || '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤'}</div>\r\n        )}\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}