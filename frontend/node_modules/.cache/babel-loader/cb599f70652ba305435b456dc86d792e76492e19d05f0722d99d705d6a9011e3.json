{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\admin\\\\VariantsManager.js\",\n  _s = $RefreshSig$();\n// src/admin/VariantsManager.js\n// ======================================================================\n// VariantsManager — Shopee-style editor (รองรับ 3 ตัวเลือก)\n// - แสดงหัว: ชื่อสินค้า + รหัสสินค้า (ใหญ่)\n// - ตัวเลือก 1–3 (ชิป + Enter เพื่อเพิ่ม)\n// - ตารางคอมโบ: รูป | ตัวเลือก1 | ตัวเลือก2 | ตัวเลือก3 | ราคา | SKU\n// - เติม SKU ภาษาอังกฤษอัตโนมัติ และใส่ Category ลงใน SKU\n// - บันทึกแบบ batch -> POST /variants/products/:id/upsert-batch\n// ======================================================================\n\nimport React, { useEffect, useMemo, useRef, useState, useCallback } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { api, path } from \"../lib/api\";\nimport \"./VariantsManager.css\";\n\n/* ---------- Helpers ---------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_ORIGIN = (() => {\n  try {\n    var _api$defaults;\n    return new URL((api === null || api === void 0 ? void 0 : (_api$defaults = api.defaults) === null || _api$defaults === void 0 ? void 0 : _api$defaults.baseURL) || \"/\", window.location.href).origin;\n  } catch {\n    return \"\";\n  }\n})();\nconst authHeader = () => {\n  const t = localStorage.getItem(\"token\");\n  return t ? {\n    Authorization: `Bearer ${t}`\n  } : {};\n};\nconst absUrl = u => {\n  if (!u) return u;\n  const s = String(u).replace(/\\\\/g, \"/\");\n  if (/^https?:\\/\\//i.test(s)) return s;\n  if (s.startsWith(\"/uploads\")) return API_ORIGIN + s;\n  if (s.startsWith(\"uploads/\")) return API_ORIGIN + \"/\" + s;\n  return s;\n};\nconst rand2 = () => String(Math.floor(Math.random() * 99) + 1).padStart(2, \"0\");\n\n/* เบสิก translit → อังกฤษสั้น ๆ สำหรับคำไทยยอดฮิต */\nconst TH_SHORT = {\n  \"แดง\": \"RED\",\n  \"น้ำเงิน\": \"BLU\",\n  \"ฟ้า\": \"BLU\",\n  \"เขียว\": \"GRN\",\n  \"เหลือง\": \"YEL\",\n  \"ม่วง\": \"PUR\",\n  \"ดำ\": \"BLK\",\n  \"ขาว\": \"WHT\",\n  \"ชมพู\": \"PNK\",\n  \"ส้ม\": \"ORG\",\n  \"น้ำตาล\": \"BRN\",\n  \"เทา\": \"GRY\",\n  \"ทอง\": \"GLD\",\n  \"เงิน\": \"SLV\",\n  \"ต้นไม้\": \"PLT\",\n  \"อุปกรณ์\": \"TOOL\"\n};\nconst asciiize = s => (s || \"\").normalize(\"NFKD\").replace(/[^\\x00-\\x7E]+/g, \"\") // ตัด non-ASCII\n.replace(/[^A-Za-z0-9]+/g, \"\") // เอาเฉพาะตัวอักษร/ตัวเลข\n.toUpperCase();\nconst toENShort = (txt, fallbackLen = 3) => {\n  const t = String(txt || \"\").trim();\n  if (!t) return \"\";\n  if (TH_SHORT[t]) return TH_SHORT[t];\n  const a = asciiize(t);\n  if (a) return a.slice(0, Math.max(1, fallbackLen));\n  // ถ้ายังไม่ได้อะไรเลย ให้ดึงเลขออกมาใช้ (เช่น \"150\")\n  const num = (t.match(/\\d+/) || [])[0] || \"\";\n  return num || \"\";\n};\nconst basename = (u = \"\") => u.split(\"?\")[0].split(\"/\").pop() || u;\n\n/* ---------- Upload ---------- */\nconst tryUpload = async file => {\n  const fd = new FormData();\n  fd.append(\"file\", file);\n  const {\n    data\n  } = await api.post(path(\"/upload\"), fd, {\n    headers: {\n      ...authHeader(),\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  });\n  return (data === null || data === void 0 ? void 0 : data.url) || (data === null || data === void 0 ? void 0 : data.path) || (data === null || data === void 0 ? void 0 : data.imageUrl) || (data === null || data === void 0 ? void 0 : data.Location) || (data === null || data === void 0 ? void 0 : data.location) || null;\n};\n\n/* ---------- Normalize product (ดึงชื่อ/โค้ด/หมวด) ---------- */\nconst pickStr = (...xs) => {\n  var _xs$find;\n  return ((_xs$find = xs.find(v => typeof v === \"string\" && v.trim())) === null || _xs$find === void 0 ? void 0 : _xs$find.trim()) || \"\";\n};\nconst normalizeProduct = raw => {\n  if (!raw) return null;\n  const d = raw.data || raw.item || raw.product || raw.result || raw;\n  return d;\n};\n\n/* ====================================================================== */\nexport default function VariantsManager() {\n  _s();\n  const {\n    id,\n    productId: pid\n  } = useParams();\n  const productId = Number(id || pid);\n\n  /* product info for header + SKU */\n  const [product, setProduct] = useState(null);\n  const [categoryName, setCategoryName] = useState(\"\");\n\n  /* options (3 levels) */\n  const [opt1Name, setOpt1Name] = useState(\"สี\");\n  const [opt2Name, setOpt2Name] = useState(\"ขนาด\");\n  const [opt3Name, setOpt3Name] = useState(\"\"); // optional\n  const [opt1Values, setOpt1Values] = useState([]);\n  const [opt2Values, setOpt2Values] = useState([]);\n  const [opt3Values, setOpt3Values] = useState([]);\n\n  /* generated combos (rows) */\n  const [rows, setRows] = useState([]);\n  const [saving, setSaving] = useState(false);\n  const [msg, setMsg] = useState(\"\");\n\n  /* ---------- Load product info (หลาย endpoint เผื่อ schema ต่าง) ---------- */\n  const loadProduct = useCallback(async () => {\n    var _p, _p2, _p3;\n    let p = null;\n    try {\n      p = normalizeProduct(await api.get(path(`/admin/products/${productId}`)).then(r => r.data));\n    } catch {}\n    if (!p) {\n      try {\n        p = normalizeProduct(await api.get(path(`/products/${productId}`)).then(r => r.data));\n      } catch {}\n    }\n    if (!p) {\n      try {\n        var _r$data;\n        const r = await api.get(path(`/admin/products`), {\n          params: {\n            include_archived: 1\n          }\n        });\n        const arr = Array.isArray(r === null || r === void 0 ? void 0 : (_r$data = r.data) === null || _r$data === void 0 ? void 0 : _r$data.items) ? r.data.items : Array.isArray(r === null || r === void 0 ? void 0 : r.data) ? r.data : [];\n        p = (arr || []).find(x => Number(x.product_id) === productId) || null;\n      } catch {}\n    }\n    setProduct(p || null);\n    setCategoryName(pickStr((_p = p) === null || _p === void 0 ? void 0 : _p.category_en, (_p2 = p) === null || _p2 === void 0 ? void 0 : _p2.category_name, (_p3 = p) === null || _p3 === void 0 ? void 0 : _p3.CategoryName));\n  }, [productId]);\n  useEffect(() => {\n    loadProduct();\n  }, [loadProduct]);\n  const productName = useMemo(() => pickStr(product === null || product === void 0 ? void 0 : product.product_name, product === null || product === void 0 ? void 0 : product.name, product === null || product === void 0 ? void 0 : product.title, product === null || product === void 0 ? void 0 : product.name_en, product === null || product === void 0 ? void 0 : product.product_name_en), [product]);\n  const productCode = useMemo(() => pickStr(product === null || product === void 0 ? void 0 : product.product_code, product === null || product === void 0 ? void 0 : product.code, product === null || product === void 0 ? void 0 : product.sku_prefix, product === null || product === void 0 ? void 0 : product.sku, `P${productId}`), [product, productId]);\n\n  /* ---------- Build combos when values change ---------- */\n  useEffect(() => {\n    const v1 = opt1Values.length ? opt1Values : [null];\n    const v2 = opt2Values.length ? opt2Values : [null];\n    const v3 = opt3Values.length ? opt3Values : [null];\n    const combos = [];\n    for (const a of v1) for (const b of v2) for (const c of v3) {\n      combos.push({\n        opt1: a,\n        opt2: b,\n        opt3: c,\n        price: \"\",\n        sku: \"\",\n        image: null\n      });\n    }\n    setRows(combos);\n  }, [opt1Values, opt2Values, opt3Values]);\n\n  /* ---------- tag helpers ---------- */\n  const addTag = (list, setList, txt) => {\n    const v = String(txt || \"\").trim();\n    if (!v) return;\n    if (!list.some(x => x.toLowerCase() === v.toLowerCase())) setList([...list, v]);\n  };\n  const removeTag = (list, setList, idx) => setList(list.filter((_, i) => i !== idx));\n\n  /* ---------- Upload per-row image ---------- */\n  const onUploadRowImage = async (file, idx) => {\n    if (!file) return;\n    try {\n      const url = await tryUpload(file);\n      setRows(prev => {\n        const a = [...prev];\n        a[idx] = {\n          ...a[idx],\n          image: url\n        };\n        return a;\n      });\n    } catch (e) {\n      alert(\"Upload failed\");\n    }\n  };\n\n  /* ---------- Auto SKU (EN + include Category) ---------- */\n  const autoSku = () => {\n    const cat = toENShort(categoryName || \"\", 3) || \"CAT\";\n    const prod = toENShort(productCode || `P${productId}`, 3);\n    setRows(prev => prev.map((r, i) => {\n      const p1 = r.opt1 ? toENShort(r.opt1) : \"\";\n      const p2 = r.opt2 ? toENShort(r.opt2) : \"\";\n      const p3 = r.opt3 ? toENShort(r.opt3) : \"\";\n      const parts = [cat, prod, p1, p2, p3].filter(Boolean);\n      return {\n        ...r,\n        sku: parts.join(\"-\") + \"-\" + rand2()\n      };\n    }));\n  };\n\n  /* ---------- Save (batch) ---------- */\n  const saveAll = async () => {\n    setSaving(true);\n    try {\n      const items = rows.map(r => ({\n        details: [r.opt1 ? {\n          name: opt1Name,\n          value: r.opt1\n        } : null, r.opt2 ? {\n          name: opt2Name,\n          value: r.opt2\n        } : null, r.opt3 && opt3Name ? {\n          name: opt3Name,\n          value: r.opt3\n        } : null].filter(Boolean),\n        sku: r.sku || null,\n        price: r.price ? Number(r.price) : null,\n        images: r.image ? [r.image] : []\n      }));\n      await api.post(path(`/variants/products/${productId}/upsert-batch`), {\n        items\n      }, {\n        headers: authHeader()\n      });\n      setMsg(\"✅ Saved\");\n      setTimeout(() => setMsg(\"\"), 2000);\n    } catch (e) {\n      console.error(e);\n      alert(\"❌ Save failed\");\n    } finally {\n      setSaving(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"vm-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vm-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-product-name\",\n          children: productName || `#${productId}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-product-code\",\n          children: productCode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/admin\",\n        className: \"vm-back\",\n        children: \"\\u2190 \\u0E01\\u0E25\\u0E31\\u0E1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), msg && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-msg\",\n      children: msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-options\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vm-opt\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E17\\u0E35\\u0E48 1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: opt1Name,\n          onChange: e => setOpt1Name(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-chips\",\n          children: [opt1Values.map((v, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"vm-chip\",\n            children: [v, /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeTag(opt1Values, setOpt1Values, i),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C\\u0E41\\u0E25\\u0E49\\u0E27 Enter\",\n            onKeyDown: e => {\n              if (e.key === 'Enter') {\n                e.preventDefault();\n                addTag(opt1Values, setOpt1Values, e.currentTarget.value);\n                e.currentTarget.value = '';\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vm-opt\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E17\\u0E35\\u0E48 2 (\\u0E16\\u0E49\\u0E32\\u0E21\\u0E35)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: opt2Name,\n          onChange: e => setOpt2Name(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-chips\",\n          children: [opt2Values.map((v, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"vm-chip\",\n            children: [v, /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeTag(opt2Values, setOpt2Values, i),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C\\u0E41\\u0E25\\u0E49\\u0E27 Enter\",\n            onKeyDown: e => {\n              if (e.key === 'Enter') {\n                e.preventDefault();\n                addTag(opt2Values, setOpt2Values, e.currentTarget.value);\n                e.currentTarget.value = '';\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vm-opt\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E17\\u0E35\\u0E48 3 (\\u0E16\\u0E49\\u0E32\\u0E21\\u0E35)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: opt3Name,\n          onChange: e => setOpt3Name(e.target.value),\n          placeholder: \"\\u0E40\\u0E0A\\u0E48\\u0E19 \\u0E27\\u0E31\\u0E2A\\u0E14\\u0E38 / \\u0E23\\u0E38\\u0E48\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-chips\",\n          children: [opt3Values.map((v, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"vm-chip\",\n            children: [v, /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeTag(opt3Values, setOpt3Values, i),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C\\u0E41\\u0E25\\u0E49\\u0E27 Enter\",\n            onKeyDown: e => {\n              if (e.key === 'Enter') {\n                e.preventDefault();\n                addTag(opt3Values, setOpt3Values, e.currentTarget.value);\n                e.currentTarget.value = '';\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-table-wrap\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"vm-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: opt1Name || \"ตัวเลือก 1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: opt2Name || \"ตัวเลือก 2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: opt3Name || \"ตัวเลือก 3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E23\\u0E32\\u0E04\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"SKU (EN)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: rows.map((r, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: absUrl(r.image),\n                alt: \"\",\n                className: \"vm-thumb\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"vm-upload\",\n                children: [\"+\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"image/*\",\n                  onChange: e => {\n                    var _e$target$files;\n                    return onUploadRowImage((_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0], i);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.opt1 || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.opt2 || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.opt3 || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                min: \"0\",\n                placeholder: \"\\u0E44\\u0E21\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E38\",\n                value: r.price,\n                onChange: e => {\n                  const v = e.target.value;\n                  setRows(prev => {\n                    const a = [...prev];\n                    a[i] = {\n                      ...a[i],\n                      price: v\n                    };\n                    return a;\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"SKU\",\n                value: r.sku,\n                onChange: e => {\n                  const v = e.target.value;\n                  setRows(prev => {\n                    const a = [...prev];\n                    a[i] = {\n                      ...a[i],\n                      sku: v\n                    };\n                    return a;\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        onClick: autoSku,\n        disabled: saving,\n        children: \"\\u0E40\\u0E15\\u0E34\\u0E21 SKU \\u0E2D\\u0E31\\u0E15\\u0E42\\u0E19\\u0E21\\u0E31\\u0E15\\u0E34\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary\",\n        onClick: saveAll,\n        disabled: saving,\n        children: \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-hint\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u2022 \\u0E01\\u0E14 Enter \\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E04\\u0E48\\u0E32 (\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E44\\u0E14\\u0E49\\u0E2B\\u0E25\\u0E32\\u0E22\\u0E04\\u0E48\\u0E32)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u2022 \\u0E16\\u0E49\\u0E32\\u0E2D\\u0E22\\u0E32\\u0E01\\u0E43\\u0E2B\\u0E49 SKU \\u0E40\\u0E1B\\u0E47\\u0E19\\u0E2D\\u0E31\\u0E07\\u0E01\\u0E24\\u0E29 \\u0E0A\\u0E48\\u0E27\\u0E22\\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C\\u0E04\\u0E48\\u0E32\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E40\\u0E1B\\u0E47\\u0E19\\u0E2D\\u0E31\\u0E07\\u0E01\\u0E24\\u0E29 (\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E08\\u0E30\\u0E22\\u0E48\\u0E2D\\u0E43\\u0E2B\\u0E49\\u0E41\\u0E1A\\u0E1A EN \\u0E2D\\u0E31\\u0E15\\u0E42\\u0E19\\u0E21\\u0E31\\u0E15\\u0E34)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u2022 \\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E08\\u0E30\\u0E43\\u0E2A\\u0E48 Category + \\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 + \\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01 \\u0E25\\u0E07\\u0E43\\u0E19 SKU \\u0E42\\u0E14\\u0E22\\u0E2D\\u0E31\\u0E15\\u0E42\\u0E19\\u0E21\\u0E31\\u0E15\\u0E34\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 5\n  }, this);\n}\n_s(VariantsManager, \"e6xwCqc05GAqLppwp8ij/m630PI=\", false, function () {\n  return [useParams];\n});\n_c = VariantsManager;\nvar _c;\n$RefreshReg$(_c, \"VariantsManager\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useCallback","useParams","Link","api","path","jsxDEV","_jsxDEV","API_ORIGIN","_api$defaults","URL","defaults","baseURL","window","location","href","origin","authHeader","t","localStorage","getItem","Authorization","absUrl","u","s","String","replace","test","startsWith","rand2","Math","floor","random","padStart","TH_SHORT","asciiize","normalize","toUpperCase","toENShort","txt","fallbackLen","trim","a","slice","max","num","match","basename","split","pop","tryUpload","file","fd","FormData","append","data","post","headers","url","imageUrl","Location","pickStr","xs","_xs$find","find","v","normalizeProduct","raw","d","item","product","result","VariantsManager","_s","id","productId","pid","Number","setProduct","categoryName","setCategoryName","opt1Name","setOpt1Name","opt2Name","setOpt2Name","opt3Name","setOpt3Name","opt1Values","setOpt1Values","opt2Values","setOpt2Values","opt3Values","setOpt3Values","rows","setRows","saving","setSaving","msg","setMsg","loadProduct","_p","_p2","_p3","p","get","then","r","_r$data","params","include_archived","arr","Array","isArray","items","x","product_id","category_en","category_name","CategoryName","productName","product_name","name","title","name_en","product_name_en","productCode","product_code","code","sku_prefix","sku","v1","length","v2","v3","combos","b","c","push","opt1","opt2","opt3","price","image","addTag","list","setList","some","toLowerCase","removeTag","idx","filter","_","i","onUploadRowImage","prev","e","alert","autoSku","cat","prod","map","p1","p2","p3","parts","Boolean","join","saveAll","details","value","images","setTimeout","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","onChange","target","onClick","placeholder","onKeyDown","key","preventDefault","currentTarget","src","alt","type","accept","_e$target$files","files","min","disabled","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/admin/VariantsManager.js"],"sourcesContent":["// src/admin/VariantsManager.js\r\n// ======================================================================\r\n// VariantsManager — Shopee-style editor (รองรับ 3 ตัวเลือก)\r\n// - แสดงหัว: ชื่อสินค้า + รหัสสินค้า (ใหญ่)\r\n// - ตัวเลือก 1–3 (ชิป + Enter เพื่อเพิ่ม)\r\n// - ตารางคอมโบ: รูป | ตัวเลือก1 | ตัวเลือก2 | ตัวเลือก3 | ราคา | SKU\r\n// - เติม SKU ภาษาอังกฤษอัตโนมัติ และใส่ Category ลงใน SKU\r\n// - บันทึกแบบ batch -> POST /variants/products/:id/upsert-batch\r\n// ======================================================================\r\n\r\nimport React, { useEffect, useMemo, useRef, useState, useCallback } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport { api, path } from \"../lib/api\";\r\nimport \"./VariantsManager.css\";\r\n\r\n/* ---------- Helpers ---------- */\r\nconst API_ORIGIN = (() => {\r\n  try { return new URL(api?.defaults?.baseURL || \"/\", window.location.href).origin; }\r\n  catch { return \"\"; }\r\n})();\r\n\r\nconst authHeader = () => {\r\n  const t = localStorage.getItem(\"token\");\r\n  return t ? { Authorization: `Bearer ${t}` } : {};\r\n};\r\n\r\nconst absUrl = (u) => {\r\n  if (!u) return u;\r\n  const s = String(u).replace(/\\\\/g, \"/\");\r\n  if (/^https?:\\/\\//i.test(s)) return s;\r\n  if (s.startsWith(\"/uploads\")) return API_ORIGIN + s;\r\n  if (s.startsWith(\"uploads/\")) return API_ORIGIN + \"/\" + s;\r\n  return s;\r\n};\r\n\r\nconst rand2 = () => String(Math.floor(Math.random() * 99) + 1).padStart(2, \"0\");\r\n\r\n/* เบสิก translit → อังกฤษสั้น ๆ สำหรับคำไทยยอดฮิต */\r\nconst TH_SHORT = {\r\n  \"แดง\": \"RED\", \"น้ำเงิน\": \"BLU\", \"ฟ้า\": \"BLU\", \"เขียว\": \"GRN\", \"เหลือง\": \"YEL\",\r\n  \"ม่วง\": \"PUR\", \"ดำ\": \"BLK\", \"ขาว\": \"WHT\", \"ชมพู\": \"PNK\", \"ส้ม\": \"ORG\",\r\n  \"น้ำตาล\": \"BRN\", \"เทา\": \"GRY\", \"ทอง\": \"GLD\", \"เงิน\": \"SLV\",\r\n  \"ต้นไม้\": \"PLT\", \"อุปกรณ์\": \"TOOL\"\r\n};\r\nconst asciiize = (s) => (s || \"\")\r\n  .normalize(\"NFKD\")\r\n  .replace(/[^\\x00-\\x7E]+/g, \"\")      // ตัด non-ASCII\r\n  .replace(/[^A-Za-z0-9]+/g, \"\")      // เอาเฉพาะตัวอักษร/ตัวเลข\r\n  .toUpperCase();\r\n\r\nconst toENShort = (txt, fallbackLen = 3) => {\r\n  const t = String(txt || \"\").trim();\r\n  if (!t) return \"\";\r\n  if (TH_SHORT[t]) return TH_SHORT[t];\r\n  const a = asciiize(t);\r\n  if (a) return a.slice(0, Math.max(1, fallbackLen));\r\n  // ถ้ายังไม่ได้อะไรเลย ให้ดึงเลขออกมาใช้ (เช่น \"150\")\r\n  const num = (t.match(/\\d+/) || [])[0] || \"\";\r\n  return num || \"\";\r\n};\r\n\r\nconst basename = (u = \"\") => (u.split(\"?\")[0].split(\"/\").pop() || u);\r\n\r\n/* ---------- Upload ---------- */\r\nconst tryUpload = async (file) => {\r\n  const fd = new FormData();\r\n  fd.append(\"file\", file);\r\n  const { data } = await api.post(path(\"/upload\"), fd, {\r\n    headers: { ...authHeader(), \"Content-Type\": \"multipart/form-data\" },\r\n  });\r\n  return data?.url || data?.path || data?.imageUrl || data?.Location || data?.location || null;\r\n};\r\n\r\n/* ---------- Normalize product (ดึงชื่อ/โค้ด/หมวด) ---------- */\r\nconst pickStr = (...xs) => xs.find((v) => typeof v === \"string\" && v.trim())?.trim() || \"\";\r\nconst normalizeProduct = (raw) => {\r\n  if (!raw) return null;\r\n  const d = raw.data || raw.item || raw.product || raw.result || raw;\r\n  return d;\r\n};\r\n\r\n/* ====================================================================== */\r\nexport default function VariantsManager() {\r\n  const { id, productId: pid } = useParams();\r\n  const productId = Number(id || pid);\r\n\r\n  /* product info for header + SKU */\r\n  const [product, setProduct] = useState(null);\r\n  const [categoryName, setCategoryName] = useState(\"\");\r\n\r\n  /* options (3 levels) */\r\n  const [opt1Name, setOpt1Name] = useState(\"สี\");\r\n  const [opt2Name, setOpt2Name] = useState(\"ขนาด\");\r\n  const [opt3Name, setOpt3Name] = useState(\"\");        // optional\r\n  const [opt1Values, setOpt1Values] = useState([]);\r\n  const [opt2Values, setOpt2Values] = useState([]);\r\n  const [opt3Values, setOpt3Values] = useState([]);\r\n\r\n  /* generated combos (rows) */\r\n  const [rows, setRows] = useState([]);\r\n  const [saving, setSaving] = useState(false);\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  /* ---------- Load product info (หลาย endpoint เผื่อ schema ต่าง) ---------- */\r\n  const loadProduct = useCallback(async () => {\r\n    let p = null;\r\n    try { p = normalizeProduct(await api.get(path(`/admin/products/${productId}`)).then(r=>r.data)); } catch {}\r\n    if (!p) { try { p = normalizeProduct(await api.get(path(`/products/${productId}`)).then(r=>r.data)); } catch {} }\r\n    if (!p) {\r\n      try {\r\n        const r = await api.get(path(`/admin/products`), { params: { include_archived: 1 }});\r\n        const arr = Array.isArray(r?.data?.items) ? r.data.items : (Array.isArray(r?.data) ? r.data : []);\r\n        p = (arr || []).find(x => Number(x.product_id) === productId) || null;\r\n      } catch {}\r\n    }\r\n    setProduct(p || null);\r\n    setCategoryName(pickStr(p?.category_en, p?.category_name, p?.CategoryName));\r\n  }, [productId]);\r\n\r\n  useEffect(() => { loadProduct(); }, [loadProduct]);\r\n\r\n  const productName = useMemo(() =>\r\n    pickStr(\r\n      product?.product_name, product?.name, product?.title,\r\n      product?.name_en, product?.product_name_en\r\n    ), [product]\r\n  );\r\n  const productCode = useMemo(() =>\r\n    pickStr(\r\n      product?.product_code, product?.code, product?.sku_prefix, product?.sku, `P${productId}`\r\n    ), [product, productId]\r\n  );\r\n\r\n  /* ---------- Build combos when values change ---------- */\r\n  useEffect(() => {\r\n    const v1 = opt1Values.length ? opt1Values : [null];\r\n    const v2 = opt2Values.length ? opt2Values : [null];\r\n    const v3 = opt3Values.length ? opt3Values : [null];\r\n    const combos = [];\r\n    for (const a of v1) for (const b of v2) for (const c of v3) {\r\n      combos.push({ opt1: a, opt2: b, opt3: c, price: \"\", sku: \"\", image: null });\r\n    }\r\n    setRows(combos);\r\n  }, [opt1Values, opt2Values, opt3Values]);\r\n\r\n  /* ---------- tag helpers ---------- */\r\n  const addTag = (list, setList, txt) => {\r\n    const v = String(txt || \"\").trim(); if (!v) return;\r\n    if (!list.some(x => x.toLowerCase() === v.toLowerCase())) setList([...list, v]);\r\n  };\r\n  const removeTag = (list, setList, idx) => setList(list.filter((_, i) => i !== idx));\r\n\r\n  /* ---------- Upload per-row image ---------- */\r\n  const onUploadRowImage = async (file, idx) => {\r\n    if (!file) return;\r\n    try {\r\n      const url = await tryUpload(file);\r\n      setRows(prev => {\r\n        const a = [...prev]; a[idx] = { ...a[idx], image: url }; return a;\r\n      });\r\n    } catch (e) { alert(\"Upload failed\"); }\r\n  };\r\n\r\n  /* ---------- Auto SKU (EN + include Category) ---------- */\r\n  const autoSku = () => {\r\n    const cat = toENShort(categoryName || \"\", 3) || \"CAT\";\r\n    const prod = toENShort(productCode || `P${productId}`, 3);\r\n    setRows(prev => prev.map((r, i) => {\r\n      const p1 = r.opt1 ? toENShort(r.opt1) : \"\";\r\n      const p2 = r.opt2 ? toENShort(r.opt2) : \"\";\r\n      const p3 = r.opt3 ? toENShort(r.opt3) : \"\";\r\n      const parts = [cat, prod, p1, p2, p3].filter(Boolean);\r\n      return { ...r, sku: parts.join(\"-\") + \"-\" + rand2() };\r\n    }));\r\n  };\r\n\r\n  /* ---------- Save (batch) ---------- */\r\n  const saveAll = async () => {\r\n    setSaving(true);\r\n    try {\r\n      const items = rows.map((r) => ({\r\n        details: [\r\n          r.opt1 ? { name: opt1Name, value: r.opt1 } : null,\r\n          r.opt2 ? { name: opt2Name, value: r.opt2 } : null,\r\n          r.opt3 && opt3Name ? { name: opt3Name, value: r.opt3 } : null\r\n        ].filter(Boolean),\r\n        sku: r.sku || null,\r\n        price: r.price ? Number(r.price) : null,\r\n        images: r.image ? [r.image] : []\r\n      }));\r\n      await api.post(path(`/variants/products/${productId}/upsert-batch`), { items }, { headers: authHeader() });\r\n      setMsg(\"✅ Saved\");\r\n      setTimeout(() => setMsg(\"\"), 2000);\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(\"❌ Save failed\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"vm-page\">\r\n      {/* Header: ชื่อสินค้า + รหัสสินค้า ตัวใหญ่ */}\r\n      <div className=\"vm-header\">\r\n        <div className=\"vm-title\">\r\n          <div className=\"vm-product-name\">{productName || `#${productId}`}</div>\r\n          <div className=\"vm-product-code\">{productCode}</div>\r\n        </div>\r\n        <Link to=\"/admin\" className=\"vm-back\">← กลับ</Link>\r\n      </div>\r\n\r\n      {msg && <div className=\"vm-msg\">{msg}</div>}\r\n\r\n      {/* Options */}\r\n      <div className=\"vm-options\">\r\n        {/* option 1 */}\r\n        <div className=\"vm-opt\">\r\n          <label>ตัวเลือกที่ 1</label>\r\n          <input value={opt1Name} onChange={(e)=>setOpt1Name(e.target.value)} />\r\n          <div className=\"vm-chips\">\r\n            {opt1Values.map((v,i)=>(\r\n              <span key={i} className=\"vm-chip\">{v}\r\n                <button onClick={()=>removeTag(opt1Values,setOpt1Values,i)}>×</button>\r\n              </span>\r\n            ))}\r\n            <input placeholder=\"พิมพ์แล้ว Enter\"\r\n              onKeyDown={(e)=>{ if(e.key==='Enter'){ e.preventDefault(); addTag(opt1Values,setOpt1Values,e.currentTarget.value); e.currentTarget.value=''; } }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* option 2 */}\r\n        <div className=\"vm-opt\">\r\n          <label>ตัวเลือกที่ 2 (ถ้ามี)</label>\r\n          <input value={opt2Name} onChange={(e)=>setOpt2Name(e.target.value)} />\r\n          <div className=\"vm-chips\">\r\n            {opt2Values.map((v,i)=>(\r\n              <span key={i} className=\"vm-chip\">{v}\r\n                <button onClick={()=>removeTag(opt2Values,setOpt2Values,i)}>×</button>\r\n              </span>\r\n            ))}\r\n            <input placeholder=\"พิมพ์แล้ว Enter\"\r\n              onKeyDown={(e)=>{ if(e.key==='Enter'){ e.preventDefault(); addTag(opt2Values,setOpt2Values,e.currentTarget.value); e.currentTarget.value=''; } }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* option 3 */}\r\n        <div className=\"vm-opt\">\r\n          <label>ตัวเลือกที่ 3 (ถ้ามี)</label>\r\n          <input value={opt3Name} onChange={(e)=>setOpt3Name(e.target.value)} placeholder=\"เช่น วัสดุ / รุ่น\" />\r\n          <div className=\"vm-chips\">\r\n            {opt3Values.map((v,i)=>(\r\n              <span key={i} className=\"vm-chip\">{v}\r\n                <button onClick={()=>removeTag(opt3Values,setOpt3Values,i)}>×</button>\r\n              </span>\r\n            ))}\r\n            <input placeholder=\"พิมพ์แล้ว Enter\"\r\n              onKeyDown={(e)=>{ if(e.key==='Enter'){ e.preventDefault(); addTag(opt3Values,setOpt3Values,e.currentTarget.value); e.currentTarget.value=''; } }} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"vm-table-wrap\">\r\n        <table className=\"vm-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>รูปภาพ</th>\r\n              <th>{opt1Name || \"ตัวเลือก 1\"}</th>\r\n              <th>{opt2Name || \"ตัวเลือก 2\"}</th>\r\n              <th>{opt3Name || \"ตัวเลือก 3\"}</th>\r\n              <th>ราคา</th>\r\n              <th>SKU (EN)</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {rows.map((r, i)=>(\r\n              <tr key={i}>\r\n                <td>\r\n                  {r.image ? (\r\n                    <img src={absUrl(r.image)} alt=\"\" className=\"vm-thumb\" />\r\n                  ) : (\r\n                    <label className=\"vm-upload\">\r\n                      +\r\n                      <input type=\"file\" accept=\"image/*\" onChange={(e)=>onUploadRowImage(e.target.files?.[0], i)} />\r\n                    </label>\r\n                  )}\r\n                </td>\r\n                <td>{r.opt1 || \"-\"}</td>\r\n                <td>{r.opt2 || \"-\"}</td>\r\n                <td>{r.opt3 || \"-\"}</td>\r\n                <td>\r\n                  <input type=\"number\" min=\"0\" placeholder=\"ไม่ระบุ\" value={r.price}\r\n                    onChange={(e)=>{ const v=e.target.value; setRows(prev=>{ const a=[...prev]; a[i]={...a[i],price:v}; return a; }); }} />\r\n                </td>\r\n                <td>\r\n                  <input placeholder=\"SKU\" value={r.sku}\r\n                    onChange={(e)=>{ const v=e.target.value; setRows(prev=>{ const a=[...prev]; a[i]={...a[i],sku:v}; return a; }); }} />\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"vm-actions\">\r\n        <button className=\"btn\" onClick={autoSku} disabled={saving}>เติม SKU อัตโนมัติ</button>\r\n        <button className=\"btn-primary\" onClick={saveAll} disabled={saving}>บันทึกทั้งหมด</button>\r\n      </div>\r\n\r\n      {/* Hints */}\r\n      <div className=\"vm-hint\">\r\n        <p>• กด Enter เพื่อเพิ่มค่า (เพิ่มได้หลายค่า)</p>\r\n        <p>• ถ้าอยากให้ SKU เป็นอังกฤษ ช่วยพิมพ์ค่าตัวเลือกเป็นอังกฤษ (หรือระบบจะย่อให้แบบ EN อัตโนมัติ)</p>\r\n        <p>• ระบบจะใส่ Category + รหัสสินค้า + ตัวเลือก ลงใน SKU โดยอัตโนมัติ</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}