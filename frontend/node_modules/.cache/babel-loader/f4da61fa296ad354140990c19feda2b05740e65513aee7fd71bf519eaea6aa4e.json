{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\admin\\\\VariantsManager.js\",\n  _s = $RefreshSig$();\n// src/admin/VariantsManager.js\n// ======================================================================\n// จัดการตัวเลือก (Options/Values) และ Variants ของสินค้า\n// - ดึงชื่อสินค้า + options + variants จาก backend\n// - CRUD options/values/variants\n// - ตาราง Variants แสดงเป็น \"รายละเอียดที่ 1/2/3...\" ไม่ใช่ชื่อจริง\n// - ปุ่ม \"+ เพิ่มรายละเอียด\" เพิ่ม option ได้ไม่จำกัด\n// ======================================================================\n\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport axios from \"axios\";\n\n// helper: JWT auth header\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst authHeader = () => {\n  const t = localStorage.getItem(\"token\");\n  return t ? {\n    Authorization: `Bearer ${t}`\n  } : {};\n};\n\n// helper: upload รูป\nasync function tryUpload(file) {\n  const fd = new FormData();\n  fd.append(\"file\", file);\n  const {\n    data\n  } = await axios.post(\"/api/uploads\", fd, {\n    headers: {\n      ...authHeader(),\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  });\n  if (typeof data === \"string\") return data;\n  return (data === null || data === void 0 ? void 0 : data.url) || (data === null || data === void 0 ? void 0 : data.Location) || (data === null || data === void 0 ? void 0 : data.path) || null;\n}\nexport default function VariantsManager() {\n  _s();\n  const {\n    productId\n  } = useParams();\n  const [product, setProduct] = useState(null);\n  const [options, setOptions] = useState([]);\n  const [variants, setVariants] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [busy, setBusy] = useState(false);\n  const [msg, setMsg] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const fileInputRef = useRef(null);\n\n  // โหลดข้อมูล\n  async function load() {\n    setLoading(true);\n    try {\n      const p = await axios.get(`/api/products/${productId}`);\n      const [{\n        data: opts\n      }, {\n        data: vars\n      }] = await Promise.all([axios.get(`/api/variants/products/${productId}/options`), axios.get(`/api/variants/product/${productId}?active=1`)]);\n      setProduct(p.data);\n      setOptions(opts || []);\n      setVariants(vars || []);\n    } catch (err) {\n      setError(\"โหลดข้อมูลไม่สำเร็จ\");\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  }\n  useEffect(() => {\n    load();\n  }, [productId]);\n\n  // map\n  const optIndex = useMemo(() => {\n    const m = new Map();\n    options.forEach((o, i) => m.set(o.option_id, i));\n    return m;\n  }, [options]);\n  const valName = useMemo(() => {\n    const m = new Map();\n    options.forEach(o => (o.values || []).forEach(v => m.set(v.value_id, v.value_name)));\n    return m;\n  }, [options]);\n  const getCols = row => {\n    const list = row.combo || row.combos || [];\n    const arr = new Array(options.length).fill(\"—\");\n    list.forEach(({\n      option_id,\n      value_id\n    }) => {\n      var _valName$get;\n      const idx = optIndex.get(option_id);\n      if (idx != null) arr[idx] = (_valName$get = valName.get(value_id)) !== null && _valName$get !== void 0 ? _valName$get : String(value_id);\n    });\n    return arr;\n  };\n\n  // actions: option\n  async function addOption() {\n    setBusy(true);\n    try {\n      await axios.post(`/api/variants/products/${productId}/options`, {}, {\n        headers: authHeader()\n      });\n      await load();\n      setMsg(\"เพิ่มรายละเอียดสำเร็จ\");\n    } catch (e) {\n      setError(\"เพิ่มรายละเอียดไม่สำเร็จ\");\n    } finally {\n      setBusy(false);\n    }\n  }\n  async function deleteOption(option_id) {\n    if (!window.confirm(\"ลบรายละเอียดนี้ทั้งหมด?\")) return;\n    setBusy(true);\n    try {\n      await axios.delete(`/api/variants/options/${option_id}`, {\n        headers: authHeader()\n      });\n      await load();\n    } catch {\n      setError(\"ลบรายละเอียดไม่สำเร็จ\");\n    } finally {\n      setBusy(false);\n    }\n  }\n  async function addValue(option_id, value_name) {\n    setBusy(true);\n    try {\n      await axios.post(`/api/variants/options/${option_id}/values`, {\n        value_name\n      }, {\n        headers: authHeader()\n      });\n      await load();\n    } catch {\n      setError(\"เพิ่มค่าไม่สำเร็จ\");\n    } finally {\n      setBusy(false);\n    }\n  }\n  async function deleteValue(value_id) {\n    if (!window.confirm(\"ลบค่านี้?\")) return;\n    setBusy(true);\n    try {\n      await axios.delete(`/api/variants/values/${value_id}`, {\n        headers: authHeader()\n      });\n      await load();\n    } catch {\n      setError(\"ลบค่าไม่สำเร็จ\");\n    } finally {\n      setBusy(false);\n    }\n  }\n\n  // actions: variant\n  async function updateVariant(variant_id, patch) {\n    setBusy(true);\n    try {\n      await axios.put(`/api/variants/${variant_id}`, patch, {\n        headers: authHeader()\n      });\n      await load();\n    } catch {\n      setError(\"อัปเดต Variant ไม่สำเร็จ\");\n    } finally {\n      setBusy(false);\n    }\n  }\n  async function deleteVariant(variant_id) {\n    if (!window.confirm(\"ลบ Variant นี้?\")) return;\n    setBusy(true);\n    try {\n      await axios.delete(`/api/variants/${variant_id}`, {\n        headers: authHeader()\n      });\n      await load();\n    } catch {\n      setError(\"ลบ Variant ไม่สำเร็จ\");\n    } finally {\n      setBusy(false);\n    }\n  }\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold\",\n        children: [\"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01/Variants \\u2014 \", product === null || product === void 0 ? void 0 : product.product_name, \" (#\", productId, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addOption,\n        className: \"ml-4 px-3 py-1 rounded bg-indigo-600 text-white text-sm\",\n        children: \"+ \\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/admin\",\n        className: \"ml-auto text-sm underline\",\n        children: \"\\u2190 \\u0E01\\u0E25\\u0E31\\u0E1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), msg && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-green-700\",\n      children: msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-600\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid md:grid-cols-2 gap-4\",\n      children: options.map((opt, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rounded border p-3 bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [\"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E17\\u0E35\\u0E48 \", i + 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => deleteOption(opt.option_id),\n            className: \"text-red-600 text-xs\",\n            children: \"\\u0E25\\u0E1A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 flex flex-wrap gap-2\",\n          children: (opt.values || []).map(v => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"px-2 py-1 rounded bg-gray-100 text-xs\",\n            children: [v.value_name, /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => deleteValue(v.value_id),\n              className: \"ml-1 text-red-500\",\n              children: \"x\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 19\n            }, this)]\n          }, v.value_id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: `val-${opt.option_id}`,\n            placeholder: \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E04\\u0E48\\u0E32\\u0E43\\u0E2B\\u0E21\\u0E48\",\n            className: \"border rounded px-2 py-1 text-sm flex-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              const el = document.getElementById(`val-${opt.option_id}`);\n              if (el && el.value.trim()) {\n                addValue(opt.option_id, el.value.trim());\n                el.value = \"\";\n              }\n            },\n            className: \"px-2 rounded bg-emerald-600 text-white text-sm\",\n            children: \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this)]\n      }, opt.option_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-x-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full border-collapse text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"bg-gray-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-left\",\n              children: \"#\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this), options.map((_, i) => /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-left\",\n              children: [\"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E17\\u0E35\\u0E48 \", i + 1]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 38\n            }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"\\u0E23\\u0E32\\u0E04\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"\\u0E2A\\u0E15\\u0E47\\u0E2D\\u0E01\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2\",\n              children: \"SKU\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2\",\n              children: \"\\u0E23\\u0E39\\u0E1B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2\",\n              children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2\",\n              children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [variants.map((r, i) => {\n            var _ref, _r$price, _ref2, _r$stock_qty;\n            const cols = getCols(r);\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-t\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2\",\n                children: i + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this), cols.map((c, j) => /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2\",\n                children: c\n              }, j, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 39\n              }, this)), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2 text-right\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  defaultValue: (_ref = (_r$price = r.price) !== null && _r$price !== void 0 ? _r$price : r.final_price) !== null && _ref !== void 0 ? _ref : \"\",\n                  onBlur: e => updateVariant(r.variant_id, {\n                    price: e.target.value\n                  }),\n                  className: \"border rounded px-2 py-1 w-24 text-right\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2 text-right\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  defaultValue: (_ref2 = (_r$stock_qty = r.stock_qty) !== null && _r$stock_qty !== void 0 ? _r$stock_qty : r.stock) !== null && _ref2 !== void 0 ? _ref2 : 0,\n                  onBlur: e => updateVariant(r.variant_id, {\n                    stock_qty: e.target.value\n                  }),\n                  className: \"border rounded px-2 py-1 w-20 text-right\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  defaultValue: r.sku,\n                  onBlur: e => updateVariant(r.variant_id, {\n                    sku: e.target.value\n                  }),\n                  className: \"border rounded px-2 py-1 w-32\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: r.image_url,\n                  alt: \"\",\n                  className: \"w-12 h-12 object-cover rounded border\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  defaultChecked: !!r.is_active,\n                  onChange: e => updateVariant(r.variant_id, {\n                    is_active: e.target.checked\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => deleteVariant(r.variant_id),\n                  className: \"px-2 py-1 rounded bg-red-500 text-white text-xs\",\n                  children: \"\\u0E25\\u0E1A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 19\n              }, this)]\n            }, r.variant_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 17\n            }, this);\n          }), variants.length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: 8,\n              className: \"p-4 text-center text-gray-500\",\n              children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35 Variant\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 5\n  }, this);\n}\n_s(VariantsManager, \"TH79LrsxMZpqbNZSd7vXvDIJWIM=\", false, function () {\n  return [useParams];\n});\n_c = VariantsManager;\nvar _c;\n$RefreshReg$(_c, \"VariantsManager\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useParams","Link","axios","jsxDEV","_jsxDEV","authHeader","t","localStorage","getItem","Authorization","tryUpload","file","fd","FormData","append","data","post","headers","url","Location","path","VariantsManager","_s","productId","product","setProduct","options","setOptions","variants","setVariants","loading","setLoading","busy","setBusy","msg","setMsg","error","setError","fileInputRef","load","p","get","opts","vars","Promise","all","err","console","optIndex","m","Map","forEach","o","i","set","option_id","valName","values","v","value_id","value_name","getCols","row","list","combo","combos","arr","Array","length","fill","_valName$get","idx","String","addOption","e","deleteOption","window","confirm","delete","addValue","deleteValue","updateVariant","variant_id","patch","put","deleteVariant","children","fileName","_jsxFileName","lineNumber","columnNumber","className","product_name","onClick","to","map","opt","id","placeholder","el","document","getElementById","value","trim","_","r","_ref","_r$price","_ref2","_r$stock_qty","cols","c","j","type","defaultValue","price","final_price","onBlur","target","stock_qty","stock","sku","src","image_url","alt","defaultChecked","is_active","onChange","checked","colSpan","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/admin/VariantsManager.js"],"sourcesContent":["// src/admin/VariantsManager.js\r\n// ======================================================================\r\n// จัดการตัวเลือก (Options/Values) และ Variants ของสินค้า\r\n// - ดึงชื่อสินค้า + options + variants จาก backend\r\n// - CRUD options/values/variants\r\n// - ตาราง Variants แสดงเป็น \"รายละเอียดที่ 1/2/3...\" ไม่ใช่ชื่อจริง\r\n// - ปุ่ม \"+ เพิ่มรายละเอียด\" เพิ่ม option ได้ไม่จำกัด\r\n// ======================================================================\r\n\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\n// helper: JWT auth header\r\nconst authHeader = () => {\r\n  const t = localStorage.getItem(\"token\");\r\n  return t ? { Authorization: `Bearer ${t}` } : {};\r\n};\r\n\r\n// helper: upload รูป\r\nasync function tryUpload(file) {\r\n  const fd = new FormData();\r\n  fd.append(\"file\", file);\r\n  const { data } = await axios.post(\"/api/uploads\", fd, {\r\n    headers: { ...authHeader(), \"Content-Type\": \"multipart/form-data\" },\r\n  });\r\n  if (typeof data === \"string\") return data;\r\n  return data?.url || data?.Location || data?.path || null;\r\n}\r\n\r\nexport default function VariantsManager() {\r\n  const { productId } = useParams();\r\n  const [product, setProduct] = useState(null);\r\n  const [options, setOptions] = useState([]);\r\n  const [variants, setVariants] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [busy, setBusy] = useState(false);\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const fileInputRef = useRef(null);\r\n\r\n  // โหลดข้อมูล\r\n  async function load() {\r\n    setLoading(true);\r\n    try {\r\n      const p = await axios.get(`/api/products/${productId}`);\r\n      const [{ data: opts }, { data: vars }] = await Promise.all([\r\n        axios.get(`/api/variants/products/${productId}/options`),\r\n        axios.get(`/api/variants/product/${productId}?active=1`),\r\n      ]);\r\n      setProduct(p.data);\r\n      setOptions(opts || []);\r\n      setVariants(vars || []);\r\n    } catch (err) {\r\n      setError(\"โหลดข้อมูลไม่สำเร็จ\");\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    load();\r\n  }, [productId]);\r\n\r\n  // map\r\n  const optIndex = useMemo(() => {\r\n    const m = new Map();\r\n    options.forEach((o, i) => m.set(o.option_id, i));\r\n    return m;\r\n  }, [options]);\r\n\r\n  const valName = useMemo(() => {\r\n    const m = new Map();\r\n    options.forEach(o => (o.values || []).forEach(v => m.set(v.value_id, v.value_name)));\r\n    return m;\r\n  }, [options]);\r\n\r\n  const getCols = (row) => {\r\n    const list = row.combo || row.combos || [];\r\n    const arr = new Array(options.length).fill(\"—\");\r\n    list.forEach(({ option_id, value_id }) => {\r\n      const idx = optIndex.get(option_id);\r\n      if (idx != null) arr[idx] = valName.get(value_id) ?? String(value_id);\r\n    });\r\n    return arr;\r\n  };\r\n\r\n  // actions: option\r\n  async function addOption() {\r\n    setBusy(true);\r\n    try {\r\n      await axios.post(`/api/variants/products/${productId}/options`, {}, { headers: authHeader() });\r\n      await load();\r\n      setMsg(\"เพิ่มรายละเอียดสำเร็จ\");\r\n    } catch (e) {\r\n      setError(\"เพิ่มรายละเอียดไม่สำเร็จ\");\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  async function deleteOption(option_id) {\r\n    if (!window.confirm(\"ลบรายละเอียดนี้ทั้งหมด?\")) return;\r\n    setBusy(true);\r\n    try {\r\n      await axios.delete(`/api/variants/options/${option_id}`, { headers: authHeader() });\r\n      await load();\r\n    } catch {\r\n      setError(\"ลบรายละเอียดไม่สำเร็จ\");\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  async function addValue(option_id, value_name) {\r\n    setBusy(true);\r\n    try {\r\n      await axios.post(`/api/variants/options/${option_id}/values`, { value_name }, { headers: authHeader() });\r\n      await load();\r\n    } catch {\r\n      setError(\"เพิ่มค่าไม่สำเร็จ\");\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  async function deleteValue(value_id) {\r\n    if (!window.confirm(\"ลบค่านี้?\")) return;\r\n    setBusy(true);\r\n    try {\r\n      await axios.delete(`/api/variants/values/${value_id}`, { headers: authHeader() });\r\n      await load();\r\n    } catch {\r\n      setError(\"ลบค่าไม่สำเร็จ\");\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  // actions: variant\r\n  async function updateVariant(variant_id, patch) {\r\n    setBusy(true);\r\n    try {\r\n      await axios.put(`/api/variants/${variant_id}`, patch, { headers: authHeader() });\r\n      await load();\r\n    } catch {\r\n      setError(\"อัปเดต Variant ไม่สำเร็จ\");\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  async function deleteVariant(variant_id) {\r\n    if (!window.confirm(\"ลบ Variant นี้?\")) return;\r\n    setBusy(true);\r\n    try {\r\n      await axios.delete(`/api/variants/${variant_id}`, { headers: authHeader() });\r\n      await load();\r\n    } catch {\r\n      setError(\"ลบ Variant ไม่สำเร็จ\");\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  if (loading) return <div>กำลังโหลด...</div>;\r\n\r\n  return (\r\n    <div className=\"p-4 space-y-4\">\r\n      <div className=\"flex items-center gap-3\">\r\n        <h2 className=\"text-xl font-bold\">\r\n          ตัวเลือก/Variants — {product?.product_name} (#{productId})\r\n        </h2>\r\n        <button onClick={addOption} className=\"ml-4 px-3 py-1 rounded bg-indigo-600 text-white text-sm\">+ เพิ่มรายละเอียด</button>\r\n        <Link to=\"/admin\" className=\"ml-auto text-sm underline\">← กลับ</Link>\r\n      </div>\r\n\r\n      {msg && <div className=\"text-green-700\">{msg}</div>}\r\n      {error && <div className=\"text-red-600\">{error}</div>}\r\n\r\n      {/* รายการรายละเอียด */}\r\n      <div className=\"grid md:grid-cols-2 gap-4\">\r\n        {options.map((opt, i) => (\r\n          <div key={opt.option_id} className=\"rounded border p-3 bg-gray-50\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <strong>รายละเอียดที่ {i + 1}</strong>\r\n              <button onClick={() => deleteOption(opt.option_id)} className=\"text-red-600 text-xs\">ลบ</button>\r\n            </div>\r\n            <div className=\"mt-2 flex flex-wrap gap-2\">\r\n              {(opt.values || []).map(v => (\r\n                <span key={v.value_id} className=\"px-2 py-1 rounded bg-gray-100 text-xs\">\r\n                  {v.value_name}\r\n                  <button onClick={() => deleteValue(v.value_id)} className=\"ml-1 text-red-500\">x</button>\r\n                </span>\r\n              ))}\r\n            </div>\r\n            <div className=\"mt-2 flex gap-2\">\r\n              <input id={`val-${opt.option_id}`} placeholder=\"เพิ่มค่าใหม่\" className=\"border rounded px-2 py-1 text-sm flex-1\" />\r\n              <button\r\n                onClick={() => {\r\n                  const el = document.getElementById(`val-${opt.option_id}`);\r\n                  if (el && el.value.trim()) {\r\n                    addValue(opt.option_id, el.value.trim());\r\n                    el.value = \"\";\r\n                  }\r\n                }}\r\n                className=\"px-2 rounded bg-emerald-600 text-white text-sm\"\r\n              >เพิ่ม</button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* ตาราง Variants */}\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full border-collapse text-sm\">\r\n          <thead>\r\n            <tr className=\"bg-gray-100\">\r\n              <th className=\"p-2 text-left\">#</th>\r\n              {options.map((_, i) => <th key={i} className=\"p-2 text-left\">รายละเอียดที่ {i + 1}</th>)}\r\n              <th className=\"p-2 text-right\">ราคา</th>\r\n              <th className=\"p-2 text-right\">สต็อก</th>\r\n              <th className=\"p-2\">SKU</th>\r\n              <th className=\"p-2\">รูป</th>\r\n              <th className=\"p-2\">สถานะ</th>\r\n              <th className=\"p-2\">จัดการ</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {variants.map((r, i) => {\r\n              const cols = getCols(r);\r\n              return (\r\n                <tr key={r.variant_id} className=\"border-t\">\r\n                  <td className=\"p-2\">{i + 1}</td>\r\n                  {cols.map((c, j) => <td key={j} className=\"p-2\">{c}</td>)}\r\n                  <td className=\"p-2 text-right\">\r\n                    <input type=\"number\" defaultValue={r.price ?? r.final_price ?? \"\"} onBlur={(e) => updateVariant(r.variant_id, { price: e.target.value })} className=\"border rounded px-2 py-1 w-24 text-right\" />\r\n                  </td>\r\n                  <td className=\"p-2 text-right\">\r\n                    <input type=\"number\" defaultValue={r.stock_qty ?? r.stock ?? 0} onBlur={(e) => updateVariant(r.variant_id, { stock_qty: e.target.value })} className=\"border rounded px-2 py-1 w-20 text-right\" />\r\n                  </td>\r\n                  <td className=\"p-2\">\r\n                    <input defaultValue={r.sku} onBlur={(e) => updateVariant(r.variant_id, { sku: e.target.value })} className=\"border rounded px-2 py-1 w-32\" />\r\n                  </td>\r\n                  <td className=\"p-2\">\r\n                    <img src={r.image_url} alt=\"\" className=\"w-12 h-12 object-cover rounded border\" />\r\n                  </td>\r\n                  <td className=\"p-2\">\r\n                    <input type=\"checkbox\" defaultChecked={!!r.is_active} onChange={(e) => updateVariant(r.variant_id, { is_active: e.target.checked })} />\r\n                  </td>\r\n                  <td className=\"p-2\">\r\n                    <button onClick={() => deleteVariant(r.variant_id)} className=\"px-2 py-1 rounded bg-red-500 text-white text-xs\">ลบ</button>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n            {variants.length === 0 && (\r\n              <tr>\r\n                <td colSpan={8} className=\"p-4 text-center text-gray-500\">ยังไม่มี Variant</td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}