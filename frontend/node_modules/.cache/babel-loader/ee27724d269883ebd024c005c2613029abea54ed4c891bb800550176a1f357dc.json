{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\pages\\\\ProductDetail.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/ProductDetail.js\n// หน้าแสดงรายละเอียดสินค้า (ลูกค้า)\n// - ดึงสินค้า /api/products/:id  (+ /:id/variants ถ้ามี)\n// - รองรับ SKU/ราคา/สต็อคตาม Variant ที่เลือก\n// - เข้ากับธีมสีเขียวของโปรเจกต์ (Tailwind)\n// - เพิ่มลงตะกร้าผ่าน addItem จาก lib/cart\n\nimport React, { useEffect, useMemo, useState, useCallback } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { api, path } from \"../lib/api\";\nimport { addItem } from \"../lib/cart\";\nimport \"./ProductDetail.css\";\n\n/* -------------------- helpers -------------------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst asInt = v => v === null || v === undefined || v === \"\" ? null : parseInt(v, 10);\nconst fmtBaht = n => {\n  const v = Number(n);\n  if (!Number.isFinite(v)) return \"—\";\n  try {\n    return new Intl.NumberFormat(\"th-TH\", {\n      style: \"currency\",\n      currency: \"THB\",\n      maximumFractionDigits: 2\n    }).format(v);\n  } catch {\n    return `${v} บาท`;\n  }\n};\n\n// แปลงให้เป็น URL สมบูรณ์ กรณี backend ส่งมาเป็น path สั้น ๆ เช่น /uploads/xxx.jpg\nconst ensureAbsUrl = u => {\n  if (!u) return \"\";\n  if (/^https?:\\/\\//i.test(u)) return u;\n  const ORIGIN = path && path.API_ORIGIN || process.env.REACT_APP_API_ORIGIN || \"\";\n  if (ORIGIN && u.startsWith(\"/\")) return ORIGIN + u;\n  return u;\n};\n\n// รวมคีย์/ค่า options ของ variant เป็น signature ไว้เทียบ\nconst optionSignature = obj => Object.entries(obj || {}).map(([k, v]) => `${k}=${v}`).sort().join(\"|\");\n\n// แปลง variants ให้เป็นรูปแบบเดียวกัน (กันสคีมาต่าง ๆ)\nfunction normalizeVariants(raw) {\n  if (!Array.isArray(raw)) return [];\n  return raw.map(v => {\n    var _ref, _v$variant_id, _ref2, _ref3, _ref4, _v$sku, _ref5, _ref6, _ref7, _v$price, _asInt, _ref8, _ref9, _ref0, _ref1, _v$stock, _ref12, _ref13, _v$image_url, _ref14, _v$is_active;\n    return {\n      variant_id: asInt((_ref = (_v$variant_id = v.variant_id) !== null && _v$variant_id !== void 0 ? _v$variant_id : v.id) !== null && _ref !== void 0 ? _ref : v.product_variant_id),\n      sku: String((_ref2 = (_ref3 = (_ref4 = (_v$sku = v.sku) !== null && _v$sku !== void 0 ? _v$sku : v.SKU) !== null && _ref4 !== void 0 ? _ref4 : v.code) !== null && _ref3 !== void 0 ? _ref3 : v.variant_code) !== null && _ref2 !== void 0 ? _ref2 : \"\"),\n      price: Number((_ref5 = (_ref6 = (_ref7 = (_v$price = v.price) !== null && _v$price !== void 0 ? _v$price : v.variant_price) !== null && _ref7 !== void 0 ? _ref7 : v.sale_price) !== null && _ref6 !== void 0 ? _ref6 : v.base_price) !== null && _ref5 !== void 0 ? _ref5 : 0),\n      stock: (_asInt = asInt((_ref8 = (_ref9 = (_ref0 = (_ref1 = (_v$stock = v.stock) !== null && _v$stock !== void 0 ? _v$stock : v.qty) !== null && _ref1 !== void 0 ? _ref1 : v.quantity) !== null && _ref0 !== void 0 ? _ref0 : v.live_stock) !== null && _ref9 !== void 0 ? _ref9 : v.on_hand) !== null && _ref8 !== void 0 ? _ref8 : v.available)) !== null && _asInt !== void 0 ? _asInt : 0,\n      // options อาจมาเป็น object หรือ array\n      options: Array.isArray(v.options) ? v.options.reduce((acc, it) => {\n        var _ref10, _it$name, _ref11, _it$value;\n        const k = String((_ref10 = (_it$name = it === null || it === void 0 ? void 0 : it.name) !== null && _it$name !== void 0 ? _it$name : it === null || it === void 0 ? void 0 : it.option_name) !== null && _ref10 !== void 0 ? _ref10 : \"\");\n        const val = String((_ref11 = (_it$value = it === null || it === void 0 ? void 0 : it.value) !== null && _it$value !== void 0 ? _it$value : it === null || it === void 0 ? void 0 : it.option_value) !== null && _ref11 !== void 0 ? _ref11 : \"\");\n        if (k) acc[k] = val;\n        return acc;\n      }, {}) : typeof v.options === \"object\" && v.options ? v.options : {\n        ...(v.color ? {\n          สี: v.color\n        } : {}),\n        ...(v.size ? {\n          ขนาด: v.size\n        } : {})\n      },\n      image_url: ensureAbsUrl((_ref12 = (_ref13 = (_v$image_url = v.image_url) !== null && _v$image_url !== void 0 ? _v$image_url : v.image) !== null && _ref13 !== void 0 ? _ref13 : v.thumbnail) !== null && _ref12 !== void 0 ? _ref12 : \"\"),\n      is_active: (_ref14 = (_v$is_active = v.is_active) !== null && _v$is_active !== void 0 ? _v$is_active : v.active) !== null && _ref14 !== void 0 ? _ref14 : true\n    };\n  });\n}\n\n// เก็บคีย์ออปชั่นทั้งหมดจาก variants\nfunction collectOptionKeys(vs) {\n  const s = new Set();\n  (vs || []).forEach(v => {\n    Object.keys((v === null || v === void 0 ? void 0 : v.options) || {}).forEach(k => s.add(k));\n  });\n  return Array.from(s);\n}\n\n// ดึงค่าที่ไม่ซ้ำของออปชั่น key นั้น ๆ\nfunction uniqueOptionValues(vs, key) {\n  const s = new Set();\n  (vs || []).forEach(v => {\n    const val = ((v === null || v === void 0 ? void 0 : v.options) || {})[key];\n    if (val !== undefined && val !== null) s.add(String(val));\n  });\n  return Array.from(s);\n}\n\n// หา variant จากออปชั่นที่เลือก (ตรงก่อน, ไม่ตรงค่อยหา best match)\nfunction findVariantByOptions(vs, chosen) {\n  if (!(vs !== null && vs !== void 0 && vs.length)) return null;\n  const sig = optionSignature(chosen || {});\n  let found = vs.find(v => {\n    var _v$is_active2;\n    return optionSignature(v.options || {}) === sig && ((_v$is_active2 = v.is_active) !== null && _v$is_active2 !== void 0 ? _v$is_active2 : true);\n  }) || null;\n  if (found) return found;\n\n  // best-match\n  let best = null;\n  let bestScore = -1;\n  for (const v of vs) {\n    const keys = Object.keys(v.options || {});\n    let score = 0;\n    keys.forEach(k => {\n      if ((v.options || {})[k] === (chosen || {})[k]) score += 1;\n    });\n    if (score > bestScore) {\n      bestScore = score;\n      best = v;\n    }\n  }\n  return best;\n}\n\n/* -------------------- component -------------------- */\nexport default function ProductDetail() {\n  _s();\n  var _ref20, _currentVariant$price, _currentVariant$stock, _images$activeImgInde;\n  const {\n    id\n  } = useParams(); // /products/:id\n\n  const [loading, setLoading] = useState(true);\n  const [product, setProduct] = useState(null);\n  const [variants, setVariants] = useState([]);\n\n  // แกลเลอรีรูป\n  const [images, setImages] = useState([]);\n  const [activeImgIndex, setActiveImgIndex] = useState(0);\n\n  // ตัวเลือก + จำนวน\n  const [chosenOptions, setChosenOptions] = useState({});\n  const [selectedVariantId, setSelectedVariantId] = useState(null);\n  const [qty, setQty] = useState(1);\n\n  // โหลดสินค้า + variants\n  useEffect(() => {\n    let cancel = false;\n    async function load() {\n      setLoading(true);\n      try {\n        var _p$product_id, _ref15, _ref16, _p$price, _ref17, _ref18, _p$stock, _ref19, _p$is_published, _first$variant_id;\n        // 1) สินค้าตัวแม่\n        const res = await api.get(`${path.products}/${id}`);\n        if (cancel) return;\n        const p = (res === null || res === void 0 ? void 0 : res.data) || res;\n\n        // 2) variants: พยายาม call endpoint แยกก่อน\n        let vs = [];\n        try {\n          const vRes = await api.get(`${path.products}/${id}/variants`);\n          vs = normalizeVariants((vRes === null || vRes === void 0 ? void 0 : vRes.data) || vRes);\n        } catch {\n          vs = normalizeVariants((p === null || p === void 0 ? void 0 : p.variants) || []);\n        }\n\n        // 3) รวมรูปสินค้า (แม่ + จาก variants ถ้ามี)\n        const imgs = (Array.isArray(p === null || p === void 0 ? void 0 : p.images) ? p.images : []).map(it => ({\n          url: ensureAbsUrl((it === null || it === void 0 ? void 0 : it.url) || (it === null || it === void 0 ? void 0 : it.image_url) || \"\"),\n          alt: (it === null || it === void 0 ? void 0 : it.alt_text) || (p === null || p === void 0 ? void 0 : p.product_name) || \"product\"\n        })).filter(x => x.url) || [];\n        const vImgs = vs.map(v => v.image_url ? {\n          url: v.image_url,\n          alt: v.sku || \"variant\"\n        } : null).filter(Boolean);\n        const fullImages = imgs.length > 0 ? imgs.concat(vImgs) : p.image_url || p.thumbnail ? [{\n          url: ensureAbsUrl(p.image_url || p.thumbnail),\n          alt: p.product_name || \"product\"\n        }].concat(vImgs) : vImgs;\n\n        // 4) สรุปข้อมูล product หลัก\n        setProduct({\n          product_id: asInt((_p$product_id = p.product_id) !== null && _p$product_id !== void 0 ? _p$product_id : p.id),\n          product_name: p.product_name || p.name || \"สินค้า\",\n          description: p.description || p.detail || \"\",\n          price: Number((_ref15 = (_ref16 = (_p$price = p.price) !== null && _p$price !== void 0 ? _p$price : p.base_price) !== null && _ref16 !== void 0 ? _ref16 : p.sale_price) !== null && _ref15 !== void 0 ? _ref15 : 0),\n          stock: asInt((_ref17 = (_ref18 = (_p$stock = p.stock) !== null && _p$stock !== void 0 ? _p$stock : p.live_stock) !== null && _ref18 !== void 0 ? _ref18 : p.total_stock) !== null && _ref17 !== void 0 ? _ref17 : null),\n          // อาจไม่มี\n          image_url: ensureAbsUrl(p.image_url || p.thumbnail || \"\"),\n          category_name: p.category_name || p.category || \"\",\n          is_published: (_ref19 = (_p$is_published = p.is_published) !== null && _p$is_published !== void 0 ? _p$is_published : p.published) !== null && _ref19 !== void 0 ? _ref19 : true\n        });\n        setVariants(vs);\n        setImages(fullImages);\n        setActiveImgIndex(0);\n\n        // 5) เตรียมตัวเลือกเริ่มต้น (option แรกของแต่ละ key)\n        const keys = collectOptionKeys(vs);\n        const init = {};\n        keys.forEach(k => {\n          const vals = uniqueOptionValues(vs, k);\n          if (vals.length) init[k] = vals[0];\n        });\n        setChosenOptions(init);\n        const first = findVariantByOptions(vs, init);\n        setSelectedVariantId((_first$variant_id = first === null || first === void 0 ? void 0 : first.variant_id) !== null && _first$variant_id !== void 0 ? _first$variant_id : null);\n      } catch (err) {\n        console.error(\"Load product failed:\", err);\n      } finally {\n        if (!cancel) setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      cancel = true;\n    };\n  }, [id]);\n\n  // keys ของออปชั่น\n  const optionKeys = useMemo(() => collectOptionKeys(variants), [variants]);\n\n  // variant ปัจจุบัน (ตามตัวเลือก)\n  const currentVariant = useMemo(() => {\n    if (!variants.length) return null;\n    if (selectedVariantId) return variants.find(x => x.variant_id === selectedVariantId) || null;\n    if (optionKeys.length) return findVariantByOptions(variants, chosenOptions);\n    return null;\n  }, [variants, selectedVariantId, chosenOptions, optionKeys]);\n  const priceToShow = (_ref20 = (_currentVariant$price = currentVariant === null || currentVariant === void 0 ? void 0 : currentVariant.price) !== null && _currentVariant$price !== void 0 ? _currentVariant$price : product === null || product === void 0 ? void 0 : product.price) !== null && _ref20 !== void 0 ? _ref20 : 0;\n  const skuToShow = (currentVariant === null || currentVariant === void 0 ? void 0 : currentVariant.sku) || \"\";\n  const stockToShow = (_currentVariant$stock = currentVariant === null || currentVariant === void 0 ? void 0 : currentVariant.stock) !== null && _currentVariant$stock !== void 0 ? _currentVariant$stock : (product === null || product === void 0 ? void 0 : product.stock) !== null && (product === null || product === void 0 ? void 0 : product.stock) !== undefined ? product.stock : null;\n  const mainImage = (images === null || images === void 0 ? void 0 : (_images$activeImgInde = images[activeImgIndex]) === null || _images$activeImgInde === void 0 ? void 0 : _images$activeImgInde.url) || (currentVariant === null || currentVariant === void 0 ? void 0 : currentVariant.image_url) || (product === null || product === void 0 ? void 0 : product.image_url) || \"\";\n\n  /* -------- actions -------- */\n  const chooseOption = useCallback((key, val) => {\n    var _v$variant_id2;\n    const next = {\n      ...chosenOptions,\n      [key]: val\n    };\n    setChosenOptions(next);\n    const v = findVariantByOptions(variants, next);\n    setSelectedVariantId((_v$variant_id2 = v === null || v === void 0 ? void 0 : v.variant_id) !== null && _v$variant_id2 !== void 0 ? _v$variant_id2 : null);\n  }, [chosenOptions, variants]);\n  const onAddToCart = useCallback(() => {\n    if (!product) return;\n    const pid = product.product_id;\n    const vid = (currentVariant === null || currentVariant === void 0 ? void 0 : currentVariant.variant_id) || null;\n    addItem({\n      product_id: pid,\n      variant_id: vid || undefined,\n      name: product.product_name,\n      sku: skuToShow || undefined,\n      price: priceToShow,\n      qty,\n      image_url: mainImage,\n      options: chosenOptions // เช่น { สี: \"แดง\", ขนาด: \"L\" }\n    });\n    alert(\"เพิ่มลงตะกร้าแล้ว\");\n  }, [product, currentVariant, priceToShow, skuToShow, qty, mainImage, chosenOptions]);\n\n  /* -------------------- UI -------------------- */\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-5xl mx-auto p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-pulse h-6 w-32 bg-gray-200 rounded mb-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-2 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-72 bg-gray-200 rounded-2xl\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-5 w-56 bg-gray-200 rounded mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-5 w-64 bg-gray-200 rounded mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-10 w-40 bg-gray-200 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this);\n  }\n  if (!product) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-5xl mx-auto p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-700\",\n        children: \"\\u0E44\\u0E21\\u0E48\\u0E1E\\u0E1A\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/products\",\n        className: \"text-green-700 underline\",\n        children: \"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-5xl mx-auto p-4 md:p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"text-sm mb-4 text-gray-600\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"hover:underline\",\n        children: \"\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E41\\u0E23\\u0E01\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mx-2\",\n        children: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/products\",\n        className: \"hover:underline\",\n        children: \"\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mx-2\",\n        children: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-gray-900\",\n        children: product.product_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid md:grid-cols-2 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [mainImage ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: mainImage,\n          alt: product.product_name,\n          className: \"w-full aspect-square object-cover rounded-2xl shadow-sm border border-green-100\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full aspect-square rounded-2xl bg-green-50 border border-green-100 grid place-items-center\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-green-700\",\n            children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 13\n        }, this), (images === null || images === void 0 ? void 0 : images.length) > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 grid grid-cols-5 gap-2\",\n          children: images.map((im, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => setActiveImgIndex(idx),\n            className: [\"border rounded-xl overflow-hidden focus:ring-2 focus:ring-green-500\", idx === activeImgIndex ? \"border-green-500\" : \"border-green-200 hover:border-green-400\"].join(\" \"),\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: im.url,\n              alt: im.alt || \"img\",\n              className: \"w-full h-20 object-cover\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 19\n            }, this)\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl md:text-3xl font-bold text-green-800\",\n          children: product.product_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 p-3 bg-green-50 rounded-xl border border-green-100\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xl md:text-2xl font-semibold text-green-700\",\n              children: fmtBaht(priceToShow)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this), skuToShow && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"px-2 py-1 text-xs rounded bg-white border border-green-200 text-green-700\",\n              children: [\"SKU: \", skuToShow]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 17\n            }, this), stockToShow !== null && stockToShow !== undefined && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"px-2 py-1 text-xs rounded bg-white border border-green-200 text-green-700\",\n              children: [\"\\u0E2A\\u0E15\\u0E47\\u0E2D\\u0E04: \", stockToShow]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this), optionKeys.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 space-y-3\",\n          children: optionKeys.map(key => {\n            const values = uniqueOptionValues(variants, key);\n            const chosen = chosenOptions[key];\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-700 mb-1\",\n                children: key\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap gap-2\",\n                children: values.map(val => {\n                  const active = chosen === val;\n                  return /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => chooseOption(key, val),\n                    className: [\"px-3 py-2 rounded-2xl border text-sm\", active ? \"bg-green-600 text-white border-green-700\" : \"bg-white text-green-800 border-green-300 hover:border-green-500\"].join(\" \"),\n                    children: val\n                  }, val, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 418,\n                    columnNumber: 27\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 21\n              }, this)]\n            }, key, true, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-gray-700\",\n            children: \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inline-flex items-center border rounded-xl overflow-hidden\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setQty(q => Math.max(1, q - 1)),\n              className: \"px-3 py-1 bg-white hover:bg-green-50\",\n              children: \"\\u2212\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              min: 1,\n              value: qty,\n              onChange: e => setQty(Math.max(1, asInt(e.target.value) || 1)),\n              className: \"w-16 text-center py-1 outline-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setQty(q => q + 1),\n              className: \"px-3 py-1 bg-white hover:bg-green-50\",\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-5 flex gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onAddToCart,\n            disabled: stockToShow !== null && stockToShow !== undefined && stockToShow <= 0,\n            className: [\"px-6 py-3 rounded-2xl shadow-sm\", stockToShow !== null && stockToShow !== undefined && stockToShow <= 0 ? \"bg-gray-300 text-gray-600 cursor-not-allowed\" : \"bg-green-700 text-white hover:bg-green-800\"].join(\" \"),\n            children: \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E07\\u0E15\\u0E30\\u0E01\\u0E23\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/cart\",\n            className: \"px-6 py-3 rounded-2xl border border-green-300 text-green-800 bg-white hover:bg-green-50\",\n            children: \"\\u0E44\\u0E1B\\u0E15\\u0E30\\u0E01\\u0E23\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }, this), product.description && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold text-green-800 mb-2\",\n            children: \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"prose prose-sm max-w-none\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"whitespace-pre-line\",\n              children: product.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 326,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductDetail, \"bdCwckk6EwnMmM67SWxAHPBmUbg=\", false, function () {\n  return [useParams];\n});\n_c = ProductDetail;\nvar _c;\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useCallback","useParams","Link","api","path","addItem","jsxDEV","_jsxDEV","asInt","v","undefined","parseInt","fmtBaht","n","Number","isFinite","Intl","NumberFormat","style","currency","maximumFractionDigits","format","ensureAbsUrl","u","test","ORIGIN","API_ORIGIN","process","env","REACT_APP_API_ORIGIN","startsWith","optionSignature","obj","Object","entries","map","k","sort","join","normalizeVariants","raw","Array","isArray","_ref","_v$variant_id","_ref2","_ref3","_ref4","_v$sku","_ref5","_ref6","_ref7","_v$price","_asInt","_ref8","_ref9","_ref0","_ref1","_v$stock","_ref12","_ref13","_v$image_url","_ref14","_v$is_active","variant_id","id","product_variant_id","sku","String","SKU","code","variant_code","price","variant_price","sale_price","base_price","stock","qty","quantity","live_stock","on_hand","available","options","reduce","acc","it","_ref10","_it$name","_ref11","_it$value","name","option_name","val","value","option_value","color","สี","size","ขนาด","image_url","image","thumbnail","is_active","active","collectOptionKeys","vs","s","Set","forEach","keys","add","from","uniqueOptionValues","key","findVariantByOptions","chosen","length","sig","found","find","_v$is_active2","best","bestScore","score","ProductDetail","_s","_ref20","_currentVariant$price","_currentVariant$stock","_images$activeImgInde","loading","setLoading","product","setProduct","variants","setVariants","images","setImages","activeImgIndex","setActiveImgIndex","chosenOptions","setChosenOptions","selectedVariantId","setSelectedVariantId","setQty","cancel","load","_p$product_id","_ref15","_ref16","_p$price","_ref17","_ref18","_p$stock","_ref19","_p$is_published","_first$variant_id","res","get","products","p","data","vRes","imgs","url","alt","alt_text","product_name","filter","x","vImgs","Boolean","fullImages","concat","product_id","description","detail","total_stock","category_name","category","is_published","published","init","vals","first","err","console","error","optionKeys","currentVariant","priceToShow","skuToShow","stockToShow","mainImage","chooseOption","_v$variant_id2","next","onAddToCart","pid","vid","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","src","im","idx","type","onClick","values","q","Math","max","min","onChange","e","target","disabled","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/pages/ProductDetail.js"],"sourcesContent":["// frontend/src/pages/ProductDetail.js\r\n// หน้าแสดงรายละเอียดสินค้า (ลูกค้า)\r\n// - ดึงสินค้า /api/products/:id  (+ /:id/variants ถ้ามี)\r\n// - รองรับ SKU/ราคา/สต็อคตาม Variant ที่เลือก\r\n// - เข้ากับธีมสีเขียวของโปรเจกต์ (Tailwind)\r\n// - เพิ่มลงตะกร้าผ่าน addItem จาก lib/cart\r\n\r\nimport React, { useEffect, useMemo, useState, useCallback } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport { api, path } from \"../lib/api\";\r\nimport { addItem } from \"../lib/cart\";\r\nimport \"./ProductDetail.css\";\r\n\r\n\r\n/* -------------------- helpers -------------------- */\r\nconst asInt = (v) =>\r\n  v === null || v === undefined || v === \"\" ? null : parseInt(v, 10);\r\n\r\nconst fmtBaht = (n) => {\r\n  const v = Number(n);\r\n  if (!Number.isFinite(v)) return \"—\";\r\n  try {\r\n    return new Intl.NumberFormat(\"th-TH\", {\r\n      style: \"currency\",\r\n      currency: \"THB\",\r\n      maximumFractionDigits: 2,\r\n    }).format(v);\r\n  } catch {\r\n    return `${v} บาท`;\r\n  }\r\n};\r\n\r\n// แปลงให้เป็น URL สมบูรณ์ กรณี backend ส่งมาเป็น path สั้น ๆ เช่น /uploads/xxx.jpg\r\nconst ensureAbsUrl = (u) => {\r\n  if (!u) return \"\";\r\n  if (/^https?:\\/\\//i.test(u)) return u;\r\n  const ORIGIN =\r\n    (path && path.API_ORIGIN) || process.env.REACT_APP_API_ORIGIN || \"\";\r\n  if (ORIGIN && u.startsWith(\"/\")) return ORIGIN + u;\r\n  return u;\r\n};\r\n\r\n// รวมคีย์/ค่า options ของ variant เป็น signature ไว้เทียบ\r\nconst optionSignature = (obj) =>\r\n  Object.entries(obj || {})\r\n    .map(([k, v]) => `${k}=${v}`)\r\n    .sort()\r\n    .join(\"|\");\r\n\r\n// แปลง variants ให้เป็นรูปแบบเดียวกัน (กันสคีมาต่าง ๆ)\r\nfunction normalizeVariants(raw) {\r\n  if (!Array.isArray(raw)) return [];\r\n  return raw.map((v) => ({\r\n    variant_id: asInt(v.variant_id ?? v.id ?? v.product_variant_id),\r\n    sku: String(v.sku ?? v.SKU ?? v.code ?? v.variant_code ?? \"\"),\r\n\r\n    price: Number(\r\n      v.price ?? v.variant_price ?? v.sale_price ?? v.base_price ?? 0\r\n    ),\r\n    stock:\r\n      asInt(\r\n        v.stock ??\r\n          v.qty ??\r\n          v.quantity ??\r\n          v.live_stock ??\r\n          v.on_hand ??\r\n          v.available\r\n      ) ?? 0,\r\n\r\n    // options อาจมาเป็น object หรือ array\r\n    options: Array.isArray(v.options)\r\n      ? v.options.reduce((acc, it) => {\r\n          const k = String(it?.name ?? it?.option_name ?? \"\");\r\n          const val = String(it?.value ?? it?.option_value ?? \"\");\r\n          if (k) acc[k] = val;\r\n          return acc;\r\n        }, {})\r\n      : typeof v.options === \"object\" && v.options\r\n      ? v.options\r\n      : {\r\n          ...(v.color ? { สี: v.color } : {}),\r\n          ...(v.size ? { ขนาด: v.size } : {}),\r\n        },\r\n\r\n    image_url: ensureAbsUrl(v.image_url ?? v.image ?? v.thumbnail ?? \"\"),\r\n    is_active: v.is_active ?? v.active ?? true,\r\n  }));\r\n}\r\n\r\n// เก็บคีย์ออปชั่นทั้งหมดจาก variants\r\nfunction collectOptionKeys(vs) {\r\n  const s = new Set();\r\n  (vs || []).forEach((v) => {\r\n    Object.keys(v?.options || {}).forEach((k) => s.add(k));\r\n  });\r\n  return Array.from(s);\r\n}\r\n\r\n// ดึงค่าที่ไม่ซ้ำของออปชั่น key นั้น ๆ\r\nfunction uniqueOptionValues(vs, key) {\r\n  const s = new Set();\r\n  (vs || []).forEach((v) => {\r\n    const val = (v?.options || {})[key];\r\n    if (val !== undefined && val !== null) s.add(String(val));\r\n  });\r\n  return Array.from(s);\r\n}\r\n\r\n// หา variant จากออปชั่นที่เลือก (ตรงก่อน, ไม่ตรงค่อยหา best match)\r\nfunction findVariantByOptions(vs, chosen) {\r\n  if (!vs?.length) return null;\r\n  const sig = optionSignature(chosen || {});\r\n  let found =\r\n    vs.find(\r\n      (v) => optionSignature(v.options || {}) === sig && (v.is_active ?? true)\r\n    ) || null;\r\n  if (found) return found;\r\n\r\n  // best-match\r\n  let best = null;\r\n  let bestScore = -1;\r\n  for (const v of vs) {\r\n    const keys = Object.keys(v.options || {});\r\n    let score = 0;\r\n    keys.forEach((k) => {\r\n      if ((v.options || {})[k] === (chosen || {})[k]) score += 1;\r\n    });\r\n    if (score > bestScore) {\r\n      bestScore = score;\r\n      best = v;\r\n    }\r\n  }\r\n  return best;\r\n}\r\n\r\n/* -------------------- component -------------------- */\r\nexport default function ProductDetail() {\r\n  const { id } = useParams(); // /products/:id\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [product, setProduct] = useState(null);\r\n  const [variants, setVariants] = useState([]);\r\n\r\n  // แกลเลอรีรูป\r\n  const [images, setImages] = useState([]);\r\n  const [activeImgIndex, setActiveImgIndex] = useState(0);\r\n\r\n  // ตัวเลือก + จำนวน\r\n  const [chosenOptions, setChosenOptions] = useState({});\r\n  const [selectedVariantId, setSelectedVariantId] = useState(null);\r\n  const [qty, setQty] = useState(1);\r\n\r\n  // โหลดสินค้า + variants\r\n  useEffect(() => {\r\n    let cancel = false;\r\n    async function load() {\r\n      setLoading(true);\r\n      try {\r\n        // 1) สินค้าตัวแม่\r\n        const res = await api.get(`${path.products}/${id}`);\r\n        if (cancel) return;\r\n        const p = res?.data || res;\r\n\r\n        // 2) variants: พยายาม call endpoint แยกก่อน\r\n        let vs = [];\r\n        try {\r\n          const vRes = await api.get(`${path.products}/${id}/variants`);\r\n          vs = normalizeVariants(vRes?.data || vRes);\r\n        } catch {\r\n          vs = normalizeVariants(p?.variants || []);\r\n        }\r\n\r\n        // 3) รวมรูปสินค้า (แม่ + จาก variants ถ้ามี)\r\n        const imgs =\r\n          (Array.isArray(p?.images) ? p.images : [])\r\n            .map((it) => ({\r\n              url: ensureAbsUrl(it?.url || it?.image_url || \"\"),\r\n              alt: it?.alt_text || p?.product_name || \"product\",\r\n            }))\r\n            .filter((x) => x.url) || [];\r\n\r\n        const vImgs = vs\r\n          .map((v) =>\r\n            v.image_url ? { url: v.image_url, alt: v.sku || \"variant\" } : null\r\n          )\r\n          .filter(Boolean);\r\n\r\n        const fullImages =\r\n          imgs.length > 0\r\n            ? imgs.concat(vImgs)\r\n            : (p.image_url || p.thumbnail)\r\n            ? [{ url: ensureAbsUrl(p.image_url || p.thumbnail), alt: p.product_name || \"product\" }].concat(vImgs)\r\n            : vImgs;\r\n\r\n        // 4) สรุปข้อมูล product หลัก\r\n        setProduct({\r\n          product_id: asInt(p.product_id ?? p.id),\r\n          product_name: p.product_name || p.name || \"สินค้า\",\r\n          description: p.description || p.detail || \"\",\r\n          price: Number(p.price ?? p.base_price ?? p.sale_price ?? 0),\r\n          stock: asInt(p.stock ?? p.live_stock ?? p.total_stock ?? null), // อาจไม่มี\r\n          image_url: ensureAbsUrl(p.image_url || p.thumbnail || \"\"),\r\n          category_name: p.category_name || p.category || \"\",\r\n          is_published: p.is_published ?? p.published ?? true,\r\n        });\r\n        setVariants(vs);\r\n        setImages(fullImages);\r\n        setActiveImgIndex(0);\r\n\r\n        // 5) เตรียมตัวเลือกเริ่มต้น (option แรกของแต่ละ key)\r\n        const keys = collectOptionKeys(vs);\r\n        const init = {};\r\n        keys.forEach((k) => {\r\n          const vals = uniqueOptionValues(vs, k);\r\n          if (vals.length) init[k] = vals[0];\r\n        });\r\n        setChosenOptions(init);\r\n\r\n        const first = findVariantByOptions(vs, init);\r\n        setSelectedVariantId(first?.variant_id ?? null);\r\n      } catch (err) {\r\n        console.error(\"Load product failed:\", err);\r\n      } finally {\r\n        if (!cancel) setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => {\r\n      cancel = true;\r\n    };\r\n  }, [id]);\r\n\r\n  // keys ของออปชั่น\r\n  const optionKeys = useMemo(() => collectOptionKeys(variants), [variants]);\r\n\r\n  // variant ปัจจุบัน (ตามตัวเลือก)\r\n  const currentVariant = useMemo(() => {\r\n    if (!variants.length) return null;\r\n    if (selectedVariantId)\r\n      return variants.find((x) => x.variant_id === selectedVariantId) || null;\r\n    if (optionKeys.length) return findVariantByOptions(variants, chosenOptions);\r\n    return null;\r\n  }, [variants, selectedVariantId, chosenOptions, optionKeys]);\r\n\r\n  const priceToShow = currentVariant?.price ?? product?.price ?? 0;\r\n  const skuToShow = currentVariant?.sku || \"\";\r\n  const stockToShow =\r\n    currentVariant?.stock ??\r\n    (product?.stock !== null && product?.stock !== undefined\r\n      ? product.stock\r\n      : null);\r\n\r\n  const mainImage =\r\n    images?.[activeImgIndex]?.url ||\r\n    currentVariant?.image_url ||\r\n    product?.image_url ||\r\n    \"\";\r\n\r\n  /* -------- actions -------- */\r\n  const chooseOption = useCallback(\r\n    (key, val) => {\r\n      const next = { ...chosenOptions, [key]: val };\r\n      setChosenOptions(next);\r\n      const v = findVariantByOptions(variants, next);\r\n      setSelectedVariantId(v?.variant_id ?? null);\r\n    },\r\n    [chosenOptions, variants]\r\n  );\r\n\r\n  const onAddToCart = useCallback(() => {\r\n    if (!product) return;\r\n    const pid = product.product_id;\r\n    const vid = currentVariant?.variant_id || null;\r\n\r\n    addItem({\r\n      product_id: pid,\r\n      variant_id: vid || undefined,\r\n      name: product.product_name,\r\n      sku: skuToShow || undefined,\r\n      price: priceToShow,\r\n      qty,\r\n      image_url: mainImage,\r\n      options: chosenOptions, // เช่น { สี: \"แดง\", ขนาด: \"L\" }\r\n    });\r\n\r\n    alert(\"เพิ่มลงตะกร้าแล้ว\");\r\n  }, [\r\n    product,\r\n    currentVariant,\r\n    priceToShow,\r\n    skuToShow,\r\n    qty,\r\n    mainImage,\r\n    chosenOptions,\r\n  ]);\r\n\r\n  /* -------------------- UI -------------------- */\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-5xl mx-auto p-4\">\r\n        <div className=\"animate-pulse h-6 w-32 bg-gray-200 rounded mb-4\" />\r\n        <div className=\"grid md:grid-cols-2 gap-6\">\r\n          <div className=\"h-72 bg-gray-200 rounded-2xl\" />\r\n          <div>\r\n            <div className=\"h-5 w-56 bg-gray-200 rounded mb-3\" />\r\n            <div className=\"h-5 w-64 bg-gray-200 rounded mb-3\" />\r\n            <div className=\"h-10 w-40 bg-gray-200 rounded\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return (\r\n      <div className=\"max-w-5xl mx-auto p-6\">\r\n        <p className=\"text-red-700\">ไม่พบสินค้า</p>\r\n        <Link to=\"/products\" className=\"text-green-700 underline\">\r\n          ย้อนกลับหน้าสินค้า\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto p-4 md:p-6\">\r\n      {/* breadcrumb */}\r\n      <nav className=\"text-sm mb-4 text-gray-600\">\r\n        <Link to=\"/\" className=\"hover:underline\">\r\n          หน้าแรก\r\n        </Link>\r\n        <span className=\"mx-2\">/</span>\r\n        <Link to=\"/products\" className=\"hover:underline\">\r\n          สินค้าทั้งหมด\r\n        </Link>\r\n        <span className=\"mx-2\">/</span>\r\n        <span className=\"text-gray-900\">{product.product_name}</span>\r\n      </nav>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        {/* รูปหลัก + แกลเลอรี */}\r\n        <div>\r\n          {mainImage ? (\r\n            <img\r\n              src={mainImage}\r\n              alt={product.product_name}\r\n              className=\"w-full aspect-square object-cover rounded-2xl shadow-sm border border-green-100\"\r\n            />\r\n          ) : (\r\n            <div className=\"w-full aspect-square rounded-2xl bg-green-50 border border-green-100 grid place-items-center\">\r\n              <span className=\"text-green-700\">ไม่มีรูปภาพ</span>\r\n            </div>\r\n          )}\r\n\r\n          {images?.length > 1 && (\r\n            <div className=\"mt-3 grid grid-cols-5 gap-2\">\r\n              {images.map((im, idx) => (\r\n                <button\r\n                  key={idx}\r\n                  type=\"button\"\r\n                  onClick={() => setActiveImgIndex(idx)}\r\n                  className={[\r\n                    \"border rounded-xl overflow-hidden focus:ring-2 focus:ring-green-500\",\r\n                    idx === activeImgIndex\r\n                      ? \"border-green-500\"\r\n                      : \"border-green-200 hover:border-green-400\",\r\n                  ].join(\" \")}\r\n                >\r\n                  <img\r\n                    src={im.url}\r\n                    alt={im.alt || \"img\"}\r\n                    className=\"w-full h-20 object-cover\"\r\n                  />\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* รายละเอียดสินค้า */}\r\n        <div>\r\n          <h1 className=\"text-2xl md:text-3xl font-bold text-green-800\">\r\n            {product.product_name}\r\n          </h1>\r\n\r\n          {/* ราคา / SKU / สต็อค */}\r\n          <div className=\"mt-3 p-3 bg-green-50 rounded-xl border border-green-100\">\r\n            <div className=\"flex items-center gap-3 flex-wrap\">\r\n              <span className=\"text-xl md:text-2xl font-semibold text-green-700\">\r\n                {fmtBaht(priceToShow)}\r\n              </span>\r\n              {skuToShow && (\r\n                <span className=\"px-2 py-1 text-xs rounded bg-white border border-green-200 text-green-700\">\r\n                  SKU: {skuToShow}\r\n                </span>\r\n              )}\r\n              {stockToShow !== null && stockToShow !== undefined && (\r\n                <span className=\"px-2 py-1 text-xs rounded bg-white border border-green-200 text-green-700\">\r\n                  สต็อค: {stockToShow}\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* ตัวเลือกสินค้า */}\r\n          {optionKeys.length > 0 && (\r\n            <div className=\"mt-4 space-y-3\">\r\n              {optionKeys.map((key) => {\r\n                const values = uniqueOptionValues(variants, key);\r\n                const chosen = chosenOptions[key];\r\n                return (\r\n                  <div key={key}>\r\n                    <div className=\"text-sm text-gray-700 mb-1\">{key}</div>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      {values.map((val) => {\r\n                        const active = chosen === val;\r\n                        return (\r\n                          <button\r\n                            key={val}\r\n                            type=\"button\"\r\n                            onClick={() => chooseOption(key, val)}\r\n                            className={[\r\n                              \"px-3 py-2 rounded-2xl border text-sm\",\r\n                              active\r\n                                ? \"bg-green-600 text-white border-green-700\"\r\n                                : \"bg-white text-green-800 border-green-300 hover:border-green-500\",\r\n                            ].join(\" \")}\r\n                          >\r\n                            {val}\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {/* จำนวน */}\r\n          <div className=\"mt-4 flex items-center gap-3\">\r\n            <span className=\"text-sm text-gray-700\">จำนวน</span>\r\n            <div className=\"inline-flex items-center border rounded-xl overflow-hidden\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setQty((q) => Math.max(1, q - 1))}\r\n                className=\"px-3 py-1 bg-white hover:bg-green-50\"\r\n              >\r\n                −\r\n              </button>\r\n              <input\r\n                type=\"number\"\r\n                min={1}\r\n                value={qty}\r\n                onChange={(e) => setQty(Math.max(1, asInt(e.target.value) || 1))}\r\n                className=\"w-16 text-center py-1 outline-none\"\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setQty((q) => q + 1)}\r\n                className=\"px-3 py-1 bg-white hover:bg-green-50\"\r\n              >\r\n                +\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* ปุ่ม */}\r\n          <div className=\"mt-5 flex gap-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onAddToCart}\r\n              disabled={stockToShow !== null && stockToShow !== undefined && stockToShow <= 0}\r\n              className={[\r\n                \"px-6 py-3 rounded-2xl shadow-sm\",\r\n                stockToShow !== null && stockToShow !== undefined && stockToShow <= 0\r\n                  ? \"bg-gray-300 text-gray-600 cursor-not-allowed\"\r\n                  : \"bg-green-700 text-white hover:bg-green-800\",\r\n              ].join(\" \")}\r\n            >\r\n              เพิ่มลงตะกร้า\r\n            </button>\r\n\r\n            <Link\r\n              to=\"/cart\"\r\n              className=\"px-6 py-3 rounded-2xl border border-green-300 text-green-800 bg-white hover:bg-green-50\"\r\n            >\r\n              ไปตะกร้า\r\n            </Link>\r\n          </div>\r\n\r\n          {/* รายละเอียดสินค้า */}\r\n          {product.description && (\r\n            <div className=\"mt-6\">\r\n              <h2 className=\"text-lg font-semibold text-green-800 mb-2\">\r\n                รายละเอียดสินค้า\r\n              </h2>\r\n              <div className=\"prose prose-sm max-w-none\">\r\n                <p className=\"whitespace-pre-line\">{product.description}</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* สินค้าที่เกี่ยวข้อง/อื่น ๆ — เว้นไว้เผื่อเพิ่มภายหลัง */}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}