{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\admin\\\\VariantsManager.js\",\n  _s = $RefreshSig$();\n// src/admin/VariantsManager.js\n// ======================================================================\n// VariantsManager — หน้าจัดการตัวเลือกสินค้า (แบบ Shopee Seller Centre)\n// - สร้าง/แก้ไขตัวเลือก (สี/ขนาด ฯลฯ)\n// - อัปโหลดรูปเฉพาะแถว\n// - เติม SKU อัตโนมัติ\n// - บันทึกหลายรายการ (batch)\n// ======================================================================\n\nimport React, { useEffect, useMemo, useRef, useState, useCallback } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { api, path } from \"../lib/api\";\nimport \"./VariantsManager.css\";\n\n/* ---------- Helpers ---------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_ORIGIN = (() => {\n  try {\n    var _api$defaults;\n    return new URL((api === null || api === void 0 ? void 0 : (_api$defaults = api.defaults) === null || _api$defaults === void 0 ? void 0 : _api$defaults.baseURL) || \"/\", window.location.href).origin;\n  } catch {\n    return \"\";\n  }\n})();\nconst authHeader = () => {\n  const t = localStorage.getItem(\"token\");\n  return t ? {\n    Authorization: `Bearer ${t}`\n  } : {};\n};\nconst absUrl = u => {\n  if (!u) return u;\n  const s = String(u).replace(/\\\\/g, \"/\");\n  if (/^https?:\\/\\//i.test(s)) return s;\n  if (s.startsWith(\"/uploads\")) return API_ORIGIN + s;\n  if (s.startsWith(\"uploads/\")) return API_ORIGIN + \"/\" + s;\n  return s;\n};\nconst basename = (u = \"\") => u.split(\"?\")[0].split(\"/\").pop() || u;\nconst rand2 = () => String(Math.floor(Math.random() * 99) + 1).padStart(2, \"0\");\n\n/* ---------- Upload Helper ---------- */\nconst tryUpload = async file => {\n  const fd = new FormData();\n  fd.append(\"file\", file);\n  const {\n    data\n  } = await api.post(path(\"/upload\"), fd, {\n    headers: {\n      ...authHeader(),\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  });\n  return (data === null || data === void 0 ? void 0 : data.url) || (data === null || data === void 0 ? void 0 : data.path) || (data === null || data === void 0 ? void 0 : data.imageUrl) || (data === null || data === void 0 ? void 0 : data.Location) || (data === null || data === void 0 ? void 0 : data.location) || null;\n};\n\n/* ====================================================================== */\nexport default function VariantsManager() {\n  _s();\n  const {\n    id,\n    productId: pid\n  } = useParams();\n  const productId = Number(id || pid);\n  const [opt1Name, setOpt1Name] = useState(\"สี\");\n  const [opt2Name, setOpt2Name] = useState(\"ขนาด\");\n  const [opt1Values, setOpt1Values] = useState([]);\n  const [opt2Values, setOpt2Values] = useState([]);\n  const [variants, setVariants] = useState([]);\n  const [saving, setSaving] = useState(false);\n  const [msg, setMsg] = useState(\"\");\n\n  /* ---------- Generate Combination Table ---------- */\n  useEffect(() => {\n    const combos = [];\n    const v1 = opt1Values.length ? opt1Values : [null];\n    const v2 = opt2Values.length ? opt2Values : [null];\n    for (const a of v1) {\n      for (const b of v2) {\n        combos.push({\n          opt1: a,\n          opt2: b,\n          sku: \"\",\n          price: \"\",\n          image: null\n        });\n      }\n    }\n    setVariants(combos);\n  }, [opt1Values, opt2Values]);\n\n  /* ---------- Add/Remove Tags ---------- */\n  const addValue = (values, setValues, text) => {\n    const v = text.trim();\n    if (!v) return;\n    if (!values.includes(v)) setValues([...values, v]);\n  };\n  const removeValue = (values, setValues, idx) => setValues(values.filter((_, i) => i !== idx));\n\n  /* ---------- Upload Image per row ---------- */\n  const uploadImage = async (file, idx) => {\n    if (!file) return;\n    try {\n      const url = await tryUpload(file);\n      setVariants(prev => {\n        const arr = [...prev];\n        arr[idx] = {\n          ...arr[idx],\n          image: url\n        };\n        return arr;\n      });\n    } catch (e) {\n      alert(\"อัปโหลดไม่สำเร็จ\");\n    }\n  };\n\n  /* ---------- Auto SKU ---------- */\n  const autoSku = () => {\n    setVariants(prev => prev.map((v, i) => ({\n      ...v,\n      sku: `P${productId}-` + (v.opt1 ? v.opt1.substring(0, 3).toUpperCase() : \"\") + (v.opt2 ? \"-\" + v.opt2.substring(0, 3).toUpperCase() : \"\") + \"-\" + rand2()\n    })));\n  };\n\n  /* ---------- Save All ---------- */\n  const saveAll = async () => {\n    setSaving(true);\n    try {\n      const items = variants.map(v => ({\n        details: [v.opt1 ? {\n          name: opt1Name,\n          value: v.opt1\n        } : null, v.opt2 ? {\n          name: opt2Name,\n          value: v.opt2\n        } : null].filter(Boolean),\n        sku: v.sku || null,\n        price: v.price ? Number(v.price) : null,\n        images: v.image ? [v.image] : []\n      }));\n      await api.post(path(`/variants/products/${productId}/upsert-batch`), {\n        items\n      }, {\n        headers: authHeader()\n      });\n      setMsg(\"✅ บันทึกสำเร็จ\");\n      setTimeout(() => setMsg(\"\"), 2500);\n    } catch (err) {\n      alert(\"❌ บันทึกไม่สำเร็จ\");\n      console.error(err);\n    } finally {\n      setSaving(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"vm-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 (Variants)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/admin\",\n        children: \"\\u2190 \\u0E01\\u0E25\\u0E31\\u0E1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), msg && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-msg\",\n      children: msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-options\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vm-opt\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E17\\u0E35\\u0E48 1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: opt1Name,\n          onChange: e => setOpt1Name(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-chips\",\n          children: [opt1Values.map((v, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"vm-chip\",\n            children: [v, /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeValue(opt1Values, setOpt1Values, i),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C\\u0E41\\u0E25\\u0E49\\u0E27 Enter\",\n            onKeyDown: e => {\n              if (e.key === \"Enter\") {\n                e.preventDefault();\n                addValue(opt1Values, setOpt1Values, e.target.value);\n                e.target.value = \"\";\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vm-opt\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E17\\u0E35\\u0E48 2 (\\u0E16\\u0E49\\u0E32\\u0E21\\u0E35)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: opt2Name,\n          onChange: e => setOpt2Name(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-chips\",\n          children: [opt2Values.map((v, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"vm-chip\",\n            children: [v, /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeValue(opt2Values, setOpt2Values, i),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C\\u0E41\\u0E25\\u0E49\\u0E27 Enter\",\n            onKeyDown: e => {\n              if (e.key === \"Enter\") {\n                e.preventDefault();\n                addValue(opt2Values, setOpt2Values, e.target.value);\n                e.target.value = \"\";\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-table-wrap\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"vm-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: opt1Name || \"ตัวเลือก 1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: opt2Name || \"ตัวเลือก 2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E23\\u0E32\\u0E04\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"SKU\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: variants.map((v, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: v.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: absUrl(v.image),\n                alt: \"\",\n                className: \"vm-thumb\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"vm-upload\",\n                children: [\"+\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"image/*\",\n                  onChange: e => uploadImage(e.target.files[0], i)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: v.opt1 || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: v.opt2 || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                min: \"0\",\n                placeholder: \"\\u0E44\\u0E21\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E38\",\n                value: v.price,\n                onChange: e => {\n                  const val = e.target.value;\n                  setVariants(prev => {\n                    const arr = [...prev];\n                    arr[i] = {\n                      ...arr[i],\n                      price: val\n                    };\n                    return arr;\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"SKU\",\n                value: v.sku,\n                onChange: e => {\n                  const val = e.target.value;\n                  setVariants(prev => {\n                    const arr = [...prev];\n                    arr[i] = {\n                      ...arr[i],\n                      sku: val\n                    };\n                    return arr;\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        onClick: autoSku,\n        disabled: saving,\n        children: \"\\u0E40\\u0E15\\u0E34\\u0E21 SKU \\u0E2D\\u0E31\\u0E15\\u0E42\\u0E19\\u0E21\\u0E31\\u0E15\\u0E34\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary\",\n        onClick: saveAll,\n        disabled: saving,\n        children: \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-hint\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u2022 \\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C\\u0E04\\u0E48\\u0E32\\u0E41\\u0E25\\u0E49\\u0E27\\u0E01\\u0E14 Enter \\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21 (\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E44\\u0E14\\u0E49\\u0E2B\\u0E25\\u0E32\\u0E22\\u0E04\\u0E48\\u0E32)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u2022 \\u0E40\\u0E27\\u0E49\\u0E19\\u0E27\\u0E48\\u0E32\\u0E07\\u0E44\\u0E14\\u0E49\\u0E2B\\u0E32\\u0E01\\u0E21\\u0E35\\u0E40\\u0E1E\\u0E35\\u0E22\\u0E07\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E40\\u0E14\\u0E35\\u0E22\\u0E27\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u2022 \\u0E2A\\u0E15\\u0E47\\u0E2D\\u0E01\\u0E08\\u0E30\\u0E2D\\u0E34\\u0E07\\u0E08\\u0E32\\u0E01\\u0E04\\u0E25\\u0E31\\u0E07\\u0E08\\u0E23\\u0E34\\u0E07 \\u0E44\\u0E21\\u0E48\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E23\\u0E2D\\u0E01\\u0E43\\u0E19\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E19\\u0E35\\u0E49\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u2022 \\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E23\\u0E39\\u0E1B\\u0E40\\u0E09\\u0E1E\\u0E32\\u0E30\\u0E41\\u0E16\\u0E27 \\u0E23\\u0E39\\u0E1B\\u0E08\\u0E30\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E15\\u0E32\\u0E21\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E19\\u0E31\\u0E49\\u0E19\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this);\n}\n_s(VariantsManager, \"xER7TUnIIJ279lBSZsc17EfTAf0=\", false, function () {\n  return [useParams];\n});\n_c = VariantsManager;\nvar _c;\n$RefreshReg$(_c, \"VariantsManager\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useCallback","useParams","Link","api","path","jsxDEV","_jsxDEV","API_ORIGIN","_api$defaults","URL","defaults","baseURL","window","location","href","origin","authHeader","t","localStorage","getItem","Authorization","absUrl","u","s","String","replace","test","startsWith","basename","split","pop","rand2","Math","floor","random","padStart","tryUpload","file","fd","FormData","append","data","post","headers","url","imageUrl","Location","VariantsManager","_s","id","productId","pid","Number","opt1Name","setOpt1Name","opt2Name","setOpt2Name","opt1Values","setOpt1Values","opt2Values","setOpt2Values","variants","setVariants","saving","setSaving","msg","setMsg","combos","v1","length","v2","a","b","push","opt1","opt2","sku","price","image","addValue","values","setValues","text","v","trim","includes","removeValue","idx","filter","_","i","uploadImage","prev","arr","e","alert","autoSku","map","substring","toUpperCase","saveAll","items","details","name","value","Boolean","images","setTimeout","err","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","onChange","target","onClick","placeholder","onKeyDown","key","preventDefault","src","alt","type","accept","files","min","val","disabled","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/admin/VariantsManager.js"],"sourcesContent":["// src/admin/VariantsManager.js\r\n// ======================================================================\r\n// VariantsManager — หน้าจัดการตัวเลือกสินค้า (แบบ Shopee Seller Centre)\r\n// - สร้าง/แก้ไขตัวเลือก (สี/ขนาด ฯลฯ)\r\n// - อัปโหลดรูปเฉพาะแถว\r\n// - เติม SKU อัตโนมัติ\r\n// - บันทึกหลายรายการ (batch)\r\n// ======================================================================\r\n\r\nimport React, { useEffect, useMemo, useRef, useState, useCallback } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport { api, path } from \"../lib/api\";\r\nimport \"./VariantsManager.css\";\r\n\r\n/* ---------- Helpers ---------- */\r\nconst API_ORIGIN = (() => {\r\n  try { return new URL(api?.defaults?.baseURL || \"/\", window.location.href).origin; }\r\n  catch { return \"\"; }\r\n})();\r\nconst authHeader = () => {\r\n  const t = localStorage.getItem(\"token\");\r\n  return t ? { Authorization: `Bearer ${t}` } : {};\r\n};\r\nconst absUrl = (u) => {\r\n  if (!u) return u;\r\n  const s = String(u).replace(/\\\\/g, \"/\");\r\n  if (/^https?:\\/\\//i.test(s)) return s;\r\n  if (s.startsWith(\"/uploads\")) return API_ORIGIN + s;\r\n  if (s.startsWith(\"uploads/\")) return API_ORIGIN + \"/\" + s;\r\n  return s;\r\n};\r\nconst basename = (u = \"\") => (u.split(\"?\")[0].split(\"/\").pop() || u);\r\nconst rand2 = () => String(Math.floor(Math.random() * 99) + 1).padStart(2, \"0\");\r\n\r\n/* ---------- Upload Helper ---------- */\r\nconst tryUpload = async (file) => {\r\n  const fd = new FormData();\r\n  fd.append(\"file\", file);\r\n  const { data } = await api.post(path(\"/upload\"), fd, {\r\n    headers: { ...authHeader(), \"Content-Type\": \"multipart/form-data\" },\r\n  });\r\n  return (\r\n    data?.url ||\r\n    data?.path ||\r\n    data?.imageUrl ||\r\n    data?.Location ||\r\n    data?.location ||\r\n    null\r\n  );\r\n};\r\n\r\n/* ====================================================================== */\r\nexport default function VariantsManager() {\r\n  const { id, productId: pid } = useParams();\r\n  const productId = Number(id || pid);\r\n\r\n  const [opt1Name, setOpt1Name] = useState(\"สี\");\r\n  const [opt2Name, setOpt2Name] = useState(\"ขนาด\");\r\n  const [opt1Values, setOpt1Values] = useState([]);\r\n  const [opt2Values, setOpt2Values] = useState([]);\r\n  const [variants, setVariants] = useState([]);\r\n  const [saving, setSaving] = useState(false);\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  /* ---------- Generate Combination Table ---------- */\r\n  useEffect(() => {\r\n    const combos = [];\r\n    const v1 = opt1Values.length ? opt1Values : [null];\r\n    const v2 = opt2Values.length ? opt2Values : [null];\r\n    for (const a of v1) {\r\n      for (const b of v2) {\r\n        combos.push({\r\n          opt1: a,\r\n          opt2: b,\r\n          sku: \"\",\r\n          price: \"\",\r\n          image: null,\r\n        });\r\n      }\r\n    }\r\n    setVariants(combos);\r\n  }, [opt1Values, opt2Values]);\r\n\r\n  /* ---------- Add/Remove Tags ---------- */\r\n  const addValue = (values, setValues, text) => {\r\n    const v = text.trim();\r\n    if (!v) return;\r\n    if (!values.includes(v)) setValues([...values, v]);\r\n  };\r\n  const removeValue = (values, setValues, idx) =>\r\n    setValues(values.filter((_, i) => i !== idx));\r\n\r\n  /* ---------- Upload Image per row ---------- */\r\n  const uploadImage = async (file, idx) => {\r\n    if (!file) return;\r\n    try {\r\n      const url = await tryUpload(file);\r\n      setVariants((prev) => {\r\n        const arr = [...prev];\r\n        arr[idx] = { ...arr[idx], image: url };\r\n        return arr;\r\n      });\r\n    } catch (e) {\r\n      alert(\"อัปโหลดไม่สำเร็จ\");\r\n    }\r\n  };\r\n\r\n  /* ---------- Auto SKU ---------- */\r\n  const autoSku = () => {\r\n    setVariants((prev) =>\r\n      prev.map((v, i) => ({\r\n        ...v,\r\n        sku:\r\n          `P${productId}-` +\r\n          (v.opt1 ? v.opt1.substring(0, 3).toUpperCase() : \"\") +\r\n          (v.opt2 ? \"-\" + v.opt2.substring(0, 3).toUpperCase() : \"\") +\r\n          \"-\" +\r\n          rand2(),\r\n      }))\r\n    );\r\n  };\r\n\r\n  /* ---------- Save All ---------- */\r\n  const saveAll = async () => {\r\n    setSaving(true);\r\n    try {\r\n      const items = variants.map((v) => ({\r\n        details: [\r\n          v.opt1 ? { name: opt1Name, value: v.opt1 } : null,\r\n          v.opt2 ? { name: opt2Name, value: v.opt2 } : null,\r\n        ].filter(Boolean),\r\n        sku: v.sku || null,\r\n        price: v.price ? Number(v.price) : null,\r\n        images: v.image ? [v.image] : [],\r\n      }));\r\n      await api.post(path(`/variants/products/${productId}/upsert-batch`), { items }, { headers: authHeader() });\r\n      setMsg(\"✅ บันทึกสำเร็จ\");\r\n      setTimeout(() => setMsg(\"\"), 2500);\r\n    } catch (err) {\r\n      alert(\"❌ บันทึกไม่สำเร็จ\");\r\n      console.error(err);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"vm-page\">\r\n      <div className=\"vm-header\">\r\n        <h2>ตัวเลือกสินค้า (Variants)</h2>\r\n        <Link to=\"/admin\">← กลับ</Link>\r\n      </div>\r\n\r\n      {msg && <div className=\"vm-msg\">{msg}</div>}\r\n\r\n      {/* ---------- Option Inputs ---------- */}\r\n      <div className=\"vm-options\">\r\n        {/* Option 1 */}\r\n        <div className=\"vm-opt\">\r\n          <label>ตัวเลือกที่ 1</label>\r\n          <input value={opt1Name} onChange={(e) => setOpt1Name(e.target.value)} />\r\n          <div className=\"vm-chips\">\r\n            {opt1Values.map((v, i) => (\r\n              <span key={i} className=\"vm-chip\">\r\n                {v}\r\n                <button onClick={() => removeValue(opt1Values, setOpt1Values, i)}>×</button>\r\n              </span>\r\n            ))}\r\n            <input\r\n              placeholder=\"พิมพ์แล้ว Enter\"\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\") {\r\n                  e.preventDefault();\r\n                  addValue(opt1Values, setOpt1Values, e.target.value);\r\n                  e.target.value = \"\";\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Option 2 */}\r\n        <div className=\"vm-opt\">\r\n          <label>ตัวเลือกที่ 2 (ถ้ามี)</label>\r\n          <input value={opt2Name} onChange={(e) => setOpt2Name(e.target.value)} />\r\n          <div className=\"vm-chips\">\r\n            {opt2Values.map((v, i) => (\r\n              <span key={i} className=\"vm-chip\">\r\n                {v}\r\n                <button onClick={() => removeValue(opt2Values, setOpt2Values, i)}>×</button>\r\n              </span>\r\n            ))}\r\n            <input\r\n              placeholder=\"พิมพ์แล้ว Enter\"\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\") {\r\n                  e.preventDefault();\r\n                  addValue(opt2Values, setOpt2Values, e.target.value);\r\n                  e.target.value = \"\";\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ---------- Variants Table ---------- */}\r\n      <div className=\"vm-table-wrap\">\r\n        <table className=\"vm-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>รูปภาพ</th>\r\n              <th>{opt1Name || \"ตัวเลือก 1\"}</th>\r\n              <th>{opt2Name || \"ตัวเลือก 2\"}</th>\r\n              <th>ราคา</th>\r\n              <th>SKU</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {variants.map((v, i) => (\r\n              <tr key={i}>\r\n                <td>\r\n                  {v.image ? (\r\n                    <img src={absUrl(v.image)} alt=\"\" className=\"vm-thumb\" />\r\n                  ) : (\r\n                    <label className=\"vm-upload\">\r\n                      +\r\n                      <input\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        onChange={(e) => uploadImage(e.target.files[0], i)}\r\n                      />\r\n                    </label>\r\n                  )}\r\n                </td>\r\n                <td>{v.opt1 || \"-\"}</td>\r\n                <td>{v.opt2 || \"-\"}</td>\r\n                <td>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    placeholder=\"ไม่ระบุ\"\r\n                    value={v.price}\r\n                    onChange={(e) => {\r\n                      const val = e.target.value;\r\n                      setVariants((prev) => {\r\n                        const arr = [...prev];\r\n                        arr[i] = { ...arr[i], price: val };\r\n                        return arr;\r\n                      });\r\n                    }}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    placeholder=\"SKU\"\r\n                    value={v.sku}\r\n                    onChange={(e) => {\r\n                      const val = e.target.value;\r\n                      setVariants((prev) => {\r\n                        const arr = [...prev];\r\n                        arr[i] = { ...arr[i], sku: val };\r\n                        return arr;\r\n                      });\r\n                    }}\r\n                  />\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* ---------- Actions ---------- */}\r\n      <div className=\"vm-actions\">\r\n        <button className=\"btn\" onClick={autoSku} disabled={saving}>เติม SKU อัตโนมัติ</button>\r\n        <button className=\"btn-primary\" onClick={saveAll} disabled={saving}>บันทึกทั้งหมด</button>\r\n      </div>\r\n\r\n      {/* ---------- Hints ---------- */}\r\n      <div className=\"vm-hint\">\r\n        <p>• พิมพ์ค่าแล้วกด Enter เพื่อเพิ่ม (เพิ่มได้หลายค่า)</p>\r\n        <p>• เว้นว่างได้หากมีเพียงตัวเลือกเดียว</p>\r\n        <p>• สต็อกจะอิงจากคลังจริง ไม่ต้องกรอกในหน้านี้</p>\r\n        <p>• เลือกรูปเฉพาะแถว รูปจะแสดงตามตัวเลือกนั้น</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}