{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\admin\\\\VariantsManager.js\",\n  _s = $RefreshSig$();\n// src/admin/VariantsManager.js\n// ======================================================================\n// VariantsManager — แบบง่าย (ไม่แปลงไทยเป็นอังกฤษ)\n// - ตัวเลือก 1–3 (เพิ่มด้วย Enter)\n// - ตารางคอมโบ + อัปโหลดรูปต่อแถว (มีพรีวิวทันที)\n// - บันทึกทั้งหมด -> POST /admin/products/:id/variants/generate\n// ======================================================================\n\nimport React, { useEffect, useMemo, useState, useCallback } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { api, path, mediaSrc } from \"../lib/api\";\nimport \"./VariantsManager.css\";\n\n/* ---------- Helpers ---------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst authHeader = () => {\n  const t = localStorage.getItem(\"token\");\n  return t ? {\n    Authorization: `Bearer ${t}`\n  } : {};\n};\nconst pickStr = (...xs) => {\n  var _xs$find;\n  return ((_xs$find = xs.find(v => typeof v === \"string\" && v.trim())) === null || _xs$find === void 0 ? void 0 : _xs$find.trim()) || \"\";\n};\nconst rand2 = () => String(Math.floor(Math.random() * 99) + 1).padStart(2, \"0\");\n\n/* ---------- Upload ---------- */\nconst extractUrl = data => {\n  var _data$file, _data$file2, _data$data, _data$data2, _data$data3;\n  if (!data) return null;\n  if (typeof data === \"string\") return data;\n  const direct = data.url || data.path || data.imageUrl || data.Location || data.location || ((_data$file = data.file) === null || _data$file === void 0 ? void 0 : _data$file.url) || ((_data$file2 = data.file) === null || _data$file2 === void 0 ? void 0 : _data$file2.path) || ((_data$data = data.data) === null || _data$data === void 0 ? void 0 : _data$data.url) || ((_data$data2 = data.data) === null || _data$data2 === void 0 ? void 0 : _data$data2.path) || ((_data$data3 = data.data) === null || _data$data3 === void 0 ? void 0 : _data$data3.imageUrl);\n  if (direct) return direct;\n  try {\n    const flat = JSON.stringify(data);\n    const m = flat.match(/\"([^\"]+\\.(?:png|jpe?g|webp|gif))\"/i);\n    return m ? m[1] : null;\n  } catch {\n    return null;\n  }\n};\nconst tryUpload = async file => {\n  const fd = new FormData();\n  fd.append(\"file\", file);\n  const res = await api.post(path(\"/upload\"), fd, {\n    headers: {\n      ...authHeader(),\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  });\n  const url = extractUrl(res === null || res === void 0 ? void 0 : res.data);\n  if (!url) throw new Error(\"UPLOAD_OK_BUT_NO_URL\");\n  return url;\n};\n\n/* ---------- Normalize product ---------- */\nconst normalizeProduct = raw => {\n  if (!raw) return null;\n  const d = raw.data || raw.item || raw.product || raw.result || raw;\n  return d || null;\n};\n\n/* ====================================================================== */\nexport default function VariantsManager() {\n  _s();\n  const {\n    id,\n    productId: pid\n  } = useParams();\n  const productId = Number(id || pid);\n\n  // product for header + SKU\n  const [product, setProduct] = useState(null);\n\n  // option names\n  const [opt1Name, setOpt1Name] = useState(\"สี\");\n  const [opt2Name, setOpt2Name] = useState(\"ขนาด\");\n  const [opt3Name, setOpt3Name] = useState(\"\");\n\n  // option values\n  const [opt1Values, setOpt1Values] = useState([]);\n  const [opt2Values, setOpt2Values] = useState([]);\n  const [opt3Values, setOpt3Values] = useState([]);\n\n  // combos\n  const [rows, setRows] = useState([]);\n  const [saving, setSaving] = useState(false);\n  const [msg, setMsg] = useState(\"\");\n\n  /* ---------- Load product (ชื่อ/โค้ด) ---------- */\n  const loadProduct = useCallback(async () => {\n    let p = null;\n    try {\n      const r = await api.get(path(`/admin/products/${productId}`));\n      p = normalizeProduct(r === null || r === void 0 ? void 0 : r.data);\n    } catch {}\n    if (!p) {\n      try {\n        const r = await api.get(path(`/products/${productId}`));\n        p = normalizeProduct(r === null || r === void 0 ? void 0 : r.data);\n      } catch {}\n    }\n    if (!p) {\n      try {\n        var _r$data;\n        const r = await api.get(path(`/admin/products`), {\n          params: {\n            include_archived: 1\n          }\n        });\n        const arr = Array.isArray(r === null || r === void 0 ? void 0 : (_r$data = r.data) === null || _r$data === void 0 ? void 0 : _r$data.items) ? r.data.items : Array.isArray(r === null || r === void 0 ? void 0 : r.data) ? r.data : [];\n        p = (arr || []).find(x => Number(x.product_id) === productId) || null;\n      } catch {}\n    }\n    setProduct(p || null);\n  }, [productId]);\n  useEffect(() => {\n    loadProduct();\n  }, [loadProduct]);\n  const productName = useMemo(() => pickStr(product === null || product === void 0 ? void 0 : product.product_name, product === null || product === void 0 ? void 0 : product.name, product === null || product === void 0 ? void 0 : product.title), [product]);\n  const productCode = useMemo(() => pickStr(product === null || product === void 0 ? void 0 : product.product_code, product === null || product === void 0 ? void 0 : product.code, `P${productId}`), [product, productId]);\n\n  /* ---------- Rebuild combos when values change ---------- */\n  useEffect(() => {\n    const v1 = opt1Values.length ? opt1Values : [null];\n    const v2 = opt2Values.length ? opt2Values : [null];\n    const v3 = opt3Values.length ? opt3Values : [null];\n    const combos = [];\n    for (const a of v1) for (const b of v2) for (const c of v3) {\n      combos.push({\n        opt1: a,\n        opt2: b,\n        opt3: c,\n        price: \"\",\n        sku: \"\",\n        image: null\n      });\n    }\n    setRows(combos);\n  }, [opt1Values, opt2Values, opt3Values]);\n\n  /* ---------- chip helpers ---------- */\n  const addTag = (list, setList, txt) => {\n    const v = String(txt || \"\").trim();\n    if (!v) return;\n    if (!list.some(x => x === v)) setList([...list, v]);\n  };\n  const removeTag = (list, setList, idx) => setList(list.filter((_, i) => i !== idx));\n\n  /* ---------- per-row upload ---------- */\n  const onUploadRowImage = async (file, idx) => {\n    if (!file) return;\n    const tempUrl = URL.createObjectURL(file);\n    setRows(prev => {\n      const a = [...prev];\n      a[idx] = {\n        ...a[idx],\n        image: tempUrl,\n        __temp: true\n      };\n      return a;\n    });\n    try {\n      const serverUrl = await tryUpload(file);\n      setRows(prev => {\n        const a = [...prev];\n        a[idx] = {\n          ...a[idx],\n          image: serverUrl,\n          __temp: false\n        };\n        return a;\n      });\n    } catch (e) {\n      setRows(prev => {\n        const a = [...prev];\n        a[idx] = {\n          ...a[idx],\n          image: null,\n          __temp: false\n        };\n        return a;\n      });\n      alert((e === null || e === void 0 ? void 0 : e.message) || \"Upload failed\");\n    } finally {\n      setTimeout(() => URL.revokeObjectURL(tempUrl), 2500);\n    }\n  };\n\n  /* ---------- Auto SKU (ไม่แปลงภาษา) ---------- */\n  const autoSku = () => {\n    const base = productCode || `P${productId}`;\n    setRows(prev => prev.map(r => {\n      const parts = [base, r.opt1, r.opt2, r.opt3].filter(Boolean);\n      return {\n        ...r,\n        sku: parts.join(\"-\") + \"-\" + rand2()\n      };\n    }));\n  };\n\n  /* ---------- Save batch ---------- */\n  const saveAll = async () => {\n    setSaving(true);\n    try {\n      const items = rows.map(r => ({\n        details: [r.opt1 ? {\n          name: opt1Name,\n          value: r.opt1\n        } : null, r.opt2 ? {\n          name: opt2Name,\n          value: r.opt2\n        } : null, r.opt3 && opt3Name ? {\n          name: opt3Name,\n          value: r.opt3\n        } : null].filter(Boolean),\n        sku: r.sku || null,\n        price: r.price ? Number(r.price) : null,\n        images: r.image ? [r.image] : []\n      }));\n\n      // ใช้ endpoint ที่มีอยู่จริงใน backend\n      await api.post(path(`/admin/products/${productId}/variants/generate`), {\n        items\n      }, {\n        headers: authHeader()\n      });\n      setMsg(\"✅ Saved\");\n      setTimeout(() => setMsg(\"\"), 1800);\n    } catch (e) {\n      console.error(e);\n      alert(\"❌ Save failed\");\n    } finally {\n      setSaving(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"vm-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vm-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-product-name\",\n          children: productName || `#${productId}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-product-code\",\n          children: productCode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/admin\",\n        className: \"vm-back\",\n        children: \"\\u2190 \\u0E01\\u0E25\\u0E31\\u0E1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this), msg && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-msg\",\n      children: msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-options\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vm-opt\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E17\\u0E35\\u0E48 1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: opt1Name,\n          onChange: e => setOpt1Name(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-chips\",\n          children: [opt1Values.map((v, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"vm-chip\",\n            children: [v, /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeTag(opt1Values, setOpt1Values, i),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C\\u0E41\\u0E25\\u0E49\\u0E27 Enter\",\n            onKeyDown: e => {\n              if (e.key === \"Enter\") {\n                e.preventDefault();\n                addTag(opt1Values, setOpt1Values, e.currentTarget.value);\n                e.currentTarget.value = \"\";\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vm-opt\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E17\\u0E35\\u0E48 2 (\\u0E16\\u0E49\\u0E32\\u0E21\\u0E35)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: opt2Name,\n          onChange: e => setOpt2Name(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-chips\",\n          children: [opt2Values.map((v, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"vm-chip\",\n            children: [v, /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeTag(opt2Values, setOpt2Values, i),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C\\u0E41\\u0E25\\u0E49\\u0E27 Enter\",\n            onKeyDown: e => {\n              if (e.key === \"Enter\") {\n                e.preventDefault();\n                addTag(opt2Values, setOpt2Values, e.currentTarget.value);\n                e.currentTarget.value = \"\";\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vm-opt\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E17\\u0E35\\u0E48 3 (\\u0E16\\u0E49\\u0E32\\u0E21\\u0E35)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: opt3Name,\n          onChange: e => setOpt3Name(e.target.value),\n          placeholder: \"\\u0E40\\u0E0A\\u0E48\\u0E19 \\u0E27\\u0E31\\u0E2A\\u0E14\\u0E38 / \\u0E23\\u0E38\\u0E48\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-chips\",\n          children: [opt3Values.map((v, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"vm-chip\",\n            children: [v, /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeTag(opt3Values, setOpt3Values, i),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C\\u0E41\\u0E25\\u0E49\\u0E27 Enter\",\n            onKeyDown: e => {\n              if (e.key === \"Enter\") {\n                e.preventDefault();\n                addTag(opt3Values, setOpt3Values, e.currentTarget.value);\n                e.currentTarget.value = \"\";\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-table-wrap\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"vm-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: opt1Name || \"ตัวเลือก 1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: opt2Name || \"ตัวเลือก 2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: opt3Name || \"ตัวเลือก 3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E23\\u0E32\\u0E04\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"SKU\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: rows.map((r, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: mediaSrc(r.image),\n                alt: \"\",\n                className: \"vm-thumb\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"vm-upload\",\n                children: [\"+\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"image/*\",\n                  onChange: e => {\n                    var _e$target$files;\n                    return onUploadRowImage((_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0], i);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.opt1 || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.opt2 || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.opt3 || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                min: \"0\",\n                placeholder: \"\\u0E44\\u0E21\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E38\",\n                value: r.price,\n                onChange: e => {\n                  const v = e.target.value;\n                  setRows(prev => {\n                    const a = [...prev];\n                    a[i] = {\n                      ...a[i],\n                      price: v\n                    };\n                    return a;\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"SKU\",\n                value: r.sku,\n                onChange: e => {\n                  const v = e.target.value;\n                  setRows(prev => {\n                    const a = [...prev];\n                    a[i] = {\n                      ...a[i],\n                      sku: v\n                    };\n                    return a;\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        onClick: autoSku,\n        disabled: saving,\n        children: \"\\u0E40\\u0E15\\u0E34\\u0E21 SKU \\u0E2D\\u0E31\\u0E15\\u0E42\\u0E19\\u0E21\\u0E31\\u0E15\\u0E34\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary\",\n        onClick: saveAll,\n        disabled: saving,\n        children: \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vm-hint\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u2022 Enter \\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E04\\u0E48\\u0E32 (\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E44\\u0E14\\u0E49\\u0E2B\\u0E25\\u0E32\\u0E22\\u0E04\\u0E48\\u0E32)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u2022 \\u0E2A\\u0E15\\u0E47\\u0E2D\\u0E01\\u0E08\\u0E30\\u0E2D\\u0E34\\u0E07\\u0E08\\u0E32\\u0E01\\u0E04\\u0E25\\u0E31\\u0E07\\u0E08\\u0E23\\u0E34\\u0E07 (\\u0E44\\u0E21\\u0E48\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E23\\u0E2D\\u0E01\\u0E17\\u0E35\\u0E48\\u0E19\\u0E35\\u0E48)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this);\n}\n_s(VariantsManager, \"cWg408hMyrXSjBKQOqDhJK2wH9c=\", false, function () {\n  return [useParams];\n});\n_c = VariantsManager;\nvar _c;\n$RefreshReg$(_c, \"VariantsManager\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useCallback","useParams","Link","api","path","mediaSrc","jsxDEV","_jsxDEV","authHeader","t","localStorage","getItem","Authorization","pickStr","xs","_xs$find","find","v","trim","rand2","String","Math","floor","random","padStart","extractUrl","data","_data$file","_data$file2","_data$data","_data$data2","_data$data3","direct","url","imageUrl","Location","location","file","flat","JSON","stringify","m","match","tryUpload","fd","FormData","append","res","post","headers","Error","normalizeProduct","raw","d","item","product","result","VariantsManager","_s","id","productId","pid","Number","setProduct","opt1Name","setOpt1Name","opt2Name","setOpt2Name","opt3Name","setOpt3Name","opt1Values","setOpt1Values","opt2Values","setOpt2Values","opt3Values","setOpt3Values","rows","setRows","saving","setSaving","msg","setMsg","loadProduct","p","r","get","_r$data","params","include_archived","arr","Array","isArray","items","x","product_id","productName","product_name","name","title","productCode","product_code","code","v1","length","v2","v3","combos","a","b","c","push","opt1","opt2","opt3","price","sku","image","addTag","list","setList","txt","some","removeTag","idx","filter","_","i","onUploadRowImage","tempUrl","URL","createObjectURL","prev","__temp","serverUrl","e","alert","message","setTimeout","revokeObjectURL","autoSku","base","map","parts","Boolean","join","saveAll","details","value","images","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","onChange","target","onClick","placeholder","onKeyDown","key","preventDefault","currentTarget","src","alt","type","accept","_e$target$files","files","min","disabled","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/admin/VariantsManager.js"],"sourcesContent":["// src/admin/VariantsManager.js\r\n// ======================================================================\r\n// VariantsManager — แบบง่าย (ไม่แปลงไทยเป็นอังกฤษ)\r\n// - ตัวเลือก 1–3 (เพิ่มด้วย Enter)\r\n// - ตารางคอมโบ + อัปโหลดรูปต่อแถว (มีพรีวิวทันที)\r\n// - บันทึกทั้งหมด -> POST /admin/products/:id/variants/generate\r\n// ======================================================================\r\n\r\nimport React, { useEffect, useMemo, useState, useCallback } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport { api, path, mediaSrc } from \"../lib/api\";\r\nimport \"./VariantsManager.css\";\r\n\r\n/* ---------- Helpers ---------- */\r\nconst authHeader = () => {\r\n  const t = localStorage.getItem(\"token\");\r\n  return t ? { Authorization: `Bearer ${t}` } : {};\r\n};\r\n\r\nconst pickStr = (...xs) => xs.find((v) => typeof v === \"string\" && v.trim())?.trim() || \"\";\r\nconst rand2 = () => String(Math.floor(Math.random() * 99) + 1).padStart(2, \"0\");\r\n\r\n/* ---------- Upload ---------- */\r\nconst extractUrl = (data) => {\r\n  if (!data) return null;\r\n  if (typeof data === \"string\") return data;\r\n  const direct =\r\n    data.url || data.path || data.imageUrl || data.Location || data.location ||\r\n    data.file?.url || data.file?.path || data.data?.url || data.data?.path || data.data?.imageUrl;\r\n  if (direct) return direct;\r\n  try {\r\n    const flat = JSON.stringify(data);\r\n    const m = flat.match(/\"([^\"]+\\.(?:png|jpe?g|webp|gif))\"/i);\r\n    return m ? m[1] : null;\r\n  } catch { return null; }\r\n};\r\n\r\nconst tryUpload = async (file) => {\r\n  const fd = new FormData();\r\n  fd.append(\"file\", file);\r\n  const res = await api.post(path(\"/upload\"), fd, {\r\n    headers: { ...authHeader(), \"Content-Type\": \"multipart/form-data\" },\r\n  });\r\n  const url = extractUrl(res?.data);\r\n  if (!url) throw new Error(\"UPLOAD_OK_BUT_NO_URL\");\r\n  return url;\r\n};\r\n\r\n/* ---------- Normalize product ---------- */\r\nconst normalizeProduct = (raw) => {\r\n  if (!raw) return null;\r\n  const d = raw.data || raw.item || raw.product || raw.result || raw;\r\n  return d || null;\r\n};\r\n\r\n/* ====================================================================== */\r\nexport default function VariantsManager() {\r\n  const { id, productId: pid } = useParams();\r\n  const productId = Number(id || pid);\r\n\r\n  // product for header + SKU\r\n  const [product, setProduct] = useState(null);\r\n\r\n  // option names\r\n  const [opt1Name, setOpt1Name] = useState(\"สี\");\r\n  const [opt2Name, setOpt2Name] = useState(\"ขนาด\");\r\n  const [opt3Name, setOpt3Name] = useState(\"\");\r\n\r\n  // option values\r\n  const [opt1Values, setOpt1Values] = useState([]);\r\n  const [opt2Values, setOpt2Values] = useState([]);\r\n  const [opt3Values, setOpt3Values] = useState([]);\r\n\r\n  // combos\r\n  const [rows, setRows] = useState([]);\r\n\r\n  const [saving, setSaving] = useState(false);\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  /* ---------- Load product (ชื่อ/โค้ด) ---------- */\r\n  const loadProduct = useCallback(async () => {\r\n    let p = null;\r\n    try {\r\n      const r = await api.get(path(`/admin/products/${productId}`));\r\n      p = normalizeProduct(r?.data);\r\n    } catch {}\r\n    if (!p) {\r\n      try {\r\n        const r = await api.get(path(`/products/${productId}`));\r\n        p = normalizeProduct(r?.data);\r\n      } catch {}\r\n    }\r\n    if (!p) {\r\n      try {\r\n        const r = await api.get(path(`/admin/products`), { params: { include_archived: 1 } });\r\n        const arr = Array.isArray(r?.data?.items) ? r.data.items : (Array.isArray(r?.data) ? r.data : []);\r\n        p = (arr || []).find((x) => Number(x.product_id) === productId) || null;\r\n      } catch {}\r\n    }\r\n    setProduct(p || null);\r\n  }, [productId]);\r\n\r\n  useEffect(() => { loadProduct(); }, [loadProduct]);\r\n\r\n  const productName = useMemo(\r\n    () => pickStr(product?.product_name, product?.name, product?.title),\r\n    [product]\r\n  );\r\n  const productCode = useMemo(\r\n    () => pickStr(product?.product_code, product?.code, `P${productId}`),\r\n    [product, productId]\r\n  );\r\n\r\n  /* ---------- Rebuild combos when values change ---------- */\r\n  useEffect(() => {\r\n    const v1 = opt1Values.length ? opt1Values : [null];\r\n    const v2 = opt2Values.length ? opt2Values : [null];\r\n    const v3 = opt3Values.length ? opt3Values : [null];\r\n    const combos = [];\r\n    for (const a of v1) for (const b of v2) for (const c of v3) {\r\n      combos.push({ opt1: a, opt2: b, opt3: c, price: \"\", sku: \"\", image: null });\r\n    }\r\n    setRows(combos);\r\n  }, [opt1Values, opt2Values, opt3Values]);\r\n\r\n  /* ---------- chip helpers ---------- */\r\n  const addTag = (list, setList, txt) => {\r\n    const v = String(txt || \"\").trim();\r\n    if (!v) return;\r\n    if (!list.some((x) => x === v)) setList([...list, v]);\r\n  };\r\n  const removeTag = (list, setList, idx) => setList(list.filter((_, i) => i !== idx));\r\n\r\n  /* ---------- per-row upload ---------- */\r\n  const onUploadRowImage = async (file, idx) => {\r\n    if (!file) return;\r\n\r\n    const tempUrl = URL.createObjectURL(file);\r\n    setRows((prev) => {\r\n      const a = [...prev];\r\n      a[idx] = { ...a[idx], image: tempUrl, __temp: true };\r\n      return a;\r\n    });\r\n\r\n    try {\r\n      const serverUrl = await tryUpload(file);\r\n      setRows((prev) => {\r\n        const a = [...prev];\r\n        a[idx] = { ...a[idx], image: serverUrl, __temp: false };\r\n        return a;\r\n      });\r\n    } catch (e) {\r\n      setRows((prev) => {\r\n        const a = [...prev];\r\n        a[idx] = { ...a[idx], image: null, __temp: false };\r\n        return a;\r\n      });\r\n      alert(e?.message || \"Upload failed\");\r\n    } finally {\r\n      setTimeout(() => URL.revokeObjectURL(tempUrl), 2500);\r\n    }\r\n  };\r\n\r\n  /* ---------- Auto SKU (ไม่แปลงภาษา) ---------- */\r\n  const autoSku = () => {\r\n    const base = productCode || `P${productId}`;\r\n    setRows((prev) =>\r\n      prev.map((r) => {\r\n        const parts = [base, r.opt1, r.opt2, r.opt3].filter(Boolean);\r\n        return { ...r, sku: parts.join(\"-\") + \"-\" + rand2() };\r\n      })\r\n    );\r\n  };\r\n\r\n  /* ---------- Save batch ---------- */\r\n  const saveAll = async () => {\r\n    setSaving(true);\r\n    try {\r\n      const items = rows.map((r) => ({\r\n        details: [\r\n          r.opt1 ? { name: opt1Name, value: r.opt1 } : null,\r\n          r.opt2 ? { name: opt2Name, value: r.opt2 } : null,\r\n          r.opt3 && opt3Name ? { name: opt3Name, value: r.opt3 } : null,\r\n        ].filter(Boolean),\r\n        sku: r.sku || null,\r\n        price: r.price ? Number(r.price) : null,\r\n        images: r.image ? [r.image] : [],\r\n      }));\r\n\r\n      // ใช้ endpoint ที่มีอยู่จริงใน backend\r\n      await api.post(\r\n        path(`/admin/products/${productId}/variants/generate`),\r\n        { items },\r\n        { headers: authHeader() }\r\n      );\r\n\r\n      setMsg(\"✅ Saved\");\r\n      setTimeout(() => setMsg(\"\"), 1800);\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(\"❌ Save failed\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"vm-page\">\r\n      {/* Header */}\r\n      <div className=\"vm-header\">\r\n        <div className=\"vm-title\">\r\n          <div className=\"vm-product-name\">{productName || `#${productId}`}</div>\r\n          <div className=\"vm-product-code\">{productCode}</div>\r\n        </div>\r\n        <Link to=\"/admin\" className=\"vm-back\">← กลับ</Link>\r\n      </div>\r\n\r\n      {msg && <div className=\"vm-msg\">{msg}</div>}\r\n\r\n      {/* Options */}\r\n      <div className=\"vm-options\">\r\n        {/* option 1 */}\r\n        <div className=\"vm-opt\">\r\n          <label>ตัวเลือกที่ 1</label>\r\n          <input value={opt1Name} onChange={(e) => setOpt1Name(e.target.value)} />\r\n          <div className=\"vm-chips\">\r\n            {opt1Values.map((v, i) => (\r\n              <span key={i} className=\"vm-chip\">\r\n                {v}\r\n                <button onClick={() => removeTag(opt1Values, setOpt1Values, i)}>×</button>\r\n              </span>\r\n            ))}\r\n            <input\r\n              placeholder=\"พิมพ์แล้ว Enter\"\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\") {\r\n                  e.preventDefault();\r\n                  addTag(opt1Values, setOpt1Values, e.currentTarget.value);\r\n                  e.currentTarget.value = \"\";\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* option 2 */}\r\n        <div className=\"vm-opt\">\r\n          <label>ตัวเลือกที่ 2 (ถ้ามี)</label>\r\n          <input value={opt2Name} onChange={(e) => setOpt2Name(e.target.value)} />\r\n          <div className=\"vm-chips\">\r\n            {opt2Values.map((v, i) => (\r\n              <span key={i} className=\"vm-chip\">\r\n                {v}\r\n                <button onClick={() => removeTag(opt2Values, setOpt2Values, i)}>×</button>\r\n              </span>\r\n            ))}\r\n            <input\r\n              placeholder=\"พิมพ์แล้ว Enter\"\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\") {\r\n                  e.preventDefault();\r\n                  addTag(opt2Values, setOpt2Values, e.currentTarget.value);\r\n                  e.currentTarget.value = \"\";\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* option 3 */}\r\n        <div className=\"vm-opt\">\r\n          <label>ตัวเลือกที่ 3 (ถ้ามี)</label>\r\n          <input\r\n            value={opt3Name}\r\n            onChange={(e) => setOpt3Name(e.target.value)}\r\n            placeholder=\"เช่น วัสดุ / รุ่น\"\r\n          />\r\n          <div className=\"vm-chips\">\r\n            {opt3Values.map((v, i) => (\r\n              <span key={i} className=\"vm-chip\">\r\n                {v}\r\n                <button onClick={() => removeTag(opt3Values, setOpt3Values, i)}>×</button>\r\n              </span>\r\n            ))}\r\n            <input\r\n              placeholder=\"พิมพ์แล้ว Enter\"\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\") {\r\n                  e.preventDefault();\r\n                  addTag(opt3Values, setOpt3Values, e.currentTarget.value);\r\n                  e.currentTarget.value = \"\";\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"vm-table-wrap\">\r\n        <table className=\"vm-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>รูปภาพ</th>\r\n              <th>{opt1Name || \"ตัวเลือก 1\"}</th>\r\n              <th>{opt2Name || \"ตัวเลือก 2\"}</th>\r\n              <th>{opt3Name || \"ตัวเลือก 3\"}</th>\r\n              <th>ราคา</th>\r\n              <th>SKU</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {rows.map((r, i) => (\r\n              <tr key={i}>\r\n                <td>\r\n                  {r.image ? (\r\n                    <img src={mediaSrc(r.image)} alt=\"\" className=\"vm-thumb\" />\r\n                  ) : (\r\n                    <label className=\"vm-upload\">\r\n                      +\r\n                      <input\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        onChange={(e) => onUploadRowImage(e.target.files?.[0], i)}\r\n                      />\r\n                    </label>\r\n                  )}\r\n                </td>\r\n                <td>{r.opt1 || \"-\"}</td>\r\n                <td>{r.opt2 || \"-\"}</td>\r\n                <td>{r.opt3 || \"-\"}</td>\r\n                <td>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    placeholder=\"ไม่ระบุ\"\r\n                    value={r.price}\r\n                    onChange={(e) => {\r\n                      const v = e.target.value;\r\n                      setRows((prev) => {\r\n                        const a = [...prev];\r\n                        a[i] = { ...a[i], price: v };\r\n                        return a;\r\n                      });\r\n                    }}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    placeholder=\"SKU\"\r\n                    value={r.sku}\r\n                    onChange={(e) => {\r\n                      const v = e.target.value;\r\n                      setRows((prev) => {\r\n                        const a = [...prev];\r\n                        a[i] = { ...a[i], sku: v };\r\n                        return a;\r\n                      });\r\n                    }}\r\n                  />\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"vm-actions\">\r\n        <button className=\"btn\" onClick={autoSku} disabled={saving}>\r\n          เติม SKU อัตโนมัติ\r\n        </button>\r\n        <button className=\"btn-primary\" onClick={saveAll} disabled={saving}>\r\n          บันทึกทั้งหมด\r\n        </button>\r\n      </div>\r\n\r\n      {/* Notes */}\r\n      <div className=\"vm-hint\">\r\n        <p>• Enter เพื่อเพิ่มค่า (เพิ่มได้หลายค่า)</p>\r\n        <p>• สต็อกจะอิงจากคลังจริง (ไม่ต้องกรอกที่นี่)</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}