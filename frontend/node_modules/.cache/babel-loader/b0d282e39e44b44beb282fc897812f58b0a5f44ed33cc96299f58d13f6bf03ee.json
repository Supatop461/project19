{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\components\\\\ThaiAddressPicker.js\",\n  _s = $RefreshSig$();\n// src/components/ThaiAddressPicker.js\n// หน้าที่: ให้ผู้ใช้เลือก จังหวัด → อำเภอ → ตำบล แบบโหลดทีละชั้น\n// จุดเด่นเวอร์ชันนี้:\n//  1) auto-fallback พาธ: ถ้า basePath ที่ส่งมาโหลด provinces.json ไม่ได้ จะลอง /thai → /data → '' ตามลำดับ\n//  2) แจ้ง error ชัดใน Console + แสดงข้อความเตือนเล็กๆ ใต้คอมโพเนนต์\n//  3) ใช้ “code” เป็น value ภายใน เพื่อกรองลูก (อำเภอ/ตำบล) แม่นยำ\n//  4) ยืดหยุ่นคีย์ JSON (รองรับ code|id และ name_th|name)\n\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\n\n// [HELP] อ่านคีย์แบบยืดหยุ่น (รองรับหลายรูปแบบชุดข้อมูล)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst codeOf = obj => {\n  var _ref, _ref2, _ref3, _ref4, _obj$code;\n  return (_ref = (_ref2 = (_ref3 = (_ref4 = (_obj$code = obj === null || obj === void 0 ? void 0 : obj.code) !== null && _obj$code !== void 0 ? _obj$code : obj === null || obj === void 0 ? void 0 : obj.id) !== null && _ref4 !== void 0 ? _ref4 : obj === null || obj === void 0 ? void 0 : obj.PROVINCE_ID) !== null && _ref3 !== void 0 ? _ref3 : obj === null || obj === void 0 ? void 0 : obj.AMPHUR_ID) !== null && _ref2 !== void 0 ? _ref2 : obj === null || obj === void 0 ? void 0 : obj.TAMBON_ID) !== null && _ref !== void 0 ? _ref : null;\n};\nconst nameOf = obj => {\n  var _ref5, _ref6, _ref7, _ref8, _obj$name_th;\n  return (_ref5 = (_ref6 = (_ref7 = (_ref8 = (_obj$name_th = obj === null || obj === void 0 ? void 0 : obj.name_th) !== null && _obj$name_th !== void 0 ? _obj$name_th : obj === null || obj === void 0 ? void 0 : obj.name) !== null && _ref8 !== void 0 ? _ref8 : obj === null || obj === void 0 ? void 0 : obj.PROVINCE_NAME) !== null && _ref7 !== void 0 ? _ref7 : obj === null || obj === void 0 ? void 0 : obj.AMPHUR_NAME) !== null && _ref6 !== void 0 ? _ref6 : obj === null || obj === void 0 ? void 0 : obj.TAMBON_NAME) !== null && _ref5 !== void 0 ? _ref5 : '';\n};\n\n// [HELP] สร้าง URL ให้สวย (กัน ///)\nconst joinUrl = (base, path) => `${String(base).replace(/\\/+$/, '')}/${String(path).replace(/^\\/+/, '')}`;\nexport default function ThaiAddressPicker({\n  value,\n  onChange,\n  // [CFG-01] ส่ง basePath ที่คาดว่าไฟล์อยู่ (เช่น \"/thai\" หรือ \"/data\")\n  basePath = '/thai',\n  // [CFG-02] รายการพาธ fallback ถ้าอันแรกโหลดไม่ได้ จะลองอันต่อไป\n  basePathCandidates = ['/thai', '/data', ''],\n  disabled = false\n}) {\n  _s();\n  var _subdistricts$find;\n  /* ---------- สเตต ---------- */\n  const [provinces, setProvinces] = useState([]);\n  const [districts, setDistricts] = useState([]);\n  const [subdistricts, setSubdists] = useState([]);\n  const [loadingProv, setLoadingProv] = useState(true);\n  const [loadingDist, setLoadingDist] = useState(false);\n  const [loadingSub, setLoadingSub] = useState(false);\n\n  // [STATE] พาธที่ “ใช้ได้จริง” หลังจากลองหลายอันแล้ว\n  const [baseUsed, setBaseUsed] = useState('');\n  // [STATE] ข้อความ error (ถ้าโหลด provinces ไม่ได้เลย)\n  const [errMsg, setErrMsg] = useState('');\n  const cacheRef = useRef({\n    districts: {},\n    subdistricts: {}\n  });\n  const patch = obj => onChange && onChange(obj);\n\n  /* =========================================================\r\n   * [LOAD-1] โหลด \"จังหวัด\": ลองหลาย basePath ตามลำดับ\r\n   * =======================================================*/\n  useEffect(() => {\n    let alive = true;\n    (async () => {\n      setLoadingProv(true);\n      setErrMsg('');\n\n      // รวม candidate (ใส่ basePath ไว้หัวขบวนก่อน)\n      const candidates = [basePath, ...basePathCandidates].filter((v, i, a) => v !== undefined && v !== null && a.indexOf(v) === i);\n      let loaded = false;\n      let lastError = '';\n      for (const bp of candidates) {\n        try {\n          const url = joinUrl(bp || '', 'provinces.json');\n          const res = await fetch(url, {\n            cache: 'force-cache'\n          });\n          if (!res.ok) throw new Error(`HTTP ${res.status}`);\n          const data = await res.json();\n          if (!Array.isArray(data) || data.length === 0) {\n            throw new Error('empty array');\n          }\n          if (!alive) return;\n          setProvinces(data);\n          setBaseUsed(bp || ''); // ✅ จำ basePath ที่ใช้ได้จริง\n          loaded = true;\n          break;\n        } catch (e) {\n          lastError = (e === null || e === void 0 ? void 0 : e.message) || String(e);\n          // ลองอันถัดไปต่อไป\n        }\n      }\n      if (!alive) return;\n      if (!loaded) {\n        // ❌ provinces โหลดไม่สำเร็จทุกพาธ\n        setProvinces([]);\n        setBaseUsed('');\n        const msg = 'โหลด provinces.json ไม่ได้ — โปรดตรวจพาธไฟล์ใน public/* (เช่น /thai หรือ /data) และรีเฟรชใหม่';\n        setErrMsg(msg);\n        console.error('[ThaiAddressPicker] provinces load failed on all paths:', candidates, 'lastError:', lastError);\n      }\n      setLoadingProv(false);\n    })();\n    return () => {\n      alive = false;\n    };\n  }, [basePath, JSON.stringify(basePathCandidates)]);\n\n  /* ---------- หารหัสจากชื่อ (กรณี value เดิมมีแต่ \"ชื่อ\") ---------- */\n  const currentProvinceCode = useMemo(() => {\n    if (value !== null && value !== void 0 && value.province_code) return String(value.province_code);\n    const p = provinces.find(x => nameOf(x).trim() === ((value === null || value === void 0 ? void 0 : value.province) || '').trim());\n    return p ? String(codeOf(p)) : '';\n  }, [value === null || value === void 0 ? void 0 : value.province_code, value === null || value === void 0 ? void 0 : value.province, provinces]);\n  const currentDistrictCode = useMemo(() => {\n    if (value !== null && value !== void 0 && value.district_code) return String(value.district_code);\n    const d = districts.find(x => nameOf(x).trim() === ((value === null || value === void 0 ? void 0 : value.district) || '').trim());\n    return d ? String(codeOf(d)) : '';\n  }, [value === null || value === void 0 ? void 0 : value.district_code, value === null || value === void 0 ? void 0 : value.district, districts]);\n\n  /* =========================================================\r\n   * [LOAD-2] เมื่อ province เปลี่ยน → โหลด \"อำเภอ\"\r\n   * =======================================================*/\n  useEffect(() => {\n    const provCode = currentProvinceCode;\n    if (!provCode || !baseUsed) {\n      setDistricts([]);\n      setSubdists([]);\n      return;\n    }\n    if (cacheRef.current.districts[provCode]) {\n      setDistricts(cacheRef.current.districts[provCode]);\n      return;\n    }\n    let alive = true;\n    (async () => {\n      setLoadingDist(true);\n      try {\n        const url = joinUrl(baseUsed, `districts/${provCode}.json`);\n        const res = await fetch(url, {\n          cache: 'force-cache'\n        });\n        let data = [];\n        if (res.ok) {\n          data = await res.json();\n        } else {\n          // Fallback: ลองโหลดไฟล์รวม amphures.json แล้ว filter ด้วย province_id\n          const res2 = await fetch(joinUrl(baseUsed, 'amphures.json'), {\n            cache: 'force-cache'\n          });\n          if (res2.ok) {\n            const all = await res2.json();\n            data = (all || []).filter(a => {\n              var _ref9, _a$province_id;\n              return String((_ref9 = (_a$province_id = a.province_id) !== null && _a$province_id !== void 0 ? _a$province_id : a.PROVINCE_ID) !== null && _ref9 !== void 0 ? _ref9 : '') === String(provCode);\n            });\n          } else {\n            throw new Error(`HTTP ${res.status} on districts, and amphures.json not found`);\n          }\n        }\n        if (!alive) return;\n        const arr = Array.isArray(data) ? data : [];\n        cacheRef.current.districts[provCode] = arr;\n        setDistricts(arr);\n      } catch (e) {\n        console.error('[ThaiAddressPicker] districts load error:', e);\n        if (alive) setDistricts([]);\n      } finally {\n        if (alive) setLoadingDist(false);\n      }\n    })();\n    return () => {\n      alive = false;\n    };\n  }, [currentProvinceCode, baseUsed]);\n\n  /* =========================================================\r\n   * [LOAD-3] เมื่อ district เปลี่ยน → โหลด \"ตำบล\"\r\n   * =======================================================*/\n  useEffect(() => {\n    const distCode = currentDistrictCode;\n    if (!distCode || !baseUsed) {\n      setSubdists([]);\n      return;\n    }\n    if (cacheRef.current.subdistricts[distCode]) {\n      setSubdists(cacheRef.current.subdistricts[distCode]);\n      return;\n    }\n    let alive = true;\n    (async () => {\n      setLoadingSub(true);\n      try {\n        const url = joinUrl(baseUsed, `subdistricts/${distCode}.json`);\n        const res = await fetch(url, {\n          cache: 'force-cache'\n        });\n        let data = [];\n        if (res.ok) {\n          data = await res.json();\n        } else {\n          // Fallback: ลอง tambons.json แล้ว filter ด้วย amphure_id\n          const res2 = await fetch(joinUrl(baseUsed, 'tambons.json'), {\n            cache: 'force-cache'\n          });\n          if (res2.ok) {\n            const all = await res2.json();\n            data = (all || []).filter(t => {\n              var _ref0, _t$amphure_id;\n              return String((_ref0 = (_t$amphure_id = t.amphure_id) !== null && _t$amphure_id !== void 0 ? _t$amphure_id : t.AMPHUR_ID) !== null && _ref0 !== void 0 ? _ref0 : '') === String(distCode);\n            });\n          } else {\n            throw new Error(`HTTP ${res.status} on subdistricts, and tambons.json not found`);\n          }\n        }\n        if (!alive) return;\n        const arr = Array.isArray(data) ? data : [];\n        cacheRef.current.subdistricts[distCode] = arr;\n        setSubdists(arr);\n      } catch (e) {\n        console.error('[ThaiAddressPicker] subdistricts load error:', e);\n        if (alive) setSubdists([]);\n      } finally {\n        if (alive) setLoadingSub(false);\n      }\n    })();\n    return () => {\n      alive = false;\n    };\n  }, [currentDistrictCode, baseUsed]);\n\n  /* ---------- onChange ของ select ---------- */\n  const handleProvince = e => {\n    const code = e.target.value || '';\n    const sel = provinces.find(p => String(codeOf(p)) === String(code)) || null;\n    patch({\n      province: sel ? nameOf(sel) : '',\n      province_code: sel ? codeOf(sel) : null,\n      district: '',\n      district_code: null,\n      subdistrict: '',\n      subdistrict_code: null,\n      postal_code: ''\n    });\n  };\n  const handleDistrict = e => {\n    const code = e.target.value || '';\n    const sel = districts.find(d => String(codeOf(d)) === String(code)) || null;\n    patch({\n      district: sel ? nameOf(sel) : '',\n      district_code: sel ? codeOf(sel) : null,\n      subdistrict: '',\n      subdistrict_code: null,\n      postal_code: ''\n    });\n  };\n  const handleSubdistrict = e => {\n    var _ref1, _sel$zip_code;\n    const code = e.target.value || '';\n    const sel = subdistricts.find(s => String(codeOf(s)) === String(code)) || null;\n    const zip = (_ref1 = (_sel$zip_code = sel === null || sel === void 0 ? void 0 : sel.zip_code) !== null && _sel$zip_code !== void 0 ? _sel$zip_code : sel === null || sel === void 0 ? void 0 : sel.POSTCODE) !== null && _ref1 !== void 0 ? _ref1 : '';\n    patch({\n      subdistrict: sel ? nameOf(sel) : '',\n      subdistrict_code: sel ? codeOf(sel) : null,\n      postal_code: zip ? String(zip) : ''\n    });\n  };\n\n  /* ---------- disabled ---------- */\n  const disProv = disabled || loadingProv || !!errMsg;\n  const disDist = disabled || !currentProvinceCode || loadingDist || !!errMsg;\n  const disSub = disabled || !currentDistrictCode || loadingSub || !!errMsg;\n\n  /* ==================== UI ==================== */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'grid',\n      gap: 8\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr 1fr',\n        gap: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        value: currentProvinceCode,\n        onChange: handleProvince,\n        disabled: disProv,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: loadingProv ? 'กำลังโหลดจังหวัด...' : errMsg ? 'โหลดจังหวัดไม่สำเร็จ' : '-- เลือกจังหวัด --'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), provinces.map(p => {\n          var _codeOf;\n          const code = String((_codeOf = codeOf(p)) !== null && _codeOf !== void 0 ? _codeOf : '');\n          const name = nameOf(p);\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: code,\n            children: name\n          }, code, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 20\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: currentDistrictCode,\n        onChange: handleDistrict,\n        disabled: disDist,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: loadingDist ? 'กำลังโหลดอำเภอ...' : currentProvinceCode ? '-- เลือกอำเภอ --' : 'เลือกจังหวัดก่อน'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), districts.map(d => {\n          var _codeOf2;\n          const code = String((_codeOf2 = codeOf(d)) !== null && _codeOf2 !== void 0 ? _codeOf2 : '');\n          const name = nameOf(d);\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: code,\n            children: name\n          }, code, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 20\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: value !== null && value !== void 0 && value.subdistrict_code ? String(value.subdistrict_code) : ((_subdistricts$find = subdistricts.find(t => nameOf(t) === (value === null || value === void 0 ? void 0 : value.subdistrict))) === null || _subdistricts$find === void 0 ? void 0 : _subdistricts$find.code) || '',\n        onChange: handleSubdistrict,\n        disabled: disSub,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: loadingSub ? 'กำลังโหลดตำบล...' : currentDistrictCode ? '-- เลือกตำบล --' : 'เลือกอำเภอก่อน'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), subdistricts.map(s => {\n          var _codeOf3;\n          const code = String((_codeOf3 = codeOf(s)) !== null && _codeOf3 !== void 0 ? _codeOf3 : '');\n          const name = nameOf(s);\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: code,\n            children: name\n          }, code, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 20\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E44\\u0E1B\\u0E23\\u0E29\\u0E13\\u0E35\\u0E22\\u0E4C\",\n      value: (value === null || value === void 0 ? void 0 : value.postal_code) || '',\n      onChange: e => patch({\n        postal_code: e.target.value\n      }),\n      disabled: disabled || !!errMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this), baseUsed ? /*#__PURE__*/_jsxDEV(\"small\", {\n      style: {\n        color: '#999'\n      },\n      children: [\"\\u0E43\\u0E0A\\u0E49\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E08\\u0E32\\u0E01: \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: baseUsed || '/'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 56\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 9\n    }, this) : null, errMsg ? /*#__PURE__*/_jsxDEV(\"small\", {\n      style: {\n        color: '#c00'\n      },\n      children: errMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 258,\n    columnNumber: 5\n  }, this);\n}\n_s(ThaiAddressPicker, \"XRIGS8k8xbDpW32uosPG6qrOwe4=\");\n_c = ThaiAddressPicker;\nvar _c;\n$RefreshReg$(_c, \"ThaiAddressPicker\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","jsxDEV","_jsxDEV","codeOf","obj","_ref","_ref2","_ref3","_ref4","_obj$code","code","id","PROVINCE_ID","AMPHUR_ID","TAMBON_ID","nameOf","_ref5","_ref6","_ref7","_ref8","_obj$name_th","name_th","name","PROVINCE_NAME","AMPHUR_NAME","TAMBON_NAME","joinUrl","base","path","String","replace","ThaiAddressPicker","value","onChange","basePath","basePathCandidates","disabled","_s","_subdistricts$find","provinces","setProvinces","districts","setDistricts","subdistricts","setSubdists","loadingProv","setLoadingProv","loadingDist","setLoadingDist","loadingSub","setLoadingSub","baseUsed","setBaseUsed","errMsg","setErrMsg","cacheRef","patch","alive","candidates","filter","v","i","a","undefined","indexOf","loaded","lastError","bp","url","res","fetch","cache","ok","Error","status","data","json","Array","isArray","length","e","message","msg","console","error","JSON","stringify","currentProvinceCode","province_code","p","find","x","trim","province","currentDistrictCode","district_code","d","district","provCode","current","res2","all","_ref9","_a$province_id","province_id","arr","distCode","t","_ref0","_t$amphure_id","amphure_id","handleProvince","target","sel","subdistrict","subdistrict_code","postal_code","handleDistrict","handleSubdistrict","_ref1","_sel$zip_code","s","zip","zip_code","POSTCODE","disProv","disDist","disSub","style","display","gap","children","gridTemplateColumns","fileName","_jsxFileName","lineNumber","columnNumber","map","_codeOf","_codeOf2","_codeOf3","placeholder","color","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/components/ThaiAddressPicker.js"],"sourcesContent":["// src/components/ThaiAddressPicker.js\r\n// หน้าที่: ให้ผู้ใช้เลือก จังหวัด → อำเภอ → ตำบล แบบโหลดทีละชั้น\r\n// จุดเด่นเวอร์ชันนี้:\r\n//  1) auto-fallback พาธ: ถ้า basePath ที่ส่งมาโหลด provinces.json ไม่ได้ จะลอง /thai → /data → '' ตามลำดับ\r\n//  2) แจ้ง error ชัดใน Console + แสดงข้อความเตือนเล็กๆ ใต้คอมโพเนนต์\r\n//  3) ใช้ “code” เป็น value ภายใน เพื่อกรองลูก (อำเภอ/ตำบล) แม่นยำ\r\n//  4) ยืดหยุ่นคีย์ JSON (รองรับ code|id และ name_th|name)\r\n\r\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\r\n\r\n// [HELP] อ่านคีย์แบบยืดหยุ่น (รองรับหลายรูปแบบชุดข้อมูล)\r\nconst codeOf = (obj) =>\r\n  obj?.code ?? obj?.id ?? obj?.PROVINCE_ID ?? obj?.AMPHUR_ID ?? obj?.TAMBON_ID ?? null;\r\nconst nameOf = (obj) =>\r\n  obj?.name_th ?? obj?.name ?? obj?.PROVINCE_NAME ?? obj?.AMPHUR_NAME ?? obj?.TAMBON_NAME ?? '';\r\n\r\n// [HELP] สร้าง URL ให้สวย (กัน ///)\r\nconst joinUrl = (base, path) => `${String(base).replace(/\\/+$/, '')}/${String(path).replace(/^\\/+/, '')}`;\r\n\r\nexport default function ThaiAddressPicker({\r\n  value,\r\n  onChange,\r\n  // [CFG-01] ส่ง basePath ที่คาดว่าไฟล์อยู่ (เช่น \"/thai\" หรือ \"/data\")\r\n  basePath = '/thai',\r\n  // [CFG-02] รายการพาธ fallback ถ้าอันแรกโหลดไม่ได้ จะลองอันต่อไป\r\n  basePathCandidates = ['/thai', '/data', ''],\r\n  disabled = false,\r\n}) {\r\n  /* ---------- สเตต ---------- */\r\n  const [provinces, setProvinces]   = useState([]);\r\n  const [districts, setDistricts]   = useState([]);\r\n  const [subdistricts, setSubdists] = useState([]);\r\n\r\n  const [loadingProv, setLoadingProv] = useState(true);\r\n  const [loadingDist, setLoadingDist] = useState(false);\r\n  const [loadingSub,  setLoadingSub ] = useState(false);\r\n\r\n  // [STATE] พาธที่ “ใช้ได้จริง” หลังจากลองหลายอันแล้ว\r\n  const [baseUsed, setBaseUsed] = useState('');\r\n  // [STATE] ข้อความ error (ถ้าโหลด provinces ไม่ได้เลย)\r\n  const [errMsg, setErrMsg] = useState('');\r\n\r\n  const cacheRef = useRef({ districts: {}, subdistricts: {} });\r\n  const patch = (obj) => onChange && onChange(obj);\r\n\r\n  /* =========================================================\r\n   * [LOAD-1] โหลด \"จังหวัด\": ลองหลาย basePath ตามลำดับ\r\n   * =======================================================*/\r\n  useEffect(() => {\r\n    let alive = true;\r\n\r\n    (async () => {\r\n      setLoadingProv(true);\r\n      setErrMsg('');\r\n\r\n      // รวม candidate (ใส่ basePath ไว้หัวขบวนก่อน)\r\n      const candidates = [basePath, ...basePathCandidates]\r\n        .filter((v, i, a) => v !== undefined && v !== null && a.indexOf(v) === i);\r\n\r\n      let loaded = false;\r\n      let lastError = '';\r\n\r\n      for (const bp of candidates) {\r\n        try {\r\n          const url = joinUrl(bp || '', 'provinces.json');\r\n          const res = await fetch(url, { cache: 'force-cache' });\r\n          if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n          const data = await res.json();\r\n          if (!Array.isArray(data) || data.length === 0) {\r\n            throw new Error('empty array');\r\n          }\r\n          if (!alive) return;\r\n\r\n          setProvinces(data);\r\n          setBaseUsed(bp || '');          // ✅ จำ basePath ที่ใช้ได้จริง\r\n          loaded = true;\r\n          break;\r\n        } catch (e) {\r\n          lastError = e?.message || String(e);\r\n          // ลองอันถัดไปต่อไป\r\n        }\r\n      }\r\n\r\n      if (!alive) return;\r\n\r\n      if (!loaded) {\r\n        // ❌ provinces โหลดไม่สำเร็จทุกพาธ\r\n        setProvinces([]);\r\n        setBaseUsed('');\r\n        const msg =\r\n          'โหลด provinces.json ไม่ได้ — โปรดตรวจพาธไฟล์ใน public/* (เช่น /thai หรือ /data) และรีเฟรชใหม่';\r\n        setErrMsg(msg);\r\n        console.error('[ThaiAddressPicker] provinces load failed on all paths:', candidates, 'lastError:', lastError);\r\n      }\r\n\r\n      setLoadingProv(false);\r\n    })();\r\n\r\n    return () => { alive = false; };\r\n  }, [basePath, JSON.stringify(basePathCandidates)]);\r\n\r\n  /* ---------- หารหัสจากชื่อ (กรณี value เดิมมีแต่ \"ชื่อ\") ---------- */\r\n  const currentProvinceCode = useMemo(() => {\r\n    if (value?.province_code) return String(value.province_code);\r\n    const p = provinces.find(x => nameOf(x).trim() === (value?.province || '').trim());\r\n    return p ? String(codeOf(p)) : '';\r\n  }, [value?.province_code, value?.province, provinces]);\r\n\r\n  const currentDistrictCode = useMemo(() => {\r\n    if (value?.district_code) return String(value.district_code);\r\n    const d = districts.find(x => nameOf(x).trim() === (value?.district || '').trim());\r\n    return d ? String(codeOf(d)) : '';\r\n  }, [value?.district_code, value?.district, districts]);\r\n\r\n  /* =========================================================\r\n   * [LOAD-2] เมื่อ province เปลี่ยน → โหลด \"อำเภอ\"\r\n   * =======================================================*/\r\n  useEffect(() => {\r\n    const provCode = currentProvinceCode;\r\n    if (!provCode || !baseUsed) {\r\n      setDistricts([]);\r\n      setSubdists([]);\r\n      return;\r\n    }\r\n\r\n    if (cacheRef.current.districts[provCode]) {\r\n      setDistricts(cacheRef.current.districts[provCode]);\r\n      return;\r\n    }\r\n\r\n    let alive = true;\r\n    (async () => {\r\n      setLoadingDist(true);\r\n      try {\r\n        const url = joinUrl(baseUsed, `districts/${provCode}.json`);\r\n        const res  = await fetch(url, { cache: 'force-cache' });\r\n        let data   = [];\r\n        if (res.ok) {\r\n          data = await res.json();\r\n        } else {\r\n          // Fallback: ลองโหลดไฟล์รวม amphures.json แล้ว filter ด้วย province_id\r\n          const res2 = await fetch(joinUrl(baseUsed, 'amphures.json'), { cache: 'force-cache' });\r\n          if (res2.ok) {\r\n            const all = await res2.json();\r\n            data = (all || []).filter(a => String(a.province_id ?? a.PROVINCE_ID ?? '') === String(provCode));\r\n          } else {\r\n            throw new Error(`HTTP ${res.status} on districts, and amphures.json not found`);\r\n          }\r\n        }\r\n\r\n        if (!alive) return;\r\n        const arr = Array.isArray(data) ? data : [];\r\n        cacheRef.current.districts[provCode] = arr;\r\n        setDistricts(arr);\r\n      } catch (e) {\r\n        console.error('[ThaiAddressPicker] districts load error:', e);\r\n        if (alive) setDistricts([]);\r\n      } finally {\r\n        if (alive) setLoadingDist(false);\r\n      }\r\n    })();\r\n\r\n    return () => { alive = false; };\r\n  }, [currentProvinceCode, baseUsed]);\r\n\r\n  /* =========================================================\r\n   * [LOAD-3] เมื่อ district เปลี่ยน → โหลด \"ตำบล\"\r\n   * =======================================================*/\r\n  useEffect(() => {\r\n    const distCode = currentDistrictCode;\r\n    if (!distCode || !baseUsed) {\r\n      setSubdists([]);\r\n      return;\r\n    }\r\n\r\n    if (cacheRef.current.subdistricts[distCode]) {\r\n      setSubdists(cacheRef.current.subdistricts[distCode]);\r\n      return;\r\n    }\r\n\r\n    let alive = true;\r\n    (async () => {\r\n      setLoadingSub(true);\r\n      try {\r\n        const url = joinUrl(baseUsed, `subdistricts/${distCode}.json`);\r\n        const res  = await fetch(url, { cache: 'force-cache' });\r\n        let data   = [];\r\n        if (res.ok) {\r\n          data = await res.json();\r\n        } else {\r\n          // Fallback: ลอง tambons.json แล้ว filter ด้วย amphure_id\r\n          const res2 = await fetch(joinUrl(baseUsed, 'tambons.json'), { cache: 'force-cache' });\r\n          if (res2.ok) {\r\n            const all = await res2.json();\r\n            data = (all || []).filter(t => String(t.amphure_id ?? t.AMPHUR_ID ?? '') === String(distCode));\r\n          } else {\r\n            throw new Error(`HTTP ${res.status} on subdistricts, and tambons.json not found`);\r\n          }\r\n        }\r\n\r\n        if (!alive) return;\r\n        const arr = Array.isArray(data) ? data : [];\r\n        cacheRef.current.subdistricts[distCode] = arr;\r\n        setSubdists(arr);\r\n      } catch (e) {\r\n        console.error('[ThaiAddressPicker] subdistricts load error:', e);\r\n        if (alive) setSubdists([]);\r\n      } finally {\r\n        if (alive) setLoadingSub(false);\r\n      }\r\n    })();\r\n\r\n    return () => { alive = false; };\r\n  }, [currentDistrictCode, baseUsed]);\r\n\r\n  /* ---------- onChange ของ select ---------- */\r\n  const handleProvince = (e) => {\r\n    const code = e.target.value || '';\r\n    const sel  = provinces.find(p => String(codeOf(p)) === String(code)) || null;\r\n    patch({\r\n      province: sel ? nameOf(sel) : '',\r\n      province_code: sel ? codeOf(sel) : null,\r\n      district: '', district_code: null,\r\n      subdistrict: '', subdistrict_code: null,\r\n      postal_code: '',\r\n    });\r\n  };\r\n\r\n  const handleDistrict = (e) => {\r\n    const code = e.target.value || '';\r\n    const sel  = districts.find(d => String(codeOf(d)) === String(code)) || null;\r\n    patch({\r\n      district: sel ? nameOf(sel) : '',\r\n      district_code: sel ? codeOf(sel) : null,\r\n      subdistrict: '', subdistrict_code: null,\r\n      postal_code: '',\r\n    });\r\n  };\r\n\r\n  const handleSubdistrict = (e) => {\r\n    const code = e.target.value || '';\r\n    const sel  = subdistricts.find(s => String(codeOf(s)) === String(code)) || null;\r\n    const zip  = sel?.zip_code ?? sel?.POSTCODE ?? '';\r\n    patch({\r\n      subdistrict: sel ? nameOf(sel) : '',\r\n      subdistrict_code: sel ? codeOf(sel) : null,\r\n      postal_code: zip ? String(zip) : '',\r\n    });\r\n  };\r\n\r\n  /* ---------- disabled ---------- */\r\n  const disProv = disabled || loadingProv || !!errMsg;\r\n  const disDist = disabled || !currentProvinceCode || loadingDist || !!errMsg;\r\n  const disSub  = disabled || !currentDistrictCode || loadingSub  || !!errMsg;\r\n\r\n  /* ==================== UI ==================== */\r\n  return (\r\n    <div style={{ display: 'grid', gap: 8 }}>\r\n      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: 8 }}>\r\n        {/* จังหวัด: ใช้ code เป็น value ภายใน */}\r\n        <select value={currentProvinceCode} onChange={handleProvince} disabled={disProv}>\r\n          <option value=\"\">\r\n            {loadingProv ? 'กำลังโหลดจังหวัด...' : (errMsg ? 'โหลดจังหวัดไม่สำเร็จ' : '-- เลือกจังหวัด --')}\r\n          </option>\r\n          {provinces.map(p => {\r\n            const code = String(codeOf(p) ?? '');\r\n            const name = nameOf(p);\r\n            return <option key={code} value={code}>{name}</option>;\r\n          })}\r\n        </select>\r\n\r\n        {/* อำเภอ */}\r\n        <select value={currentDistrictCode} onChange={handleDistrict} disabled={disDist}>\r\n          <option value=\"\">\r\n            {loadingDist ? 'กำลังโหลดอำเภอ...' : (currentProvinceCode ? '-- เลือกอำเภอ --' : 'เลือกจังหวัดก่อน')}\r\n          </option>\r\n          {districts.map(d => {\r\n            const code = String(codeOf(d) ?? '');\r\n            const name = nameOf(d);\r\n            return <option key={code} value={code}>{name}</option>;\r\n          })}\r\n        </select>\r\n\r\n        {/* ตำบล */}\r\n        <select\r\n          value={\r\n            value?.subdistrict_code\r\n              ? String(value.subdistrict_code)\r\n              : (subdistricts.find(t => nameOf(t) === value?.subdistrict)?.code || '')\r\n          }\r\n          onChange={handleSubdistrict}\r\n          disabled={disSub}\r\n        >\r\n          <option value=\"\">\r\n            {loadingSub ? 'กำลังโหลดตำบล...' : (currentDistrictCode ? '-- เลือกตำบล --' : 'เลือกอำเภอก่อน')}\r\n          </option>\r\n          {subdistricts.map(s => {\r\n            const code = String(codeOf(s) ?? '');\r\n            const name = nameOf(s);\r\n            return <option key={code} value={code}>{name}</option>;\r\n          })}\r\n        </select>\r\n      </div>\r\n\r\n      {/* รหัสไปรษณีย์: เติมจากตำบล (เปิดให้แก้เองได้ถ้าต้องการเอา readOnly ออกจาก input ใน Addresses.js) */}\r\n      <input\r\n        placeholder=\"รหัสไปรษณีย์\"\r\n        value={value?.postal_code || ''}\r\n        onChange={e => patch({ postal_code: e.target.value })}\r\n        disabled={disabled || !!errMsg}\r\n      />\r\n\r\n      {/* แสดง basePath ที่ถูกใช้จริง + ข้อความเตือนถ้าโหลดไม่ได้ */}\r\n      {baseUsed ? (\r\n        <small style={{ color: '#999' }}>ใช้ข้อมูลจาก: <code>{baseUsed || '/'}</code></small>\r\n      ) : null}\r\n      {errMsg ? (\r\n        <small style={{ color: '#c00' }}>{errMsg}</small>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}