{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\pages\\\\HomeUser.js\",\n  _s = $RefreshSig$();\n// src/pages/HomeUser.js\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport './HomeUser.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function HomeUser() {\n  _s();\n  const nav = useNavigate();\n\n  /* ======================= ผู้ใช้ (อ่านจาก localStorage) ======================= */\n  const user = useMemo(() => {\n    const fullname = localStorage.getItem('fullname') || 'ผู้ใช้งาน';\n    return {\n      fullname,\n      avatar: process.env.PUBLIC_URL + '/profile.jpg'\n    };\n  }, []);\n\n  /* ============== ตัวช่วยคำนวณ path ให้ถูก ไม่เกิด /api/api ซ้ำ ============== */\n  const apiPath = p => (axios.defaults.baseURL || '').replace(/\\/+$/, '').endsWith('/api') ? p : '/api' + p;\n\n  /* ======================= หมวดหมู่ & สินค้าขายดี ======================= */\n  const [categories, setCategories] = useState([]); // {id, slug, name, image}\n  const [bestSellers, setBestSellers] = useState([]); // {id, name, price, img}\n  const [loading, setLoading] = useState({\n    cat: true,\n    best: true\n  });\n  const [errMsg, setErrMsg] = useState('');\n\n  /* -------------------------- Fallback เมื่อ API ล่ม -------------------------- */\n  const fallbackCategories = [{\n    id: 'tools',\n    slug: 'tools',\n    name: 'อุปกรณ์ปลูก',\n    image: process.env.PUBLIC_URL + '/opakorn.jpg'\n  }, {\n    id: 'plants',\n    slug: 'plants',\n    name: 'ต้นไม้',\n    image: process.env.PUBLIC_URL + '/tonmai.jpg'\n  }];\n  const fallbackBest = [{\n    id: 1,\n    name: 'ต้นกล้าลำใยคริสตัล',\n    price: 250,\n    img: process.env.PUBLIC_URL + '/lamyai.jpg'\n  }, {\n    id: 2,\n    name: 'ต้นพญานาคราช',\n    price: 150,\n    img: process.env.PUBLIC_URL + '/payanaka1.jpg'\n  }, {\n    id: 3,\n    name: 'กระถางมินิมอล',\n    price: 300,\n    img: process.env.PUBLIC_URL + '/katar.jpeg'\n  }, {\n    id: 4,\n    name: 'ดินสูตรทางร้าน',\n    price: 99,\n    img: process.env.PUBLIC_URL + '/din.jpg'\n  }];\n\n  /* ============================ โหลดหมวดหมู่จาก API ============================ */\n  useEffect(() => {\n    (async () => {\n      try {\n        var _res$data;\n        setLoading(s => ({\n          ...s,\n          cat: true\n        }));\n        const res = await axios.get(apiPath('/categories?status=active'));\n        const list = (Array.isArray((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.data) ? res.data.data : res.data) || [];\n\n        // ปรับรูปแบบให้เป็น {id, slug, name, image} รองรับสคีม categories ของโปรเจกต์ (category_id, category_name)\n        const norm = list.map((c, idx) => {\n          var _ref, _ref2, _ref3, _c$category_id, _ref4, _ref5, _ref6, _c$category_name, _ref7, _c$slug;\n          const cid = (_ref = (_ref2 = (_ref3 = (_c$category_id = c.category_id) !== null && _c$category_id !== void 0 ? _c$category_id : c.id) !== null && _ref3 !== void 0 ? _ref3 : c.code) !== null && _ref2 !== void 0 ? _ref2 : c.slug) !== null && _ref !== void 0 ? _ref : `cat-${idx}`;\n          // เดาชื่อ slug แบบฉลาดนิดนึง ถ้าเห็นคำว่าต้นไม้/อุปกรณ์ จะ map เป็น plants/tools\n          const rawName = ((_ref4 = (_ref5 = (_ref6 = (_c$category_name = c.category_name) !== null && _c$category_name !== void 0 ? _c$category_name : c.name_th) !== null && _ref6 !== void 0 ? _ref6 : c.name) !== null && _ref5 !== void 0 ? _ref5 : c.title) !== null && _ref4 !== void 0 ? _ref4 : '').toString();\n          const guessByName = rawName.toLowerCase().includes('อุปกรณ์') ? 'tools' : rawName.toLowerCase().includes('ต้นไม้') ? 'plants' : undefined;\n          const slug = (_ref7 = (_c$slug = c.slug) !== null && _c$slug !== void 0 ? _c$slug : guessByName) !== null && _ref7 !== void 0 ? _ref7 : String(cid).toLowerCase();\n          return {\n            id: String(cid),\n            slug,\n            name: rawName || 'ไม่ระบุชื่อ',\n            image: c.image_url || c.image || c.cover || c.thumbnail || (slug === 'tools' ? process.env.PUBLIC_URL + '/opakorn.jpg' : process.env.PUBLIC_URL + '/tonmai.jpg')\n          };\n        });\n\n        // ลองเลือก 2 หมวดที่อยากโชว์ก่อน: tools + plants ถ้ามี ไม่งั้นหยิบ 2 ตัวแรก\n        const order = ['tools', 'plants'];\n        const bySlug = s => norm.find(x => x.slug === s);\n        const picked = order.map(bySlug).filter(Boolean);\n        setCategories((picked.length ? picked : norm.slice(0, 2)) || fallbackCategories);\n      } catch (err) {\n        var _err$response;\n        console.warn('load categories failed:', err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status, err === null || err === void 0 ? void 0 : err.message);\n        setCategories(fallbackCategories);\n      } finally {\n        setLoading(s => ({\n          ...s,\n          cat: false\n        }));\n      }\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /* ======================= โหลดสินค้าขายดีจาก API ======================= */\n  useEffect(() => {\n    (async () => {\n      // ⚙️ ปรับ mapping ให้รองรับแบ็กเอนด์จริง (product_id/product_name/selling_price/image_url)\n      const normalizeProduct = (p, idx) => {\n        var _ref8, _ref9, _p$product_id, _ref0, _ref1, _ref10, _p$product_name, _ref11, _ref12, _ref13, _p$selling_price;\n        return {\n          id: (_ref8 = (_ref9 = (_p$product_id = p.product_id) !== null && _p$product_id !== void 0 ? _p$product_id : p.id) !== null && _ref9 !== void 0 ? _ref9 : p._id) !== null && _ref8 !== void 0 ? _ref8 : `p-${idx}`,\n          name: (_ref0 = (_ref1 = (_ref10 = (_p$product_name = p.product_name) !== null && _p$product_name !== void 0 ? _p$product_name : p.name_th) !== null && _ref10 !== void 0 ? _ref10 : p.name) !== null && _ref1 !== void 0 ? _ref1 : p.title) !== null && _ref0 !== void 0 ? _ref0 : 'สินค้า',\n          price: Number((_ref11 = (_ref12 = (_ref13 = (_p$selling_price = p.selling_price) !== null && _p$selling_price !== void 0 ? _p$selling_price : p.price) !== null && _ref13 !== void 0 ? _ref13 : p.sale_price) !== null && _ref12 !== void 0 ? _ref12 : p.amount) !== null && _ref11 !== void 0 ? _ref11 : 0),\n          img: p.image_url || p.image || p.cover || p.thumbnail || (Array.isArray(p.images) ? p.images[0] : '') || process.env.PUBLIC_URL + '/logo.png'\n        };\n      };\n      async function tryFetch(url) {\n        try {\n          var _r$data;\n          const r = await axios.get(url);\n          const arr = (Array.isArray((_r$data = r.data) === null || _r$data === void 0 ? void 0 : _r$data.data) ? r.data.data : r.data) || [];\n          const mapped = arr.map((p, i) => normalizeProduct(p, i)).filter(x => x.id && x.name);\n          if (mapped.length) return mapped;\n        } catch (_) {}\n        return null;\n      }\n      try {\n        var _products;\n        setLoading(s => ({\n          ...s,\n          best: true\n        }));\n        const urls = [apiPath('/products/best-sellers?limit=8'), apiPath('/products?sort=popular&limit=8'), apiPath('/products?featured=1&limit=8')];\n        let products = null;\n        for (const u of urls) {\n          products = await tryFetch(u);\n          if (products) break;\n        }\n        setBestSellers(((_products = products) === null || _products === void 0 ? void 0 : _products.slice(0, 8)) || fallbackBest);\n      } catch (err) {\n        var _err$response2;\n        console.warn('load best-sellers failed:', err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status, err === null || err === void 0 ? void 0 : err.message);\n        setBestSellers(fallbackBest);\n        setErrMsg('แสดงข้อมูลจากตัวอย่างชั่วคราว');\n      } finally {\n        setLoading(s => ({\n          ...s,\n          best: false\n        }));\n      }\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /* =============================== ตะกร้า =============================== */\n  const addToCart = product => {\n    let cart = JSON.parse(localStorage.getItem('cart') || '[]');\n    const idx = cart.findIndex(x => x.id === product.id);\n    if (idx > -1) cart[idx].quantity += 1;else cart.push({\n      ...product,\n      quantity: 1\n    });\n    localStorage.setItem('cart', JSON.stringify(cart));\n    alert(`เพิ่ม ${product.name} ลงตะกร้าแล้ว`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logo\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"PRACH MAEJO\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-icons\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/profile\",\n          className: \"avatar-link\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: user.avatar,\n            alt: \"Avatar\",\n            className: \"avatar-img\",\n            onError: e => {\n              e.currentTarget.src = process.env.PUBLIC_URL + '/logo.png';\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"hello\",\n          children: user.fullname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/cart\",\n          title: \"\\u0E15\\u0E30\\u0E01\\u0E23\\u0E49\\u0E32\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"icon-cart\",\n            children: \"\\uD83D\\uDED2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-logout\",\n          title: \"\\u0E2D\\u0E2D\\u0E01\\u0E08\\u0E32\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E1A\",\n          onClick: () => {\n            localStorage.clear();\n            nav('/login', {\n              replace: true\n            });\n          },\n          children: \"\\uD83D\\uDEAA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"middle-bar\",\n      children: \"GARDEN PRODUCT ONLINE\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"search-btn\",\n        children: \"\\uD83D\\uDD0D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"hero\",\n      style: {\n        backgroundImage: `url(${process.env.PUBLIC_URL + '/p2.png'})`,\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n        backgroundSize: 'cover'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hero-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"\\u201C\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"highlight\",\n            children: \"\\u0E23\\u0E49\\u0E32\\u0E19\\u0E1B\\u0E23\\u0E32\\u0E0A\\u0E0D\\u0E4C\\u0E41\\u0E21\\u0E48\\u0E42\\u0E08\\u0E49\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 16\n          }, this), \"\\u201D\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u0E41\\u0E2B\\u0E25\\u0E48\\u0E07\\u0E1C\\u0E25\\u0E34\\u0E15\\u0E41\\u0E25\\u0E30\\u0E08\\u0E31\\u0E14\\u0E08\\u0E33\\u0E2B\\u0E19\\u0E48\\u0E32\\u0E22 \\u0E15\\u0E49\\u0E19\\u0E44\\u0E21\\u0E49 \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 43\n          }, this), \"\\u0E41\\u0E25\\u0E30\\u0E27\\u0E31\\u0E2A\\u0E14\\u0E38\\u0E1B\\u0E25\\u0E39\\u0E01 \\u0E21\\u0E32\\u0E01\\u0E01\\u0E27\\u0E48\\u0E32 100 \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"categories\",\n      children: categories.map((cat, idx) => /*#__PURE__*/_jsxDEV(Link, {\n        // ✅ key เสถียร\n        to: `/products?category=${encodeURIComponent(cat.slug || cat.id)}`,\n        className: \"category-card\",\n        title: cat.name,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: cat.image,\n          alt: cat.name,\n          onError: e => {\n            e.currentTarget.src = process.env.PUBLIC_URL + '/logo.png';\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: cat.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 13\n        }, this)]\n      }, cat.id || cat.slug || `cat-${idx}`, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"best-sellers\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83C\\uDF1F \\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E02\\u0E32\\u0E22\\u0E14\\u0E35\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), errMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-inline\",\n        children: errMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 20\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-grid\",\n        children: (loading.best ? fallbackBest : bestSellers).map((item, idx) => {\n          var _item$id;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-card\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.img,\n              alt: item.name,\n              onError: e => {\n                e.currentTarget.src = process.env.PUBLIC_URL + '/logo.png';\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [Number(item.price).toLocaleString(), \" \\u0E1A\\u0E32\\u0E17\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-add\",\n              onClick: () => addToCart(item),\n              children: \"+ \\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E07\\u0E15\\u0E30\\u0E01\\u0E23\\u0E49\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this)]\n          }, (_item$id = item.id) !== null && _item$id !== void 0 ? _item$id : `best-${idx}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n}\n_s(HomeUser, \"8MB7zKKAMlAdtnrJAoFIy9mpe7A=\", false, function () {\n  return [useNavigate];\n});\n_c = HomeUser;\nvar _c;\n$RefreshReg$(_c, \"HomeUser\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","Link","useNavigate","axios","jsxDEV","_jsxDEV","HomeUser","_s","nav","user","fullname","localStorage","getItem","avatar","process","env","PUBLIC_URL","apiPath","p","defaults","baseURL","replace","endsWith","categories","setCategories","bestSellers","setBestSellers","loading","setLoading","cat","best","errMsg","setErrMsg","fallbackCategories","id","slug","name","image","fallbackBest","price","img","_res$data","s","res","get","list","Array","isArray","data","norm","map","c","idx","_ref","_ref2","_ref3","_c$category_id","_ref4","_ref5","_ref6","_c$category_name","_ref7","_c$slug","cid","category_id","code","rawName","category_name","name_th","title","toString","guessByName","toLowerCase","includes","undefined","String","image_url","cover","thumbnail","order","bySlug","find","x","picked","filter","Boolean","length","slice","err","_err$response","console","warn","response","status","message","normalizeProduct","_ref8","_ref9","_p$product_id","_ref0","_ref1","_ref10","_p$product_name","_ref11","_ref12","_ref13","_p$selling_price","product_id","_id","product_name","Number","selling_price","sale_price","amount","images","tryFetch","url","_r$data","r","arr","mapped","i","_","_products","urls","products","u","_err$response2","addToCart","product","cart","JSON","parse","findIndex","quantity","push","setItem","stringify","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","src","alt","onError","e","currentTarget","onClick","clear","type","placeholder","style","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","encodeURIComponent","item","_item$id","toLocaleString","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/pages/HomeUser.js"],"sourcesContent":["// src/pages/HomeUser.js\r\nimport React, { useEffect, useState, useMemo } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './HomeUser.css';\r\n\r\nexport default function HomeUser() {\r\n  const nav = useNavigate();\r\n\r\n  /* ======================= ผู้ใช้ (อ่านจาก localStorage) ======================= */\r\n  const user = useMemo(() => {\r\n    const fullname = localStorage.getItem('fullname') || 'ผู้ใช้งาน';\r\n    return {\r\n      fullname,\r\n      avatar: process.env.PUBLIC_URL + '/profile.jpg',\r\n    };\r\n  }, []);\r\n\r\n  /* ============== ตัวช่วยคำนวณ path ให้ถูก ไม่เกิด /api/api ซ้ำ ============== */\r\n  const apiPath = (p) =>\r\n    (axios.defaults.baseURL || '').replace(/\\/+$/, '').endsWith('/api')\r\n      ? p\r\n      : '/api' + p;\r\n\r\n  /* ======================= หมวดหมู่ & สินค้าขายดี ======================= */\r\n  const [categories, setCategories] = useState([]);      // {id, slug, name, image}\r\n  const [bestSellers, setBestSellers] = useState([]);    // {id, name, price, img}\r\n  const [loading, setLoading] = useState({ cat: true, best: true });\r\n  const [errMsg, setErrMsg] = useState('');\r\n\r\n  /* -------------------------- Fallback เมื่อ API ล่ม -------------------------- */\r\n  const fallbackCategories = [\r\n    { id: 'tools',  slug: 'tools',  name: 'อุปกรณ์ปลูก', image: process.env.PUBLIC_URL + '/opakorn.jpg' },\r\n    { id: 'plants', slug: 'plants', name: 'ต้นไม้',       image: process.env.PUBLIC_URL + '/tonmai.jpg' },\r\n  ];\r\n  const fallbackBest = [\r\n    { id: 1, name: 'ต้นกล้าลำใยคริสตัล', price: 250, img: process.env.PUBLIC_URL + '/lamyai.jpg' },\r\n    { id: 2, name: 'ต้นพญานาคราช',       price: 150, img: process.env.PUBLIC_URL + '/payanaka1.jpg' },\r\n    { id: 3, name: 'กระถางมินิมอล',      price: 300, img: process.env.PUBLIC_URL + '/katar.jpeg' },\r\n    { id: 4, name: 'ดินสูตรทางร้าน',      price:  99, img: process.env.PUBLIC_URL + '/din.jpg' },\r\n  ];\r\n\r\n  /* ============================ โหลดหมวดหมู่จาก API ============================ */\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setLoading((s) => ({ ...s, cat: true }));\r\n        const res = await axios.get(apiPath('/categories?status=active'));\r\n        const list = (Array.isArray(res.data?.data) ? res.data.data : res.data) || [];\r\n\r\n        // ปรับรูปแบบให้เป็น {id, slug, name, image} รองรับสคีม categories ของโปรเจกต์ (category_id, category_name)\r\n        const norm = list.map((c, idx) => {\r\n          const cid  = c.category_id ?? c.id ?? c.code ?? c.slug ?? `cat-${idx}`;\r\n          // เดาชื่อ slug แบบฉลาดนิดนึง ถ้าเห็นคำว่าต้นไม้/อุปกรณ์ จะ map เป็น plants/tools\r\n          const rawName = (c.category_name ?? c.name_th ?? c.name ?? c.title ?? '').toString();\r\n          const guessByName = rawName.toLowerCase().includes('อุปกรณ์') ? 'tools'\r\n                              : rawName.toLowerCase().includes('ต้นไม้')   ? 'plants'\r\n                              : undefined;\r\n\r\n          const slug = c.slug ?? guessByName ?? String(cid).toLowerCase();\r\n\r\n          return {\r\n            id: String(cid),\r\n            slug,\r\n            name: rawName || 'ไม่ระบุชื่อ',\r\n            image: c.image_url || c.image || c.cover || c.thumbnail || (\r\n              slug === 'tools'\r\n                ? process.env.PUBLIC_URL + '/opakorn.jpg'\r\n                : process.env.PUBLIC_URL + '/tonmai.jpg'\r\n            ),\r\n          };\r\n        });\r\n\r\n        // ลองเลือก 2 หมวดที่อยากโชว์ก่อน: tools + plants ถ้ามี ไม่งั้นหยิบ 2 ตัวแรก\r\n        const order = ['tools', 'plants'];\r\n        const bySlug = (s) => norm.find((x) => x.slug === s);\r\n        const picked = order.map(bySlug).filter(Boolean);\r\n        setCategories((picked.length ? picked : norm.slice(0, 2)) || fallbackCategories);\r\n      } catch (err) {\r\n        console.warn('load categories failed:', err?.response?.status, err?.message);\r\n        setCategories(fallbackCategories);\r\n      } finally {\r\n        setLoading((s) => ({ ...s, cat: false }));\r\n      }\r\n    })();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  /* ======================= โหลดสินค้าขายดีจาก API ======================= */\r\n  useEffect(() => {\r\n    (async () => {\r\n      // ⚙️ ปรับ mapping ให้รองรับแบ็กเอนด์จริง (product_id/product_name/selling_price/image_url)\r\n      const normalizeProduct = (p, idx) => ({\r\n        id: p.product_id ?? p.id ?? p._id ?? `p-${idx}`,\r\n        name: p.product_name ?? p.name_th ?? p.name ?? p.title ?? 'สินค้า',\r\n        price: Number(p.selling_price ?? p.price ?? p.sale_price ?? p.amount ?? 0),\r\n        img:\r\n          p.image_url ||\r\n          p.image ||\r\n          p.cover ||\r\n          p.thumbnail ||\r\n          (Array.isArray(p.images) ? p.images[0] : '') ||\r\n          process.env.PUBLIC_URL + '/logo.png',\r\n      });\r\n\r\n      async function tryFetch(url) {\r\n        try {\r\n          const r = await axios.get(url);\r\n          const arr = (Array.isArray(r.data?.data) ? r.data.data : r.data) || [];\r\n          const mapped = arr.map((p, i) => normalizeProduct(p, i)).filter((x) => x.id && x.name);\r\n          if (mapped.length) return mapped;\r\n        } catch (_) {}\r\n        return null;\r\n      }\r\n\r\n      try {\r\n        setLoading((s) => ({ ...s, best: true }));\r\n        const urls = [\r\n          apiPath('/products/best-sellers?limit=8'),\r\n          apiPath('/products?sort=popular&limit=8'),\r\n          apiPath('/products?featured=1&limit=8'),\r\n        ];\r\n        let products = null;\r\n        for (const u of urls) {\r\n          products = await tryFetch(u);\r\n          if (products) break;\r\n        }\r\n        setBestSellers(products?.slice(0, 8) || fallbackBest);\r\n      } catch (err) {\r\n        console.warn('load best-sellers failed:', err?.response?.status, err?.message);\r\n        setBestSellers(fallbackBest);\r\n        setErrMsg('แสดงข้อมูลจากตัวอย่างชั่วคราว');\r\n      } finally {\r\n        setLoading((s) => ({ ...s, best: false }));\r\n      }\r\n    })();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  /* =============================== ตะกร้า =============================== */\r\n  const addToCart = (product) => {\r\n    let cart = JSON.parse(localStorage.getItem('cart') || '[]');\r\n    const idx = cart.findIndex((x) => x.id === product.id);\r\n    if (idx > -1) cart[idx].quantity += 1;\r\n    else cart.push({ ...product, quantity: 1 });\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n    alert(`เพิ่ม ${product.name} ลงตะกร้าแล้ว`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"home-container\">\r\n      {/* Header */}\r\n      <header className=\"header\">\r\n        <div className=\"logo\">\r\n          <span>PRACH MAEJO</span>\r\n        </div>\r\n\r\n        <div className=\"user-icons\">\r\n          <Link to=\"/profile\" className=\"avatar-link\">\r\n            <img\r\n              src={user.avatar}\r\n              alt=\"Avatar\"\r\n              className=\"avatar-img\"\r\n              onError={(e) => { e.currentTarget.src = process.env.PUBLIC_URL + '/logo.png'; }}\r\n            />\r\n          </Link>\r\n          <span className=\"hello\">{user.fullname}</span>\r\n\r\n          <Link to=\"/cart\" title=\"ตะกร้าสินค้า\">\r\n            <span className=\"icon-cart\">🛒</span>\r\n          </Link>\r\n\r\n          <button\r\n            className=\"icon-logout\"\r\n            title=\"ออกจากระบบ\"\r\n            onClick={() => { localStorage.clear(); nav('/login', { replace:true }); }}>\r\n            🚪\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Middle bar */}\r\n      <div className=\"middle-bar\">GARDEN PRODUCT ONLINE</div>\r\n\r\n      {/* Search */}\r\n      <div className=\"search-box\">\r\n        <input type=\"text\" placeholder=\"ค้นหาสินค้า\" />\r\n        <button className=\"search-btn\">🔍</button>\r\n      </div>\r\n\r\n      {/* Hero */}\r\n      <section\r\n        className=\"hero\"\r\n        style={{\r\n          backgroundImage: `url(${process.env.PUBLIC_URL + '/p2.png'})`,\r\n          backgroundRepeat: 'no-repeat',\r\n          backgroundPosition: 'center',\r\n          backgroundSize: 'cover',\r\n        }}\r\n      >\r\n        <div className=\"hero-text\">\r\n          <h1>“<span className=\"highlight\">ร้านปราชญ์แม่โจ้</span>”</h1>\r\n          <p>\r\n            แหล่งผลิตและจัดจำหน่าย ต้นไม้ <br />\r\n            และวัสดุปลูก มากกว่า 100 รายการ\r\n          </p>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Categories */}\r\n      <section className=\"categories\">\r\n        {categories.map((cat, idx) => (\r\n          <Link\r\n            key={cat.id || cat.slug || `cat-${idx}`} // ✅ key เสถียร\r\n            to={`/products?category=${encodeURIComponent(cat.slug || cat.id)}`}\r\n            className=\"category-card\"\r\n            title={cat.name}\r\n          >\r\n            <img\r\n              src={cat.image}\r\n              alt={cat.name}\r\n              onError={(e) => { e.currentTarget.src = process.env.PUBLIC_URL + '/logo.png'; }}\r\n            />\r\n            <p>{cat.name}</p>\r\n          </Link>\r\n        ))}\r\n      </section>\r\n\r\n      {/* Best Sellers */}\r\n      <section className=\"best-sellers\">\r\n        <h2>🌟 สินค้าขายดี</h2>\r\n        {errMsg && <div className=\"info-inline\">{errMsg}</div>}\r\n        <div className=\"product-grid\">\r\n          {(loading.best ? fallbackBest : bestSellers).map((item, idx) => (\r\n            <div className=\"product-card\" key={item.id ?? `best-${idx}`}> {/* ✅ key เสถียร */}\r\n              <img\r\n                src={item.img}\r\n                alt={item.name}\r\n                onError={(e) => { e.currentTarget.src = process.env.PUBLIC_URL + '/logo.png'; }}\r\n              />\r\n              <h3>{item.name}</h3>\r\n              <p>{Number(item.price).toLocaleString()} บาท</p>\r\n              <button className=\"btn-add\" onClick={() => addToCart(item)}>\r\n                + เพิ่มลงตะกร้า\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}