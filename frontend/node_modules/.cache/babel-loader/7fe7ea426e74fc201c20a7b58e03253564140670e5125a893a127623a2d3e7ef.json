{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\admin\\\\AdminSizes.js\",\n  _s = $RefreshSig$();\n// [FRONTEND] src/admin/AdminSizes.js\n// ✅ จัดการ \"หน่วยขนาด\" แยกหน้า\n// - ลิสต์/เพิ่ม/แก้ไข/ลบ หน่วยขนาด (code + label)\n// - ถ้า backend รองรับ publish toggle → ใช้งานได้ (fallback เป็นไม่แสดงปุ่ม)\n// - พยายามโหลดจาก /size-units (หรือ /sizes ถ้าคนละชื่อ) ถ้าไม่มี → ใช้ค่า default\n// - ปุ่มกลับไปหน้าสินค้า\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport './ProductManagement.css';\nimport { api, path } from '../lib/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEFAULT_SIZE_UNITS = [{\n  code: 'mm',\n  label: 'มม.'\n}, {\n  code: 'cm',\n  label: 'ซม.'\n}, {\n  code: 'm',\n  label: 'ม.'\n}, {\n  code: 'inch',\n  label: 'นิ้ว'\n}, {\n  code: 'kg',\n  label: 'กก.'\n}, {\n  code: 'ltr',\n  label: 'ลิตร'\n}];\nconst asStr = v => v === null || v === undefined ? '' : String(v);\nexport default function AdminSizes() {\n  _s();\n  const [units, setUnits] = useState(DEFAULT_SIZE_UNITS);\n  const [loading, setLoading] = useState(false);\n  const [filter, setFilter] = useState('all'); // all | published | hidden\n  const [supportsPublish, setSupportsPublish] = useState(false);\n  const [newUnit, setNewUnit] = useState({\n    code: '',\n    label: ''\n  });\n  const handleApiError = (err, fallback = 'เกิดข้อผิดพลาด') => {\n    var _err$response, _err$response2, _err$response2$data;\n    console.error(fallback, (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || (err === null || err === void 0 ? void 0 : err.message) || err);\n    alert((err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || (err === null || err === void 0 ? void 0 : err.message) || fallback);\n  };\n\n  // โหลดจาก /size-units หรือ /sizes (เผื่อชื่อ endpoint ต่างกัน)\n  const fetchUnits = async () => {\n    const normalize = list => (list || []).map(u => {\n      var _ref, _ref2, _ref3, _u$code, _ref4, _ref5, _u$label;\n      return {\n        code: asStr((_ref = (_ref2 = (_ref3 = (_u$code = u.code) !== null && _u$code !== void 0 ? _u$code : u.size_code) !== null && _ref3 !== void 0 ? _ref3 : u.id) !== null && _ref2 !== void 0 ? _ref2 : u.SizeCode) !== null && _ref !== void 0 ? _ref : ''),\n        label: asStr((_ref4 = (_ref5 = (_u$label = u.label) !== null && _u$label !== void 0 ? _u$label : u.name) !== null && _ref5 !== void 0 ? _ref5 : u.SizeName) !== null && _ref4 !== void 0 ? _ref4 : ''),\n        is_published: typeof u.is_published === 'boolean' ? u.is_published : u.status === 'published' || u.published === true || u.IsPublished === true || undefined\n      };\n    }).filter(u => u.code && u.label);\n    try {\n      const {\n        data\n      } = await api.get(path('/size-units'));\n      const norm = Array.isArray(data) ? normalize(data) : normalize(data === null || data === void 0 ? void 0 : data.items);\n      if (norm.length > 0) return setUnits(norm);\n    } catch (e1) {\n      // fallback ลอง /sizes\n      try {\n        const {\n          data\n        } = await api.get(path('/sizes'));\n        const norm = Array.isArray(data) ? normalize(data) : normalize(data === null || data === void 0 ? void 0 : data.items);\n        if (norm.length > 0) return setUnits(norm);\n      } catch (e2) {\n        var _e2$response;\n        console.warn('ℹ️ ใช้ค่า default size units (ไม่มี /size-units หรือ /sizes)', (e2 === null || e2 === void 0 ? void 0 : (_e2$response = e2.response) === null || _e2$response === void 0 ? void 0 : _e2$response.status) || (e2 === null || e2 === void 0 ? void 0 : e2.message));\n        setUnits(DEFAULT_SIZE_UNITS);\n      }\n    }\n  };\n\n  // เช็ค publish endpoint\n  const probePublishSupport = async () => {\n    try {\n      await api.patch(path('/admin/size-units/__probe__/publish'), {\n        is_published: true\n      });\n      setSupportsPublish(true);\n    } catch {\n      // ลองอีกชื่อหนึ่ง\n      try {\n        await api.patch(path('/admin/sizes/__probe__/publish'), {\n          is_published: true\n        });\n        setSupportsPublish(true);\n      } catch {\n        setSupportsPublish(false);\n      }\n    }\n  };\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      await fetchUnits();\n      await probePublishSupport();\n      setLoading(false);\n    })();\n  }, []);\n  const filteredUnits = useMemo(() => {\n    if (!Array.isArray(units)) return [];\n    if (filter === 'all') return units;\n    return units.filter(u => {\n      const pub = typeof u.is_published === 'boolean' ? u.is_published : true;\n      return filter === 'published' ? pub : !pub;\n    });\n  }, [units, filter]);\n\n  // เพิ่ม\n  const createUnit = async () => {\n    const code = newUnit.code.trim().toLowerCase().replace(/\\s+/g, '_');\n    const label = newUnit.label.trim();\n    if (!label) return alert('กรอกชื่อหน่วย (label)');\n    if (!code) return alert('กรอกรหัสหน่วย (code)');\n    if (units.some(u => u.code === code || u.label === label)) {\n      return alert(`หน่วย \"${label}\" มีอยู่แล้ว`);\n    }\n\n    // พยายาม POST ผ่าน API หลายชื่อ\n    const payload = {\n      code,\n      label\n    };\n    const tryPost = async url => api.post(path(url), payload);\n    try {\n      try {\n        await tryPost('/size-units');\n      } catch {\n        await tryPost('/sizes');\n      }\n      await fetchUnits();\n    } catch (err) {\n      console.warn('ℹ️ สร้างผ่าน API ไม่ได้ → เพิ่ม client-side ชั่วคราว');\n      setUnits(prev => [...prev, {\n        code,\n        label\n      }]);\n    }\n    setNewUnit({\n      code: '',\n      label: ''\n    });\n  };\n\n  // แก้ไข\n  const editUnit = async u => {\n    const name = window.prompt('ชื่อหน่วยใหม่', u.label);\n    if (!name || name.trim() === u.label) return;\n    const nextLabel = name.trim();\n    const nextCode = nextLabel.toLowerCase().replace(/\\s+/g, '_');\n    if (units.some(x => x.code !== u.code && (x.label === nextLabel || x.code === nextCode))) {\n      return alert(`หน่วย \"${nextLabel}\" ชนกับที่มีอยู่`);\n    }\n    const payload = {\n      code: nextCode,\n      label: nextLabel\n    };\n    const tryPut = async url => api.put(path(`${url}/${u.code}`), payload);\n    try {\n      try {\n        await tryPut('/size-units');\n      } catch {\n        await tryPut('/sizes');\n      }\n      await fetchUnits();\n    } catch (err) {\n      console.warn('ℹ️ แก้ผ่าน API ไม่ได้ → ปรับ client-side ชั่วคราว');\n      setUnits(prev => prev.map(x => x.code === u.code ? {\n        ...x,\n        code: nextCode,\n        label: nextLabel\n      } : x));\n    }\n  };\n\n  // ลบ\n  const deleteUnit = async u => {\n    if (!window.confirm(`ลบหน่วย \"${u.label}\" ?`)) return;\n    const tryDelete = async url => api.delete(path(`${url}/${u.code}`));\n    try {\n      try {\n        await tryDelete('/size-units');\n      } catch {\n        await tryDelete('/sizes');\n      }\n      await fetchUnits();\n    } catch (err) {\n      console.warn('ℹ️ ลบผ่าน API ไม่ได้ → ลบ client-side ชั่วคราว');\n      setUnits(prev => prev.filter(x => x.code !== u.code));\n    }\n  };\n\n  // toggle publish\n  const togglePublish = async u => {\n    if (!supportsPublish) return;\n    const current = typeof u.is_published === 'boolean' ? u.is_published : true;\n    const tryPatch = async url => api.patch(path(`${url}/${u.code}/publish`), {\n      is_published: !current\n    });\n    try {\n      try {\n        await tryPatch('/admin/size-units');\n      } catch {\n        await tryPatch('/admin/sizes');\n      }\n      await fetchUnits();\n    } catch (err) {\n      handleApiError(err, '❌ อัปเดตการแสดงผลไม่สำเร็จ');\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 12\n    },\n    children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pm-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 8,\n        margin: '12px 0 20px',\n        flexWrap: 'wrap'\n      },\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/admin/products\",\n        className: \"btn btn-ghost\",\n        children: \"\\u2190 \\u0E01\\u0E25\\u0E31\\u0E1A\\u0E44\\u0E1B\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E02\\u0E19\\u0E32\\u0E14\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pm-actions mt-8\",\n      style: {\n        flexWrap: 'wrap'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"code (\\u0E40\\u0E0A\\u0E48\\u0E19: cm, inch)\",\n        value: newUnit.code,\n        onChange: e => setNewUnit(prev => ({\n          ...prev,\n          code: e.target.value\n        })),\n        style: {\n          maxWidth: 220\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"label (\\u0E40\\u0E0A\\u0E48\\u0E19: \\u0E0B\\u0E21., \\u0E19\\u0E34\\u0E49\\u0E27)\",\n        value: newUnit.label,\n        onChange: e => setNewUnit(prev => ({\n          ...prev,\n          label: e.target.value\n        })),\n        style: {\n          minWidth: 220\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary\",\n        onClick: createUnit,\n        children: \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E02\\u0E19\\u0E32\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), supportsPublish && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pm-toolbar\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"seg\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: `seg-btn ${filter === 'all' ? 'active' : ''}`,\n          onClick: () => setFilter('all'),\n          children: \"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: `seg-btn ${filter === 'published' ? 'active' : ''}`,\n          onClick: () => setFilter('published'),\n          children: \"\\u0E40\\u0E09\\u0E1E\\u0E32\\u0E30\\u0E17\\u0E35\\u0E48\\u0E41\\u0E2A\\u0E14\\u0E07\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: `seg-btn ${filter === 'hidden' ? 'active' : ''}`,\n          onClick: () => setFilter('hidden'),\n          children: \"\\u0E40\\u0E09\\u0E1E\\u0E32\\u0E30\\u0E17\\u0E35\\u0E48\\u0E0B\\u0E48\\u0E2D\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pm-table-wrap mt-8\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"pm-table pm-fixed\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: 220\n              },\n              children: \"\\u0E23\\u0E2B\\u0E31\\u0E2A (code)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22 (label)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                textAlign: 'center',\n                width: supportsPublish ? 260 : 200\n              },\n              children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this), supportsPublish && /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                textAlign: 'center',\n                width: 140\n              },\n              children: \"\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E1C\\u0E25\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 35\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [(filteredUnits || units).map(u => {\n            const published = typeof u.is_published === 'boolean' ? u.is_published : true;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: u.code\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [supportsPublish && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `pill ${published ? 'on' : 'off'}`,\n                  style: {\n                    marginRight: 6\n                  },\n                  children: published ? 'กำลังแสดง' : 'ถูกซ่อน'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"name-with-badges\",\n                  children: u.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"cell-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-ghost\",\n                  onClick: () => editUnit(u),\n                  children: \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger\",\n                  onClick: () => deleteUnit(u),\n                  children: \"\\u0E25\\u0E1A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 19\n              }, this), supportsPublish && /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"cell-actions\",\n                style: {\n                  textAlign: 'center'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `btn ${published ? 'btn-warn' : 'btn-primary'}`,\n                  onClick: () => togglePublish(u),\n                  title: published ? 'ซ่อน' : 'แสดง',\n                  children: published ? 'ไม่แสดง' : 'แสดง'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 21\n              }, this)]\n            }, u.code, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this);\n          }), (!units || units.length === 0) && /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: supportsPublish ? 4 : 3,\n              style: {\n                color: '#777'\n              },\n              children: \"\\u2014 \\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E02\\u0E19\\u0E32\\u0E14 \\u2014\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminSizes, \"doZ8ch6+FnoUxxqElN05y1QfgJ0=\");\n_c = AdminSizes;\nvar _c;\n$RefreshReg$(_c, \"AdminSizes\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","Link","api","path","jsxDEV","_jsxDEV","DEFAULT_SIZE_UNITS","code","label","asStr","v","undefined","String","AdminSizes","_s","units","setUnits","loading","setLoading","filter","setFilter","supportsPublish","setSupportsPublish","newUnit","setNewUnit","handleApiError","err","fallback","_err$response","_err$response2","_err$response2$data","console","error","response","data","message","alert","fetchUnits","normalize","list","map","u","_ref","_ref2","_ref3","_u$code","_ref4","_ref5","_u$label","size_code","id","SizeCode","name","SizeName","is_published","status","published","IsPublished","get","norm","Array","isArray","items","length","e1","e2","_e2$response","warn","probePublishSupport","patch","filteredUnits","pub","createUnit","trim","toLowerCase","replace","some","payload","tryPost","url","post","prev","editUnit","window","prompt","nextLabel","nextCode","x","tryPut","put","deleteUnit","confirm","tryDelete","delete","togglePublish","current","tryPatch","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","className","display","gap","margin","flexWrap","to","placeholder","value","onChange","e","target","maxWidth","minWidth","type","onClick","width","textAlign","marginRight","title","colSpan","color","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/admin/AdminSizes.js"],"sourcesContent":["// [FRONTEND] src/admin/AdminSizes.js\r\n// ✅ จัดการ \"หน่วยขนาด\" แยกหน้า\r\n// - ลิสต์/เพิ่ม/แก้ไข/ลบ หน่วยขนาด (code + label)\r\n// - ถ้า backend รองรับ publish toggle → ใช้งานได้ (fallback เป็นไม่แสดงปุ่ม)\r\n// - พยายามโหลดจาก /size-units (หรือ /sizes ถ้าคนละชื่อ) ถ้าไม่มี → ใช้ค่า default\r\n// - ปุ่มกลับไปหน้าสินค้า\r\n\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './ProductManagement.css';\r\nimport { api, path } from '../lib/api';\r\n\r\nconst DEFAULT_SIZE_UNITS = [\r\n  { code: 'mm',   label: 'มม.' },\r\n  { code: 'cm',   label: 'ซม.' },\r\n  { code: 'm',    label: 'ม.' },\r\n  { code: 'inch', label: 'นิ้ว' },\r\n  { code: 'kg',   label: 'กก.' },\r\n  { code: 'ltr',  label: 'ลิตร' },\r\n];\r\n\r\nconst asStr = (v) => (v === null || v === undefined) ? '' : String(v);\r\n\r\nexport default function AdminSizes() {\r\n  const [units, setUnits]                 = useState(DEFAULT_SIZE_UNITS);\r\n  const [loading, setLoading]             = useState(false);\r\n  const [filter, setFilter]               = useState('all'); // all | published | hidden\r\n  const [supportsPublish, setSupportsPublish] = useState(false);\r\n\r\n  const [newUnit, setNewUnit] = useState({ code: '', label: '' });\r\n\r\n  const handleApiError = (err, fallback = 'เกิดข้อผิดพลาด') => {\r\n    console.error(fallback, err?.response?.data || err?.message || err);\r\n    alert(err?.response?.data?.error || err?.message || fallback);\r\n  };\r\n\r\n  // โหลดจาก /size-units หรือ /sizes (เผื่อชื่อ endpoint ต่างกัน)\r\n  const fetchUnits = async () => {\r\n    const normalize = (list) => (list || []).map(u => ({\r\n      code:  asStr(u.code ?? u.size_code ?? u.id ?? u.SizeCode ?? ''),\r\n      label: asStr(u.label ?? u.name ?? u.SizeName ?? ''),\r\n      is_published: typeof u.is_published === 'boolean' ? u.is_published\r\n                    : (u.status === 'published' || u.published === true || u.IsPublished === true) || undefined\r\n    })).filter(u => u.code && u.label);\r\n\r\n    try {\r\n      const { data } = await api.get(path('/size-units'));\r\n      const norm = Array.isArray(data) ? normalize(data) : normalize(data?.items);\r\n      if (norm.length > 0) return setUnits(norm);\r\n    } catch (e1) {\r\n      // fallback ลอง /sizes\r\n      try {\r\n        const { data } = await api.get(path('/sizes'));\r\n        const norm = Array.isArray(data) ? normalize(data) : normalize(data?.items);\r\n        if (norm.length > 0) return setUnits(norm);\r\n      } catch (e2) {\r\n        console.warn('ℹ️ ใช้ค่า default size units (ไม่มี /size-units หรือ /sizes)', e2?.response?.status || e2?.message);\r\n        setUnits(DEFAULT_SIZE_UNITS);\r\n      }\r\n    }\r\n  };\r\n\r\n  // เช็ค publish endpoint\r\n  const probePublishSupport = async () => {\r\n    try {\r\n      await api.patch(path('/admin/size-units/__probe__/publish'), { is_published: true });\r\n      setSupportsPublish(true);\r\n    } catch {\r\n      // ลองอีกชื่อหนึ่ง\r\n      try {\r\n        await api.patch(path('/admin/sizes/__probe__/publish'), { is_published: true });\r\n        setSupportsPublish(true);\r\n      } catch {\r\n        setSupportsPublish(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      await fetchUnits();\r\n      await probePublishSupport();\r\n      setLoading(false);\r\n    })();\r\n  }, []);\r\n\r\n  const filteredUnits = useMemo(() => {\r\n    if (!Array.isArray(units)) return [];\r\n    if (filter === 'all') return units;\r\n    return units.filter(u => {\r\n      const pub = typeof u.is_published === 'boolean' ? u.is_published : true;\r\n      return filter === 'published' ? pub : !pub;\r\n    });\r\n  }, [units, filter]);\r\n\r\n  // เพิ่ม\r\n  const createUnit = async () => {\r\n    const code = newUnit.code.trim().toLowerCase().replace(/\\s+/g, '_');\r\n    const label = newUnit.label.trim();\r\n    if (!label) return alert('กรอกชื่อหน่วย (label)');\r\n    if (!code)  return alert('กรอกรหัสหน่วย (code)');\r\n    if (units.some(u => u.code === code || u.label === label)) {\r\n      return alert(`หน่วย \"${label}\" มีอยู่แล้ว`);\r\n    }\r\n\r\n    // พยายาม POST ผ่าน API หลายชื่อ\r\n    const payload = { code, label };\r\n    const tryPost = async (url) => api.post(path(url), payload);\r\n\r\n    try {\r\n      try { await tryPost('/size-units'); }\r\n      catch { await tryPost('/sizes'); }\r\n      await fetchUnits();\r\n    } catch (err) {\r\n      console.warn('ℹ️ สร้างผ่าน API ไม่ได้ → เพิ่ม client-side ชั่วคราว');\r\n      setUnits(prev => [...prev, { code, label }]);\r\n    }\r\n    setNewUnit({ code: '', label: '' });\r\n  };\r\n\r\n  // แก้ไข\r\n  const editUnit = async (u) => {\r\n    const name = window.prompt('ชื่อหน่วยใหม่', u.label);\r\n    if (!name || name.trim() === u.label) return;\r\n    const nextLabel = name.trim();\r\n    const nextCode  = nextLabel.toLowerCase().replace(/\\s+/g, '_');\r\n\r\n    if (units.some(x => x.code !== u.code && (x.label === nextLabel || x.code === nextCode))) {\r\n      return alert(`หน่วย \"${nextLabel}\" ชนกับที่มีอยู่`);\r\n    }\r\n\r\n    const payload = { code: nextCode, label: nextLabel };\r\n    const tryPut = async (url) => api.put(path(`${url}/${u.code}`), payload);\r\n\r\n    try {\r\n      try { await tryPut('/size-units'); }\r\n      catch { await tryPut('/sizes'); }\r\n      await fetchUnits();\r\n    } catch (err) {\r\n      console.warn('ℹ️ แก้ผ่าน API ไม่ได้ → ปรับ client-side ชั่วคราว');\r\n      setUnits(prev => prev.map(x => x.code === u.code ? { ...x, code: nextCode, label: nextLabel } : x));\r\n    }\r\n  };\r\n\r\n  // ลบ\r\n  const deleteUnit = async (u) => {\r\n    if (!window.confirm(`ลบหน่วย \"${u.label}\" ?`)) return;\r\n\r\n    const tryDelete = async (url) => api.delete(path(`${url}/${u.code}`));\r\n    try {\r\n      try { await tryDelete('/size-units'); }\r\n      catch { await tryDelete('/sizes'); }\r\n      await fetchUnits();\r\n    } catch (err) {\r\n      console.warn('ℹ️ ลบผ่าน API ไม่ได้ → ลบ client-side ชั่วคราว');\r\n      setUnits(prev => prev.filter(x => x.code !== u.code));\r\n    }\r\n  };\r\n\r\n  // toggle publish\r\n  const togglePublish = async (u) => {\r\n    if (!supportsPublish) return;\r\n    const current = typeof u.is_published === 'boolean' ? u.is_published : true;\r\n\r\n    const tryPatch = async (url) => api.patch(path(`${url}/${u.code}/publish`), { is_published: !current });\r\n    try {\r\n      try { await tryPatch('/admin/size-units'); }\r\n      catch { await tryPatch('/admin/sizes'); }\r\n      await fetchUnits();\r\n    } catch (err) {\r\n      handleApiError(err, '❌ อัปเดตการแสดงผลไม่สำเร็จ');\r\n    }\r\n  };\r\n\r\n  if (loading) return <div style={{ padding: 12 }}>กำลังโหลดข้อมูล…</div>;\r\n\r\n  return (\r\n    <div className=\"pm-page\">\r\n      {/* ปุ่มกลับ */}\r\n      <div style={{display:'flex', gap:8, margin:'12px 0 20px', flexWrap:'wrap'}}>\r\n        <Link to=\"/admin/products\" className=\"btn btn-ghost\">← กลับไปจัดการสินค้า</Link>\r\n      </div>\r\n\r\n      <h2>จัดการหน่วยขนาด</h2>\r\n\r\n      {/* ฟอร์มเพิ่ม */}\r\n      <div className=\"pm-actions mt-8\" style={{ flexWrap:'wrap' }}>\r\n        <input\r\n          placeholder=\"code (เช่น: cm, inch)\"\r\n          value={newUnit.code}\r\n          onChange={(e)=>setNewUnit(prev => ({ ...prev, code: e.target.value }))}\r\n          style={{ maxWidth:220 }}\r\n        />\r\n        <input\r\n          placeholder=\"label (เช่น: ซม., นิ้ว)\"\r\n          value={newUnit.label}\r\n          onChange={(e)=>setNewUnit(prev => ({ ...prev, label: e.target.value }))}\r\n          style={{ minWidth:220 }}\r\n        />\r\n        <button type=\"button\" className=\"btn btn-primary\" onClick={createUnit}>\r\n          เพิ่มหน่วยขนาด\r\n        </button>\r\n      </div>\r\n\r\n      {/* ฟิลเตอร์ (เฉพาะกรณีรองรับ publish) */}\r\n      {supportsPublish && (\r\n        <div className=\"pm-toolbar\">\r\n          <div className=\"seg\">\r\n            <button type=\"button\" className={`seg-btn ${filter==='all' ? 'active': ''}`} onClick={()=>setFilter('all')}>ทั้งหมด</button>\r\n            <button type=\"button\" className={`seg-btn ${filter==='published' ? 'active': ''}`} onClick={()=>setFilter('published')}>เฉพาะที่แสดง</button>\r\n            <button type=\"button\" className={`seg-btn ${filter==='hidden' ? 'active': ''}`} onClick={()=>setFilter('hidden')}>เฉพาะที่ซ่อน</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ตาราง */}\r\n      <div className=\"pm-table-wrap mt-8\">\r\n        <table className=\"pm-table pm-fixed\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{width:220}}>รหัส (code)</th>\r\n              <th>ชื่อหน่วย (label)</th>\r\n              <th style={{textAlign:'center', width: supportsPublish ? 260 : 200}}>จัดการ</th>\r\n              {supportsPublish && <th style={{textAlign:'center', width:140}}>แสดงผล</th>}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {(filteredUnits || units).map(u => {\r\n              const published = typeof u.is_published === 'boolean' ? u.is_published : true;\r\n              return (\r\n                <tr key={u.code}>\r\n                  <td>{u.code}</td>\r\n                  <td>\r\n                    {supportsPublish && (\r\n                      <span className={`pill ${published ? 'on' : 'off'}`} style={{ marginRight: 6 }}>\r\n                        {published ? 'กำลังแสดง' : 'ถูกซ่อน'}\r\n                      </span>\r\n                    )}\r\n                    <span className=\"name-with-badges\">{u.label}</span>\r\n                  </td>\r\n                  <td className=\"cell-actions\">\r\n                    <button className=\"btn btn-ghost\" onClick={()=>editUnit(u)}>แก้ไข</button>\r\n                    <button className=\"btn btn-danger\" onClick={()=>deleteUnit(u)}>ลบ</button>\r\n                  </td>\r\n                  {supportsPublish && (\r\n                    <td className=\"cell-actions\" style={{ textAlign:'center' }}>\r\n                      <button\r\n                        className={`btn ${published ? 'btn-warn' : 'btn-primary'}`}\r\n                        onClick={() => togglePublish(u)}\r\n                        title={published ? 'ซ่อน' : 'แสดง'}\r\n                      >\r\n                        {published ? 'ไม่แสดง' : 'แสดง'}\r\n                      </button>\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              );\r\n            })}\r\n            {(!units || units.length === 0) && (\r\n              <tr><td colSpan={supportsPublish ? 4 : 3} style={{ color:'#777' }}>— ไม่มีหน่วยขนาด —</td></tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}