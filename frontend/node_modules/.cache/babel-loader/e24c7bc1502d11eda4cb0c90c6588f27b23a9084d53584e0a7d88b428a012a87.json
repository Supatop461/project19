{"ast":null,"code":"/*!\n * on-headers\n * Copyright(c) 2014 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\nmodule.exports = onHeaders;\nvar http = require('http');\n\n// older node versions don't have appendHeader\nvar isAppendHeaderSupported = typeof http.ServerResponse.prototype.appendHeader === 'function';\nvar set1dArray = isAppendHeaderSupported ? set1dArrayWithAppend : set1dArrayWithSet;\n\n/**\n * Create a replacement writeHead method.\n *\n * @param {function} prevWriteHead\n * @param {function} listener\n * @private\n */\n\nfunction createWriteHead(prevWriteHead, listener) {\n  var fired = false;\n\n  // return function with core name and argument list\n  return function writeHead(statusCode) {\n    // set headers from arguments\n    var args = setWriteHeadHeaders.apply(this, arguments);\n\n    // fire listener\n    if (!fired) {\n      fired = true;\n      listener.call(this);\n\n      // pass-along an updated status code\n      if (typeof args[0] === 'number' && this.statusCode !== args[0]) {\n        args[0] = this.statusCode;\n        args.length = 1;\n      }\n    }\n    return prevWriteHead.apply(this, args);\n  };\n}\n\n/**\n * Execute a listener when a response is about to write headers.\n *\n * @param {object} res\n * @return {function} listener\n * @public\n */\n\nfunction onHeaders(res, listener) {\n  if (!res) {\n    throw new TypeError('argument res is required');\n  }\n  if (typeof listener !== 'function') {\n    throw new TypeError('argument listener must be a function');\n  }\n  res.writeHead = createWriteHead(res.writeHead, listener);\n}\n\n/**\n * Set headers contained in array on the response object.\n *\n * @param {object} res\n * @param {array} headers\n * @private\n */\n\nfunction setHeadersFromArray(res, headers) {\n  if (headers.length && Array.isArray(headers[0])) {\n    // 2D\n    set2dArray(res, headers);\n  } else {\n    // 1D\n    if (headers.length % 2 !== 0) {\n      throw new TypeError('headers array is malformed');\n    }\n    set1dArray(res, headers);\n  }\n}\n\n/**\n * Set headers contained in object on the response object.\n *\n * @param {object} res\n * @param {object} headers\n * @private\n */\n\nfunction setHeadersFromObject(res, headers) {\n  var keys = Object.keys(headers);\n  for (var i = 0; i < keys.length; i++) {\n    var k = keys[i];\n    if (k) res.setHeader(k, headers[k]);\n  }\n}\n\n/**\n * Set headers and other properties on the response object.\n *\n * @param {number} statusCode\n * @private\n */\n\nfunction setWriteHeadHeaders(statusCode) {\n  var length = arguments.length;\n  var headerIndex = length > 1 && typeof arguments[1] === 'string' ? 2 : 1;\n  var headers = length >= headerIndex + 1 ? arguments[headerIndex] : undefined;\n  this.statusCode = statusCode;\n  if (Array.isArray(headers)) {\n    // handle array case\n    setHeadersFromArray(this, headers);\n  } else if (headers) {\n    // handle object case\n    setHeadersFromObject(this, headers);\n  }\n\n  // copy leading arguments\n  var args = new Array(Math.min(length, headerIndex));\n  for (var i = 0; i < args.length; i++) {\n    args[i] = arguments[i];\n  }\n  return args;\n}\nfunction set2dArray(res, headers) {\n  var key;\n  for (var i = 0; i < headers.length; i++) {\n    key = headers[i][0];\n    if (key) {\n      res.setHeader(key, headers[i][1]);\n    }\n  }\n}\nfunction set1dArrayWithAppend(res, headers) {\n  for (var i = 0; i < headers.length; i += 2) {\n    res.removeHeader(headers[i]);\n  }\n  var key;\n  for (var j = 0; j < headers.length; j += 2) {\n    key = headers[j];\n    if (key) {\n      res.appendHeader(key, headers[j + 1]);\n    }\n  }\n}\nfunction set1dArrayWithSet(res, headers) {\n  var key;\n  for (var i = 0; i < headers.length; i += 2) {\n    key = headers[i];\n    if (key) {\n      res.setHeader(key, headers[i + 1]);\n    }\n  }\n}","map":{"version":3,"names":["module","exports","onHeaders","http","require","isAppendHeaderSupported","ServerResponse","prototype","appendHeader","set1dArray","set1dArrayWithAppend","set1dArrayWithSet","createWriteHead","prevWriteHead","listener","fired","writeHead","statusCode","args","setWriteHeadHeaders","apply","arguments","call","length","res","TypeError","setHeadersFromArray","headers","Array","isArray","set2dArray","setHeadersFromObject","keys","Object","i","k","setHeader","headerIndex","undefined","Math","min","key","removeHeader","j"],"sources":["D:/project19/frontend/node_modules/on-headers/index.js"],"sourcesContent":["/*!\n * on-headers\n * Copyright(c) 2014 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = onHeaders\n\nvar http = require('http')\n\n// older node versions don't have appendHeader\nvar isAppendHeaderSupported = typeof http.ServerResponse.prototype.appendHeader === 'function'\nvar set1dArray = isAppendHeaderSupported ? set1dArrayWithAppend : set1dArrayWithSet\n\n/**\n * Create a replacement writeHead method.\n *\n * @param {function} prevWriteHead\n * @param {function} listener\n * @private\n */\n\nfunction createWriteHead (prevWriteHead, listener) {\n  var fired = false\n\n  // return function with core name and argument list\n  return function writeHead (statusCode) {\n    // set headers from arguments\n    var args = setWriteHeadHeaders.apply(this, arguments)\n\n    // fire listener\n    if (!fired) {\n      fired = true\n      listener.call(this)\n\n      // pass-along an updated status code\n      if (typeof args[0] === 'number' && this.statusCode !== args[0]) {\n        args[0] = this.statusCode\n        args.length = 1\n      }\n    }\n\n    return prevWriteHead.apply(this, args)\n  }\n}\n\n/**\n * Execute a listener when a response is about to write headers.\n *\n * @param {object} res\n * @return {function} listener\n * @public\n */\n\nfunction onHeaders (res, listener) {\n  if (!res) {\n    throw new TypeError('argument res is required')\n  }\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('argument listener must be a function')\n  }\n\n  res.writeHead = createWriteHead(res.writeHead, listener)\n}\n\n/**\n * Set headers contained in array on the response object.\n *\n * @param {object} res\n * @param {array} headers\n * @private\n */\n\nfunction setHeadersFromArray (res, headers) {\n  if (headers.length && Array.isArray(headers[0])) {\n    // 2D\n    set2dArray(res, headers)\n  } else {\n    // 1D\n    if (headers.length % 2 !== 0) {\n      throw new TypeError('headers array is malformed')\n    }\n\n    set1dArray(res, headers)\n  }\n}\n\n/**\n * Set headers contained in object on the response object.\n *\n * @param {object} res\n * @param {object} headers\n * @private\n */\n\nfunction setHeadersFromObject (res, headers) {\n  var keys = Object.keys(headers)\n  for (var i = 0; i < keys.length; i++) {\n    var k = keys[i]\n    if (k) res.setHeader(k, headers[k])\n  }\n}\n\n/**\n * Set headers and other properties on the response object.\n *\n * @param {number} statusCode\n * @private\n */\n\nfunction setWriteHeadHeaders (statusCode) {\n  var length = arguments.length\n  var headerIndex = length > 1 && typeof arguments[1] === 'string'\n    ? 2\n    : 1\n\n  var headers = length >= headerIndex + 1\n    ? arguments[headerIndex]\n    : undefined\n\n  this.statusCode = statusCode\n\n  if (Array.isArray(headers)) {\n    // handle array case\n    setHeadersFromArray(this, headers)\n  } else if (headers) {\n    // handle object case\n    setHeadersFromObject(this, headers)\n  }\n\n  // copy leading arguments\n  var args = new Array(Math.min(length, headerIndex))\n  for (var i = 0; i < args.length; i++) {\n    args[i] = arguments[i]\n  }\n\n  return args\n}\n\nfunction set2dArray (res, headers) {\n  var key\n  for (var i = 0; i < headers.length; i++) {\n    key = headers[i][0]\n    if (key) {\n      res.setHeader(key, headers[i][1])\n    }\n  }\n}\n\nfunction set1dArrayWithAppend (res, headers) {\n  for (var i = 0; i < headers.length; i += 2) {\n    res.removeHeader(headers[i])\n  }\n\n  var key\n  for (var j = 0; j < headers.length; j += 2) {\n    key = headers[j]\n    if (key) {\n      res.appendHeader(key, headers[j + 1])\n    }\n  }\n}\n\nfunction set1dArrayWithSet (res, headers) {\n  var key\n  for (var i = 0; i < headers.length; i += 2) {\n    key = headers[i]\n    if (key) {\n      res.setHeader(key, headers[i + 1])\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}