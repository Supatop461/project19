{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\admin\\\\ProductManagement.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n/* === ProductManagement.js (Part 1/4) START === */\nimport React, { useState, useEffect, useCallback, useRef, useMemo } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./ProductManagement.css\";\nimport { api, path } from \"../lib/api\";\nimport { useLookups } from \"../lib/lookups\";\n\n/* =========================\r\n   Helper Functions\r\n========================= */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst asStr = v => v === null || v === undefined ? \"\" : String(v);\nconst pickStatusName = x => {\n  var _ref, _ref2, _x$status_name;\n  return (_ref = (_ref2 = (_x$status_name = x === null || x === void 0 ? void 0 : x.status_name) !== null && _x$status_name !== void 0 ? _x$status_name : x === null || x === void 0 ? void 0 : x.StatusName) !== null && _ref2 !== void 0 ? _ref2 : x === null || x === void 0 ? void 0 : x.name) !== null && _ref !== void 0 ? _ref : \"\";\n};\nconst toInt = v => {\n  const n = parseInt(String(v !== null && v !== void 0 ? v : \"\").trim(), 10);\n  return Number.isFinite(n) ? n : null;\n};\nconst toNum = v => {\n  if (v === null || v === undefined) return null;\n  const n = Number(String(v).replace(/[,\\s‡∏ø]/g, \"\"));\n  return Number.isFinite(n) ? n : null;\n};\n\n/* =========================\r\n   Tiny Toast (in-file)\r\n========================= */\nfunction useToasts() {\n  _s();\n  const [toasts, setToasts] = useState([]);\n  const addToast = useCallback((text, type = \"info\") => {\n    const id = Math.random().toString(36).slice(2);\n    setToasts(prev => [...prev, {\n      id,\n      text,\n      type\n    }]);\n    setTimeout(() => {\n      setToasts(prev => prev.filter(t => t.id !== id));\n    }, 2800);\n  }, []);\n  const Toasts = useMemo(() => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"toast-container\",\n    children: toasts.map(t => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `toast ${t.type}`,\n      children: t.text\n    }, t.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 7\n  }, this), [toasts]);\n  return {\n    addToast,\n    Toasts\n  };\n}\n\n/* =========================\r\n   ProductManagement Component\r\n========================= */\n_s(useToasts, \"5reQEK4aGyvDuVCRmVQvN0iNI88=\");\nexport default function ProductManagement() {\n  _s2();\n  const {\n    addToast,\n    Toasts\n  } = useToasts();\n\n  // ‚îÄ‚îÄ‚îÄ State ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  const [products, setProducts] = useState([]);\n  const [statuses, setStatuses] = useState([]);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [variants, setVariants] = useState([]);\n  const [options, setOptions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [addingProduct, setAddingProduct] = useState(false);\n  const {\n    units,\n    categories\n  } = useLookups();\n\n  /* =========================\r\n     Fetch Products / Status\r\n  ========================= */\n  const fetchStatuses = useCallback(async () => {\n    try {\n      const res = await api.get(path(\"statuses\"));\n      setStatuses(res || []);\n    } catch (err) {\n      console.error(err);\n      addToast(\"‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à\", \"error\");\n    }\n  }, [addToast]);\n  const fetchProducts = useCallback(async () => {\n    try {\n      setLoading(true);\n      const res = await api.get(path(\"admin/products\"));\n      setProducts(res || []);\n    } catch (err) {\n      console.error(err);\n      addToast(\"‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  }, [addToast]);\n  useEffect(() => {\n    fetchStatuses();\n    fetchProducts();\n  }, [fetchStatuses, fetchProducts]);\n\n  /* =========================\r\n     Select Product to Manage\r\n  ========================= */\n  const handleSelectProduct = useCallback(p => {\n    setSelectedProduct(prev => prev && prev.product_id === p.product_id ? null : p);\n    setVariants([]);\n    setOptions([]);\n  }, []);\n\n  /* =========================\r\n     Search Filter\r\n  ========================= */\n  const filteredProducts = useMemo(() => {\n    const s = search.trim().toLowerCase();\n    if (!s) return products;\n    return products.filter(p => (p.product_name || \"\").toLowerCase().includes(s));\n  }, [search, products]);\n\n  /* =========================\r\n     Add New Product\r\n  ========================= */\n  const [newProduct, setNewProduct] = useState({\n    product_name: \"\",\n    category_id: \"\",\n    price: \"\",\n    unit_id: \"\",\n    description: \"\"\n  });\n  const handleAddProduct = async () => {\n    try {\n      if (!newProduct.product_name) {\n        addToast(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\", \"warn\");\n        return;\n      }\n      setAddingProduct(true);\n      const res = await api.post(path(\"admin/products\"), newProduct);\n      addToast(\"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß\", \"ok\");\n      setNewProduct({\n        product_name: \"\",\n        category_id: \"\",\n        price: \"\",\n        unit_id: \"\",\n        description: \"\"\n      });\n      fetchProducts();\n    } catch (err) {\n      console.error(err);\n      addToast(\"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à\", \"error\");\n    } finally {\n      setAddingProduct(false);\n    }\n  };\n  /* === ProductManagement.js (Part 1/4) END === */\n  /* === ProductManagement.js (Part 2/4) START === */\n\n  /* =========================\r\n     Table of Products\r\n  ========================= */\n  const renderTable = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-table-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"product-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0E23\\u0E32\\u0E04\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0E04\\u0E07\\u0E40\\u0E2B\\u0E25\\u0E37\\u0E2D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: filteredProducts.map(p => {\n          var _p$stock;\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: selectedProduct && selectedProduct.product_id === p.product_id ? \"selected\" : \"\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: p.product_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: p.category_name || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: p.price ? `${p.price}‡∏ø` : \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: (_p$stock = p.stock) !== null && _p$stock !== void 0 ? _p$stock : 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: pickStatusName(p.status)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-manage\",\n                onClick: () => handleSelectProduct(p),\n                children: selectedProduct && selectedProduct.product_id === p.product_id ? \"‡∏ã‡πà‡∏≠‡∏ô\" : \"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this)]\n          }, p.product_id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 5\n  }, this);\n\n  /* =========================\r\n     Render Selected Product Panel\r\n  ========================= */\n  const renderPanel = () => {\n    if (!selectedProduct) return null;\n    const p = selectedProduct;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32: \", p.product_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-detail\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this), \" \", p.category_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0E23\\u0E32\\u0E04\\u0E32:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this), \" \", p.price, \"\\u0E3F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), \" \", pickStatusName(p.status)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), \" \", p.description || \"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), renderVariantManager(), renderBottomActions()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this);\n  };\n\n  /* =========================\r\n     Main Render\r\n  ========================= */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 (Full Mode)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"toolbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\uD83D\\uDD0D \\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32...\",\n        value: search,\n        onChange: e => setSearch(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-add\",\n        onClick: handleAddProduct,\n        disabled: addingProduct,\n        children: \"\\u2795 \\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E43\\u0E2B\\u0E21\\u0E48\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"new-product-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\",\n        value: newProduct.product_name,\n        onChange: e => setNewProduct({\n          ...newProduct,\n          product_name: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: newProduct.category_id,\n        onChange: e => setNewProduct({\n          ...newProduct,\n          category_id: e.target.value\n        }),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: c.id,\n          children: c.name\n        }, c.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"\\u0E23\\u0E32\\u0E04\\u0E32 (\\u0E3F)\",\n        value: newProduct.price,\n        onChange: e => setNewProduct({\n          ...newProduct,\n          price: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: newProduct.unit_id,\n        onChange: e => setNewProduct({\n          ...newProduct,\n          unit_id: e.target.value\n        }),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), units.map(u => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: u.id,\n          children: u.name\n        }, u.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\",\n        value: newProduct.description,\n        onChange: e => setNewProduct({\n          ...newProduct,\n          description: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 18\n    }, this) : renderTable(), renderPanel(), Toasts]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 258,\n    columnNumber: 5\n  }, this);\n}\n/* === ProductManagement.js (Part 2/4) END === */\n_s2(ProductManagement, \"aahBWDxlY7UtZpwNaZogvGFQ/tY=\", false, function () {\n  return [useToasts, useLookups];\n});\n_c = ProductManagement;\nvar _c;\n$RefreshReg$(_c, \"ProductManagement\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useMemo","Link","api","path","useLookups","jsxDEV","_jsxDEV","asStr","v","undefined","String","pickStatusName","x","_ref","_ref2","_x$status_name","status_name","StatusName","name","toInt","n","parseInt","trim","Number","isFinite","toNum","replace","useToasts","_s","toasts","setToasts","addToast","text","type","id","Math","random","toString","slice","prev","setTimeout","filter","t","Toasts","className","children","map","fileName","_jsxFileName","lineNumber","columnNumber","ProductManagement","_s2","products","setProducts","statuses","setStatuses","selectedProduct","setSelectedProduct","variants","setVariants","options","setOptions","loading","setLoading","search","setSearch","addingProduct","setAddingProduct","units","categories","fetchStatuses","res","get","err","console","error","fetchProducts","handleSelectProduct","p","product_id","filteredProducts","s","toLowerCase","product_name","includes","newProduct","setNewProduct","category_id","price","unit_id","description","handleAddProduct","post","renderTable","_p$stock","category_name","stock","status","onClick","renderPanel","renderVariantManager","renderBottomActions","placeholder","value","onChange","e","target","disabled","c","u","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/admin/ProductManagement.js"],"sourcesContent":["/* === ProductManagement.js (Part 1/4) START === */\r\nimport React, {\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n  useRef,\r\n  useMemo,\r\n} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./ProductManagement.css\";\r\nimport { api, path } from \"../lib/api\";\r\nimport { useLookups } from \"../lib/lookups\";\r\n\r\n/* =========================\r\n   Helper Functions\r\n========================= */\r\nconst asStr = (v) =>\r\n  v === null || v === undefined ? \"\" : String(v);\r\nconst pickStatusName = (x) =>\r\n  x?.status_name ?? x?.StatusName ?? x?.name ?? \"\";\r\nconst toInt = (v) => {\r\n  const n = parseInt(String(v ?? \"\").trim(), 10);\r\n  return Number.isFinite(n) ? n : null;\r\n};\r\nconst toNum = (v) => {\r\n  if (v === null || v === undefined) return null;\r\n  const n = Number(String(v).replace(/[,\\s‡∏ø]/g, \"\"));\r\n  return Number.isFinite(n) ? n : null;\r\n};\r\n\r\n/* =========================\r\n   Tiny Toast (in-file)\r\n========================= */\r\nfunction useToasts() {\r\n  const [toasts, setToasts] = useState([]);\r\n\r\n  const addToast = useCallback((text, type = \"info\") => {\r\n    const id = Math.random().toString(36).slice(2);\r\n    setToasts((prev) => [...prev, { id, text, type }]);\r\n    setTimeout(() => {\r\n      setToasts((prev) => prev.filter((t) => t.id !== id));\r\n    }, 2800);\r\n  }, []);\r\n\r\n  const Toasts = useMemo(\r\n    () => (\r\n      <div className=\"toast-container\">\r\n        {toasts.map((t) => (\r\n          <div key={t.id} className={`toast ${t.type}`}>\r\n            {t.text}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    ),\r\n    [toasts]\r\n  );\r\n\r\n  return { addToast, Toasts };\r\n}\r\n\r\n/* =========================\r\n   ProductManagement Component\r\n========================= */\r\nexport default function ProductManagement() {\r\n  const { addToast, Toasts } = useToasts();\r\n\r\n  // ‚îÄ‚îÄ‚îÄ State ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\r\n  const [products, setProducts] = useState([]);\r\n  const [statuses, setStatuses] = useState([]);\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [variants, setVariants] = useState([]);\r\n  const [options, setOptions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [addingProduct, setAddingProduct] = useState(false);\r\n\r\n  const { units, categories } = useLookups();\r\n\r\n  /* =========================\r\n     Fetch Products / Status\r\n  ========================= */\r\n  const fetchStatuses = useCallback(async () => {\r\n    try {\r\n      const res = await api.get(path(\"statuses\"));\r\n      setStatuses(res || []);\r\n    } catch (err) {\r\n      console.error(err);\r\n      addToast(\"‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à\", \"error\");\r\n    }\r\n  }, [addToast]);\r\n\r\n  const fetchProducts = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await api.get(path(\"admin/products\"));\r\n      setProducts(res || []);\r\n    } catch (err) {\r\n      console.error(err);\r\n      addToast(\"‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß\", \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [addToast]);\r\n\r\n  useEffect(() => {\r\n    fetchStatuses();\r\n    fetchProducts();\r\n  }, [fetchStatuses, fetchProducts]);\r\n\r\n  /* =========================\r\n     Select Product to Manage\r\n  ========================= */\r\n  const handleSelectProduct = useCallback((p) => {\r\n    setSelectedProduct((prev) =>\r\n      prev && prev.product_id === p.product_id ? null : p\r\n    );\r\n    setVariants([]);\r\n    setOptions([]);\r\n  }, []);\r\n\r\n  /* =========================\r\n     Search Filter\r\n  ========================= */\r\n  const filteredProducts = useMemo(() => {\r\n    const s = search.trim().toLowerCase();\r\n    if (!s) return products;\r\n    return products.filter((p) =>\r\n      (p.product_name || \"\").toLowerCase().includes(s)\r\n    );\r\n  }, [search, products]);\r\n\r\n  /* =========================\r\n     Add New Product\r\n  ========================= */\r\n  const [newProduct, setNewProduct] = useState({\r\n    product_name: \"\",\r\n    category_id: \"\",\r\n    price: \"\",\r\n    unit_id: \"\",\r\n    description: \"\",\r\n  });\r\n\r\n  const handleAddProduct = async () => {\r\n    try {\r\n      if (!newProduct.product_name) {\r\n        addToast(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\", \"warn\");\r\n        return;\r\n      }\r\n      setAddingProduct(true);\r\n      const res = await api.post(path(\"admin/products\"), newProduct);\r\n      addToast(\"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß\", \"ok\");\r\n      setNewProduct({\r\n        product_name: \"\",\r\n        category_id: \"\",\r\n        price: \"\",\r\n        unit_id: \"\",\r\n        description: \"\",\r\n      });\r\n      fetchProducts();\r\n    } catch (err) {\r\n      console.error(err);\r\n      addToast(\"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à\", \"error\");\r\n    } finally {\r\n      setAddingProduct(false);\r\n    }\r\n  };\r\n/* === ProductManagement.js (Part 1/4) END === */\r\n/* === ProductManagement.js (Part 2/4) START === */\r\n\r\n/* =========================\r\n   Table of Products\r\n========================= */\r\n  const renderTable = () => (\r\n    <div className=\"product-table-wrapper\">\r\n      <table className=\"product-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>\r\n            <th>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th>\r\n            <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>\r\n            <th>‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</th>\r\n            <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>\r\n            <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {filteredProducts.map((p) => (\r\n            <tr\r\n              key={p.product_id}\r\n              className={\r\n                selectedProduct &&\r\n                selectedProduct.product_id === p.product_id\r\n                  ? \"selected\"\r\n                  : \"\"\r\n              }\r\n            >\r\n              <td>{p.product_name}</td>\r\n              <td>{p.category_name || \"-\"}</td>\r\n              <td>{p.price ? `${p.price}‡∏ø` : \"-\"}</td>\r\n              <td>{p.stock ?? 0}</td>\r\n              <td>{pickStatusName(p.status)}</td>\r\n              <td>\r\n                <button\r\n                  className=\"btn-manage\"\r\n                  onClick={() => handleSelectProduct(p)}\r\n                >\r\n                  {selectedProduct &&\r\n                  selectedProduct.product_id === p.product_id\r\n                    ? \"‡∏ã‡πà‡∏≠‡∏ô\"\r\n                    : \"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£\"}\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n\r\n/* =========================\r\n   Render Selected Product Panel\r\n========================= */\r\n  const renderPanel = () => {\r\n    if (!selectedProduct) return null;\r\n    const p = selectedProduct;\r\n\r\n    return (\r\n      <div className=\"product-panel\">\r\n        <h3>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: {p.product_name}</h3>\r\n        <div className=\"product-detail\">\r\n          <div>\r\n            <strong>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà:</strong> {p.category_name}\r\n          </div>\r\n          <div>\r\n            <strong>‡∏£‡∏≤‡∏Ñ‡∏≤:</strong> {p.price}‡∏ø\r\n          </div>\r\n          <div>\r\n            <strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong> {pickStatusName(p.status)}\r\n          </div>\r\n          <div>\r\n            <strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</strong>{\" \"}\r\n            {p.description || \"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î\"}\r\n          </div>\r\n        </div>\r\n\r\n        {/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Variant Manager ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */}\r\n        {renderVariantManager()}\r\n        {/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Action Buttons ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */}\r\n        {renderBottomActions()}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /* =========================\r\n     Main Render\r\n  ========================= */\r\n  return (\r\n    <div className=\"product-page\">\r\n      <h2>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Full Mode)</h2>\r\n\r\n      {/* Search & Add */}\r\n      <div className=\"toolbar\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />\r\n        <button\r\n          className=\"btn-add\"\r\n          onClick={handleAddProduct}\r\n          disabled={addingProduct}\r\n        >\r\n          ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà\r\n        </button>\r\n      </div>\r\n\r\n      {/* Add Product Form */}\r\n      <div className=\"new-product-form\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\"\r\n          value={newProduct.product_name}\r\n          onChange={(e) =>\r\n            setNewProduct({ ...newProduct, product_name: e.target.value })\r\n          }\r\n        />\r\n        <select\r\n          value={newProduct.category_id}\r\n          onChange={(e) =>\r\n            setNewProduct({ ...newProduct, category_id: e.target.value })\r\n          }\r\n        >\r\n          <option value=\"\">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>\r\n          {categories.map((c) => (\r\n            <option key={c.id} value={c.id}>\r\n              {c.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ø)\"\r\n          value={newProduct.price}\r\n          onChange={(e) =>\r\n            setNewProduct({ ...newProduct, price: e.target.value })\r\n          }\r\n        />\r\n        <select\r\n          value={newProduct.unit_id}\r\n          onChange={(e) =>\r\n            setNewProduct({ ...newProduct, unit_id: e.target.value })\r\n          }\r\n        >\r\n          <option value=\"\">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢</option>\r\n          {units.map((u) => (\r\n            <option key={u.id} value={u.id}>\r\n              {u.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <textarea\r\n          placeholder=\"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\"\r\n          value={newProduct.description}\r\n          onChange={(e) =>\r\n            setNewProduct({ ...newProduct, description: e.target.value })\r\n          }\r\n        ></textarea>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      {loading ? <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...</p> : renderTable()}\r\n\r\n      {/* Panel */}\r\n      {renderPanel()}\r\n\r\n      {/* Toasts */}\r\n      {Toasts}\r\n    </div>\r\n  );\r\n}\r\n/* === ProductManagement.js (Part 2/4) END === */\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}