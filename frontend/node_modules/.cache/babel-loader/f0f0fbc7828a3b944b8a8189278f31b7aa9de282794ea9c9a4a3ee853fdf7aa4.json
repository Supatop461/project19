{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\admin\\\\AdminUnits.js\",\n  _s = $RefreshSig$();\n// src/admin/AdminUnits.js\n// ✅ หน่วยสินค้า (product_units) — ฝั่งแอดมิน (เวอร์ชันตัด Toolbar ออกทั้งหมด)\n// Endpoints ใช้จริง:\n//   GET    /api/admin/units\n//   POST   /api/admin/units\n//   PUT    /api/admin/units/:code\n//   DELETE /api/admin/units/:code\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport './admin-units.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst asStr = v => v === null || v === undefined ? '' : String(v).trim();\nconst toArr = x => Array.isArray(x) ? x : x ? [x] : [];\nconst uniq = xs => Array.from(new Set(xs));\n\n/* ---------- Toggle Button Group (multi) ---------- */\nfunction MultiToggle({\n  options,\n  value = [],\n  onChange\n}) {\n  const set = new Set((value || []).map(String));\n  const toggle = id => {\n    const next = new Set(set);\n    const key = String(id);\n    next.has(key) ? next.delete(key) : next.add(key);\n    onChange(Array.from(next));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mu-wrap\",\n    children: options.map(opt => {\n      const id = String(opt.value);\n      const active = set.has(id);\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: `mu-chip ${active ? 'is-active' : ''}`,\n        onClick: () => toggle(id),\n        \"aria-pressed\": active,\n        title: opt.label,\n        children: opt.label\n      }, id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n}\n\n/* ---------- API helpers ---------- */\n_c = MultiToggle;\nasync function httpJSON(method, url, body) {\n  const res = await fetch(url, {\n    method,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    credentials: 'include',\n    body: body ? JSON.stringify(body) : undefined\n  });\n  if (!res.ok) {\n    const err = await res.json().catch(() => ({}));\n    throw {\n      status: res.status,\n      response: {\n        data: err\n      }\n    };\n  }\n  return res.json().catch(() => ({}));\n}\nconst listUnits = async () => {\n  try {\n    return await httpJSON('GET', '/api/admin/units');\n  } catch (e) {\n    if ((e === null || e === void 0 ? void 0 : e.status) === 404) return await httpJSON('GET', '/api/units');\n    throw e;\n  }\n};\nconst createUnitAPI = payload => httpJSON('POST', '/api/admin/units', payload);\nconst updateUnitAPI = (codeOrId, payload) => httpJSON('PUT', `/api/admin/units/${encodeURIComponent(codeOrId)}`, payload);\nconst deleteUnitAPI = codeOrId => httpJSON('DELETE', `/api/admin/units/${encodeURIComponent(codeOrId)}`);\nconst unitKey = u => {\n  var _u$code, _ref, _u$unit_id;\n  return (_u$code = u === null || u === void 0 ? void 0 : u.code) !== null && _u$code !== void 0 ? _u$code : (_ref = (_u$unit_id = u === null || u === void 0 ? void 0 : u.unit_id) !== null && _u$unit_id !== void 0 ? _u$unit_id : u === null || u === void 0 ? void 0 : u.id) !== null && _ref !== void 0 ? _ref : '';\n};\n\n/* ---------- Main Component ---------- */\nexport default function AdminUnits() {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [units, setUnits] = useState([]);\n  const [form, setForm] = useState({\n    code: '',\n    unit_name: '',\n    description: '',\n    category_ids: []\n  });\n  const [editing, setEditing] = useState(null);\n  const formWrapRef = useRef(null);\n  const unitNameInputRef = useRef(null);\n  const focusForm = () => {\n    var _unitNameInputRef$cur, _formWrapRef$current;\n    const target = unitNameInputRef.current || formWrapRef.current;\n    if (!target) return;\n    target.scrollIntoView({\n      behavior: 'smooth',\n      block: 'center'\n    });\n    (_unitNameInputRef$cur = unitNameInputRef.current) === null || _unitNameInputRef$cur === void 0 ? void 0 : _unitNameInputRef$cur.focus({\n      preventScroll: true\n    });\n    (_formWrapRef$current = formWrapRef.current) === null || _formWrapRef$current === void 0 ? void 0 : _formWrapRef$current.classList.add('flash-focus');\n    setTimeout(() => {\n      var _formWrapRef$current2;\n      return (_formWrapRef$current2 = formWrapRef.current) === null || _formWrapRef$current2 === void 0 ? void 0 : _formWrapRef$current2.classList.remove('flash-focus');\n    }, 700);\n  };\n  const setField = (k, v) => setForm(prev => ({\n    ...prev,\n    [k]: v\n  }));\n  function extractCategoryIds(u) {\n    if (Array.isArray(u === null || u === void 0 ? void 0 : u.category_ids) && u.category_ids.length) return u.category_ids.map(String);\n    if (Array.isArray(u === null || u === void 0 ? void 0 : u.categories) && u.categories.length) return u.categories.map(c => {\n      var _ref2, _c$category_id;\n      return String((_ref2 = (_c$category_id = c.category_id) !== null && _c$category_id !== void 0 ? _c$category_id : c.id) !== null && _ref2 !== void 0 ? _ref2 : c.code);\n    });\n    if (u !== null && u !== void 0 && u.category_id) return [String(u.category_id)];\n    return [];\n  }\n  const isPublishedOn = u => (u === null || u === void 0 ? void 0 : u.is_visible) !== false && (u === null || u === void 0 ? void 0 : u.is_active) !== false && (u === null || u === void 0 ? void 0 : u.is_published) !== false;\n  async function loadAll() {\n    setLoading(true);\n    try {\n      const catRes = await fetch('/api/categories?published=1', {\n        credentials: 'include'\n      });\n      if (!catRes.ok) throw new Error('Cannot load categories');\n      const catJson = await catRes.json().catch(() => []);\n      const cats = (Array.isArray(catJson) ? catJson : []).map(c => {\n        var _ref3, _c$category_id2, _ref4, _c$category_id3, _c$category_name;\n        return {\n          value: String((_ref3 = (_c$category_id2 = c.category_id) !== null && _c$category_id2 !== void 0 ? _c$category_id2 : c.id) !== null && _ref3 !== void 0 ? _ref3 : c.code),\n          label: `${(_ref4 = (_c$category_id3 = c.category_id) !== null && _c$category_id3 !== void 0 ? _c$category_id3 : c.id) !== null && _ref4 !== void 0 ? _ref4 : c.code} — ${(_c$category_name = c.category_name) !== null && _c$category_name !== void 0 ? _c$category_name : c.name}`\n        };\n      });\n      setCategories(cats);\n      const data = await listUnits();\n      setUnits(Array.isArray(data) ? data : []);\n    } catch (e) {\n      console.error(e);\n      alert('โหลดข้อมูลไม่สำเร็จ');\n    } finally {\n      setLoading(false);\n    }\n  }\n  useEffect(() => {\n    loadAll();\n  }, []);\n  function startEdit(u) {\n    setEditing(u);\n    setForm({\n      code: asStr(u.code),\n      unit_name: asStr(u.unit_name),\n      description: asStr(u.description),\n      category_ids: extractCategoryIds(u)\n    });\n    setTimeout(focusForm, 0);\n  }\n  async function doSubmit(e) {\n    var _e$preventDefault;\n    e === null || e === void 0 ? void 0 : (_e$preventDefault = e.preventDefault) === null || _e$preventDefault === void 0 ? void 0 : _e$preventDefault.call(e);\n    const ids = uniq(toArr(form.category_ids).map(String));\n    const codeLower = asStr(form.code).toLowerCase();\n    const payload = {\n      code: codeLower,\n      unit_name: asStr(form.unit_name),\n      description: asStr(form.description) || null,\n      category_id: ids.length ? ids[0] : null,\n      category_ids: ids\n    };\n    if (!payload.code || !payload.unit_name) return alert('กรอก code และ unit name ให้ครบ');\n    setLoading(true);\n    try {\n      if (editing) await updateUnitAPI(unitKey(editing), payload);else await createUnitAPI(payload);\n      await loadAll();\n      setEditing(null);\n      setForm({\n        code: '',\n        unit_name: '',\n        description: '',\n        category_ids: []\n      });\n    } catch (e2) {\n      var _e2$response, _e2$response$data, _e2$response2, _e2$response2$data;\n      console.error(e2);\n      const msg = (e2 === null || e2 === void 0 ? void 0 : (_e2$response = e2.response) === null || _e2$response === void 0 ? void 0 : (_e2$response$data = _e2$response.data) === null || _e2$response$data === void 0 ? void 0 : _e2$response$data.message) || (e2 === null || e2 === void 0 ? void 0 : (_e2$response2 = e2.response) === null || _e2$response2 === void 0 ? void 0 : (_e2$response2$data = _e2$response2.data) === null || _e2$response2$data === void 0 ? void 0 : _e2$response2$data.error) || 'บันทึกไม่สำเร็จ';\n      alert(msg);\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function onDelete(row) {\n    const key = unitKey(row);\n    if (!key) return alert('ไม่พบรหัสหน่วยที่จะลบ');\n    if (!window.confirm(`ลบหน่วย ${row.code || row.unit_name}?`)) return;\n    setLoading(true);\n    try {\n      await deleteUnitAPI(key);\n      await loadAll();\n    } catch (e) {\n      var _e$response, _e$response$data, _e$response2, _e$response2$data;\n      console.error(e);\n      alert((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || (e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.error) || 'ลบไม่สำเร็จ');\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function onTogglePublish(row) {\n    const key = unitKey(row);\n    if (!key) return;\n    setLoading(true);\n    try {\n      const next = !isPublishedOn(row);\n      await updateUnitAPI(key, {\n        is_published: next\n      });\n      await loadAll();\n    } catch (e) {\n      var _e$response3, _e$response3$data, _e$response4, _e$response4$data;\n      console.error(e);\n      alert((e === null || e === void 0 ? void 0 : (_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : _e$response3$data.message) || (e === null || e === void 0 ? void 0 : (_e$response4 = e.response) === null || _e$response4 === void 0 ? void 0 : (_e$response4$data = _e$response4.data) === null || _e$response4$data === void 0 ? void 0 : _e$response4$data.error) || 'อัปเดตสถานะเผยแพร่ไม่สำเร็จ');\n    } finally {\n      setLoading(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page page-wide\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-head\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/admin\",\n          children: \"\\u2190 \\u0E01\\u0E25\\u0E31\\u0E1A\\u0E44\\u0E1B\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 (\\u0E08\\u0E32\\u0E01\\u0E10\\u0E32\\u0E19\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      ref: formWrapRef,\n      className: \"card unit-form-card\",\n      onSubmit: doSubmit,\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"code (\\u0E40\\u0E0A\\u0E48\\u0E19: piece, pot) [a-z]\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: form.code,\n          onChange: e => setField('code', e.target.value),\n          placeholder: \"\\u0E40\\u0E0A\\u0E48\\u0E19 pot, bag, kg\",\n          disabled: !!(editing !== null && editing !== void 0 && editing.code)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"unit name (\\u0E40\\u0E0A\\u0E48\\u0E19: \\u0E0A\\u0E34\\u0E49\\u0E19, \\u0E01\\u0E23\\u0E30\\u0E16\\u0E32\\u0E07)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: unitNameInputRef,\n          value: form.unit_name,\n          onChange: e => setField('unit_name', e.target.value),\n          placeholder: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0E2B\\u0E21\\u0E27\\u0E14 (\\u0E01\\u0E14\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E44\\u0E14\\u0E49\\u0E2B\\u0E25\\u0E32\\u0E22\\u0E04\\u0E48\\u0E32)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MultiToggle, {\n          options: categories,\n          value: form.category_ids,\n          onChange: ids => setField('category_ids', ids)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"hint\",\n          children: \"\\u0E01\\u0E14\\u0E1B\\u0E38\\u0E48\\u0E21\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01/\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01 (\\u0E2B\\u0E25\\u0E32\\u0E22\\u0E04\\u0E48\\u0E32\\u0E44\\u0E14\\u0E49)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"description (\\u0E16\\u0E49\\u0E32\\u0E21\\u0E35)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: form.description,\n          onChange: e => setField('description', e.target.value),\n          placeholder: \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21\",\n          rows: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn-primary\",\n          disabled: loading,\n          children: editing ? 'บันทึกการแก้ไข' : 'เพิ่มหน่วยสินค้า'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), editing && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-secondary\",\n          onClick: () => {\n            setEditing(null);\n            setForm({\n              code: '',\n              unit_name: '',\n              description: '',\n              category_ids: []\n            });\n          },\n          disabled: loading,\n          children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table card\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-scroll\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"tbl-units\",\n          children: [/*#__PURE__*/_jsxDEV(\"colgroup\", {\n            children: [/*#__PURE__*/_jsxDEV(\"col\", {\n              style: {\n                width: '22%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n              style: {\n                width: '30%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n              style: {\n                width: '18%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n              style: {\n                width: '12%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n              style: {\n                width: '18%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"txt-left\",\n                children: \"code\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"txt-left\",\n                children: \"unit_name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"txt-left\",\n                children: \"category_ids\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"txt-left\",\n                children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"txt-right\",\n                children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [units.map(u => {\n              const ids = extractCategoryIds(u);\n              const on = isPublishedOn(u);\n              const key = unitKey(u);\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"mono\",\n                  children: u.code || '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"wrap\",\n                  children: u.unit_name || '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: ids.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"badges\",\n                    children: ids.map(id => /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"badge\",\n                      children: id\n                    }, id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 304,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 302,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"muted\",\n                    children: \"-\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: on ? 'badge on' : 'badge off',\n                    children: on ? 'เผยแพร่' : 'ถูกซ่อน'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 310,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"actions-cell\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-chip\",\n                    onClick: () => startEdit(u),\n                    children: \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-chip danger\",\n                    onClick: () => onDelete(u),\n                    children: \"\\u0E25\\u0E1A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: on ? 'btn-chip muted' : 'btn-chip primary',\n                    onClick: () => onTogglePublish(u),\n                    children: on ? 'ซ่อน' : 'เผยแพร่'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 21\n                }, this)]\n              }, key || u.code, true, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 19\n              }, this);\n            }), !units.length && /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: 5,\n                className: \"muted\",\n                style: {\n                  textAlign: 'center',\n                  padding: 24\n                },\n                children: \"\\u0E44\\u0E21\\u0E48\\u0E1E\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminUnits, \"6B/X5hkEC88RNZg8HKUMsnfCU1k=\");\n_c2 = AdminUnits;\nvar _c, _c2;\n$RefreshReg$(_c, \"MultiToggle\");\n$RefreshReg$(_c2, \"AdminUnits\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Link","jsxDEV","_jsxDEV","asStr","v","undefined","String","trim","toArr","x","Array","isArray","uniq","xs","from","Set","MultiToggle","options","value","onChange","set","map","toggle","id","next","key","has","delete","add","className","children","opt","active","type","onClick","title","label","fileName","_jsxFileName","lineNumber","columnNumber","_c","httpJSON","method","url","body","res","fetch","headers","credentials","JSON","stringify","ok","err","json","catch","status","response","data","listUnits","e","createUnitAPI","payload","updateUnitAPI","codeOrId","encodeURIComponent","deleteUnitAPI","unitKey","u","_u$code","_ref","_u$unit_id","code","unit_id","AdminUnits","_s","loading","setLoading","categories","setCategories","units","setUnits","form","setForm","unit_name","description","category_ids","editing","setEditing","formWrapRef","unitNameInputRef","focusForm","_unitNameInputRef$cur","_formWrapRef$current","target","current","scrollIntoView","behavior","block","focus","preventScroll","classList","setTimeout","_formWrapRef$current2","remove","setField","k","prev","extractCategoryIds","length","c","_ref2","_c$category_id","category_id","isPublishedOn","is_visible","is_active","is_published","loadAll","catRes","Error","catJson","cats","_ref3","_c$category_id2","_ref4","_c$category_id3","_c$category_name","category_name","name","console","error","alert","startEdit","doSubmit","_e$preventDefault","preventDefault","call","ids","codeLower","toLowerCase","e2","_e2$response","_e2$response$data","_e2$response2","_e2$response2$data","msg","message","onDelete","row","window","confirm","_e$response","_e$response$data","_e$response2","_e$response2$data","onTogglePublish","_e$response3","_e$response3$data","_e$response4","_e$response4$data","to","ref","onSubmit","autoComplete","placeholder","disabled","rows","style","width","on","colSpan","textAlign","padding","_c2","$RefreshReg$"],"sources":["D:/project19/frontend/src/admin/AdminUnits.js"],"sourcesContent":["// src/admin/AdminUnits.js\r\n// ✅ หน่วยสินค้า (product_units) — ฝั่งแอดมิน (เวอร์ชันตัด Toolbar ออกทั้งหมด)\r\n// Endpoints ใช้จริง:\r\n//   GET    /api/admin/units\r\n//   POST   /api/admin/units\r\n//   PUT    /api/admin/units/:code\r\n//   DELETE /api/admin/units/:code\r\n\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './admin-units.css';\r\n\r\nconst asStr = (v) => (v === null || v === undefined) ? '' : String(v).trim();\r\nconst toArr = (x) => Array.isArray(x) ? x : (x ? [x] : []);\r\nconst uniq = (xs) => Array.from(new Set(xs));\r\n\r\n/* ---------- Toggle Button Group (multi) ---------- */\r\nfunction MultiToggle({ options, value = [], onChange }) {\r\n  const set = new Set((value || []).map(String));\r\n  const toggle = (id) => {\r\n    const next = new Set(set);\r\n    const key = String(id);\r\n    next.has(key) ? next.delete(key) : next.add(key);\r\n    onChange(Array.from(next));\r\n  };\r\n  return (\r\n    <div className=\"mu-wrap\">\r\n      {options.map(opt => {\r\n        const id = String(opt.value);\r\n        const active = set.has(id);\r\n        return (\r\n          <button\r\n            type=\"button\"\r\n            key={id}\r\n            className={`mu-chip ${active ? 'is-active' : ''}`}\r\n            onClick={() => toggle(id)}\r\n            aria-pressed={active}\r\n            title={opt.label}\r\n          >\r\n            {opt.label}\r\n          </button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ---------- API helpers ---------- */\r\nasync function httpJSON(method, url, body) {\r\n  const res = await fetch(url, {\r\n    method,\r\n    headers: { 'Content-Type': 'application/json' },\r\n    credentials: 'include',\r\n    body: body ? JSON.stringify(body) : undefined,\r\n  });\r\n  if (!res.ok) {\r\n    const err = await res.json().catch(() => ({}));\r\n    throw { status: res.status, response: { data: err } };\r\n  }\r\n  return res.json().catch(() => ({}));\r\n}\r\n\r\nconst listUnits = async () => {\r\n  try {\r\n    return await httpJSON('GET', '/api/admin/units');\r\n  } catch (e) {\r\n    if (e?.status === 404) return await httpJSON('GET', '/api/units');\r\n    throw e;\r\n  }\r\n};\r\nconst createUnitAPI = (payload) => httpJSON('POST', '/api/admin/units', payload);\r\nconst updateUnitAPI = (codeOrId, payload) => httpJSON('PUT', `/api/admin/units/${encodeURIComponent(codeOrId)}`, payload);\r\nconst deleteUnitAPI = (codeOrId) => httpJSON('DELETE', `/api/admin/units/${encodeURIComponent(codeOrId)}`);\r\n\r\nconst unitKey = (u) => u?.code ?? (u?.unit_id ?? u?.id ?? '');\r\n\r\n/* ---------- Main Component ---------- */\r\nexport default function AdminUnits() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [categories, setCategories] = useState([]);\r\n  const [units, setUnits] = useState([]);\r\n  const [form, setForm] = useState({ code: '', unit_name: '', description: '', category_ids: [] });\r\n  const [editing, setEditing] = useState(null);\r\n\r\n  const formWrapRef = useRef(null);\r\n  const unitNameInputRef = useRef(null);\r\n\r\n  const focusForm = () => {\r\n    const target = unitNameInputRef.current || formWrapRef.current;\r\n    if (!target) return;\r\n    target.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n    unitNameInputRef.current?.focus({ preventScroll: true });\r\n    formWrapRef.current?.classList.add('flash-focus');\r\n    setTimeout(() => formWrapRef.current?.classList.remove('flash-focus'), 700);\r\n  };\r\n\r\n  const setField = (k, v) => setForm(prev => ({ ...prev, [k]: v }));\r\n\r\n  function extractCategoryIds(u) {\r\n    if (Array.isArray(u?.category_ids) && u.category_ids.length) return u.category_ids.map(String);\r\n    if (Array.isArray(u?.categories) && u.categories.length)\r\n      return u.categories.map(c => String(c.category_id ?? c.id ?? c.code));\r\n    if (u?.category_id) return [String(u.category_id)];\r\n    return [];\r\n  }\r\n\r\n  const isPublishedOn = (u) =>\r\n    (u?.is_visible !== false) && (u?.is_active !== false) && (u?.is_published !== false);\r\n\r\n  async function loadAll() {\r\n    setLoading(true);\r\n    try {\r\n      const catRes = await fetch('/api/categories?published=1', { credentials: 'include' });\r\n      if (!catRes.ok) throw new Error('Cannot load categories');\r\n      const catJson = await catRes.json().catch(() => []);\r\n      const cats = (Array.isArray(catJson) ? catJson : []).map(c => ({\r\n        value: String(c.category_id ?? c.id ?? c.code),\r\n        label: `${c.category_id ?? c.id ?? c.code} — ${c.category_name ?? c.name}`,\r\n      }));\r\n      setCategories(cats);\r\n\r\n      const data = await listUnits();\r\n      setUnits(Array.isArray(data) ? data : []);\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert('โหลดข้อมูลไม่สำเร็จ');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => { loadAll(); }, []);\r\n\r\n  function startEdit(u) {\r\n    setEditing(u);\r\n    setForm({\r\n      code: asStr(u.code),\r\n      unit_name: asStr(u.unit_name),\r\n      description: asStr(u.description),\r\n      category_ids: extractCategoryIds(u),\r\n    });\r\n    setTimeout(focusForm, 0);\r\n  }\r\n\r\n  async function doSubmit(e) {\r\n    e?.preventDefault?.();\r\n    const ids = uniq(toArr(form.category_ids).map(String));\r\n    const codeLower = asStr(form.code).toLowerCase();\r\n    const payload = {\r\n      code: codeLower,\r\n      unit_name: asStr(form.unit_name),\r\n      description: asStr(form.description) || null,\r\n      category_id: ids.length ? ids[0] : null,\r\n      category_ids: ids,\r\n    };\r\n    if (!payload.code || !payload.unit_name) return alert('กรอก code และ unit name ให้ครบ');\r\n    setLoading(true);\r\n    try {\r\n      if (editing) await updateUnitAPI(unitKey(editing), payload);\r\n      else await createUnitAPI(payload);\r\n      await loadAll();\r\n      setEditing(null);\r\n      setForm({ code: '', unit_name: '', description: '', category_ids: [] });\r\n    } catch (e2) {\r\n      console.error(e2);\r\n      const msg = e2?.response?.data?.message || e2?.response?.data?.error || 'บันทึกไม่สำเร็จ';\r\n      alert(msg);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function onDelete(row) {\r\n    const key = unitKey(row);\r\n    if (!key) return alert('ไม่พบรหัสหน่วยที่จะลบ');\r\n    if (!window.confirm(`ลบหน่วย ${row.code || row.unit_name}?`)) return;\r\n    setLoading(true);\r\n    try {\r\n      await deleteUnitAPI(key);\r\n      await loadAll();\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(e?.response?.data?.message || e?.response?.data?.error || 'ลบไม่สำเร็จ');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function onTogglePublish(row) {\r\n    const key = unitKey(row);\r\n    if (!key) return;\r\n    setLoading(true);\r\n    try {\r\n      const next = !isPublishedOn(row);\r\n      await updateUnitAPI(key, { is_published: next });\r\n      await loadAll();\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(e?.response?.data?.message || e?.response?.data?.error || 'อัปเดตสถานะเผยแพร่ไม่สำเร็จ');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"page page-wide\">\r\n      <div className=\"page-head\">\r\n        <p><Link to=\"/admin\">← กลับไปจัดการสินค้า</Link></p>\r\n        <h2>จัดการหน่วยสินค้า (จากฐานข้อมูล)</h2>\r\n      </div>\r\n\r\n      {/* ───────────── Form ───────────── */}\r\n      <form ref={formWrapRef} className=\"card unit-form-card\" onSubmit={doSubmit} autoComplete=\"off\">\r\n        <div className=\"form-row\">\r\n          <label>code (เช่น: piece, pot) [a-z]</label>\r\n          <input\r\n            value={form.code}\r\n            onChange={e => setField('code', e.target.value)}\r\n            placeholder=\"เช่น pot, bag, kg\"\r\n            disabled={!!editing?.code}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-row\">\r\n          <label>unit name (เช่น: ชิ้น, กระถาง)</label>\r\n          <input\r\n            ref={unitNameInputRef}\r\n            value={form.unit_name}\r\n            onChange={e => setField('unit_name', e.target.value)}\r\n            placeholder=\"ชื่อหน่วย\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-row\">\r\n          <label>หมวด (กดเลือกได้หลายค่า)</label>\r\n          <MultiToggle\r\n            options={categories}\r\n            value={form.category_ids}\r\n            onChange={(ids) => setField('category_ids', ids)}\r\n          />\r\n          <small className=\"hint\">กดปุ่มเพื่อเลือก/ยกเลิก (หลายค่าได้)</small>\r\n        </div>\r\n\r\n        <div className=\"form-row\">\r\n          <label>description (ถ้ามี)</label>\r\n          <textarea\r\n            value={form.description}\r\n            onChange={e => setField('description', e.target.value)}\r\n            placeholder=\"บันทึกเพิ่มเติม\"\r\n            rows={2}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"actions\">\r\n          <button type=\"submit\" className=\"btn-primary\" disabled={loading}>\r\n            {editing ? 'บันทึกการแก้ไข' : 'เพิ่มหน่วยสินค้า'}\r\n          </button>\r\n          {editing && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn-secondary\"\r\n              onClick={() => { setEditing(null); setForm({ code: '', unit_name: '', description: '', category_ids: [] }); }}\r\n              disabled={loading}\r\n            >\r\n              ยกเลิกแก้ไข\r\n            </button>\r\n          )}\r\n        </div>\r\n      </form>\r\n\r\n      {/* ───────────── Units Table ───────────── */}\r\n      <div className=\"table card\">\r\n        <div className=\"table-scroll\">\r\n          <table className=\"tbl-units\">\r\n            <colgroup>\r\n              <col style={{ width: '22%' }} />\r\n              <col style={{ width: '30%' }} />\r\n              <col style={{ width: '18%' }} />\r\n              <col style={{ width: '12%' }} />\r\n              <col style={{ width: '18%' }} />\r\n            </colgroup>\r\n            <thead>\r\n              <tr>\r\n                <th className=\"txt-left\">code</th>\r\n                <th className=\"txt-left\">unit_name</th>\r\n                <th className=\"txt-left\">category_ids</th>\r\n                <th className=\"txt-left\">สถานะ</th>\r\n                <th className=\"txt-right\">จัดการ</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {units.map((u) => {\r\n                const ids = extractCategoryIds(u);\r\n                const on = isPublishedOn(u);\r\n                const key = unitKey(u);\r\n                return (\r\n                  <tr key={key || u.code}>\r\n                    <td className=\"mono\">{u.code || '-'}</td>\r\n                    <td className=\"wrap\">{u.unit_name || '-'}</td>\r\n                    <td>\r\n                      {ids.length ? (\r\n                        <div className=\"badges\">\r\n                          {ids.map((id) => (\r\n                            <span className=\"badge\" key={id}>{id}</span>\r\n                          ))}\r\n                        </div>\r\n                      ) : <span className=\"muted\">-</span>}\r\n                    </td>\r\n                    <td>\r\n                      <span className={on ? 'badge on' : 'badge off'}>\r\n                        {on ? 'เผยแพร่' : 'ถูกซ่อน'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"actions-cell\">\r\n                      <button className=\"btn-chip\" onClick={() => startEdit(u)}>แก้ไข</button>\r\n                      <button className=\"btn-chip danger\" onClick={() => onDelete(u)}>ลบ</button>\r\n                      <button className={on ? 'btn-chip muted' : 'btn-chip primary'} onClick={() => onTogglePublish(u)}>\r\n                        {on ? 'ซ่อน' : 'เผยแพร่'}\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n              {!units.length && (\r\n                <tr>\r\n                  <td colSpan={5} className=\"muted\" style={{ textAlign: 'center', padding: 24 }}>\r\n                    ไม่พบข้อมูล\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}