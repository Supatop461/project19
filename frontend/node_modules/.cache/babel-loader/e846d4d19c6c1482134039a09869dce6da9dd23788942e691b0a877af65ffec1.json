{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\admin\\\\ProductManagement.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n/* === ProductManagement.js (Part 1/4) START === */\n// frontend/src/admin/ProductManagement.js\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./ProductManagement.css\";\nimport { api, path } from \"../lib/api\";\nimport { useLookups } from \"../lib/lookups\";\n\n/* ---------- Helpers ---------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst asStr = v => v === null || v === undefined ? \"\" : String(v);\nconst pickStatusName = x => {\n  var _ref, _ref2, _x$status_name;\n  return (_ref = (_ref2 = (_x$status_name = x === null || x === void 0 ? void 0 : x.status_name) !== null && _x$status_name !== void 0 ? _x$status_name : x === null || x === void 0 ? void 0 : x.StatusName) !== null && _ref2 !== void 0 ? _ref2 : x === null || x === void 0 ? void 0 : x.name) !== null && _ref !== void 0 ? _ref : \"\";\n};\nconst toInt = v => {\n  const n = parseInt(String(v !== null && v !== void 0 ? v : \"\").trim(), 10);\n  return Number.isFinite(n) ? n : null;\n};\nconst toNum = v => {\n  if (v === null || v === undefined) return null;\n  const n = Number(String(v).replace(/[,\\s฿]/g, \"\"));\n  return Number.isFinite(n) ? n : null;\n};\n\n/* ---------- Tiny Toast ---------- */\nfunction useToasts() {\n  _s();\n  const [toasts, setToasts] = useState([]);\n  const push = (msg, type = \"info\") => {\n    const id = Math.random().toString(36).slice(2);\n    setToasts(xs => [...xs, {\n      id,\n      msg,\n      type\n    }]);\n    setTimeout(() => setToasts(xs => xs.filter(t => t.id !== id)), 3000);\n  };\n  const remove = id => setToasts(xs => xs.filter(t => t.id !== id));\n  return {\n    toasts,\n    push,\n    remove\n  };\n}\n\n/* ---------- Upload Helper (generic) ---------- */\n_s(useToasts, \"nD8TBOiFYf9ajstmZpZK2DP4rNo=\");\nasync function uploadImage(file) {\n  var _res$data, _res$data2, _res$data3, _res$data4;\n  if (!file) return null;\n  const fd = new FormData();\n  fd.append(\"file\", file);\n  const res = await api.post(path(\"/upload\"), fd, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  });\n  return (res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.url) || (res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.imageUrl) || (res === null || res === void 0 ? void 0 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.path) || (res === null || res === void 0 ? void 0 : (_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : _res$data4.location) || null;\n}\n\n/* ---------- Component ---------- */\nexport default function ProductManagement() {\n  _s2();\n  const [products, setProducts] = useState([]);\n  const [statuses, setStatuses] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showArchived, setShowArchived] = useState(false);\n\n  /* filters (เผื่อใช้ต่อยอดฟิลเตอร์เดิมของคุณ) */\n  const [query, setQuery] = useState(\"\");\n  const [catFilter, setCatFilter] = useState(\"\");\n  const [subcatFilter, setSubcatFilter] = useState(\"\");\n  const [stockFilter, setStockFilter] = useState(\"all\");\n\n  /* lookups */\n  const {\n    data: lookups,\n    reload: reloadLookups,\n    loading: lkLoading\n  } = useLookups({\n    published: true\n  });\n\n  /* form states */\n  const [form, setForm] = useState({\n    product_name: \"\",\n    description: \"\",\n    price: \"\",\n    category_id: null,\n    subcategory_id: null,\n    product_unit_id: null,\n    size_value: \"\",\n    size_unit_id: null,\n    origin: \"\",\n    product_status_id: \"\"\n  });\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [previews, setPreviews] = useState([]);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editProductId, setEditProductId] = useState(null);\n\n  /* variant panel state (รวม VariantsManager ในหน้านี้) */\n  const [showVariantPanel, setShowVariantPanel] = useState(false);\n  const [opt1Name, setOpt1Name] = useState(\"สี\");\n  const [opt2Name, setOpt2Name] = useState(\"ขนาด\");\n  const [opt3Name, setOpt3Name] = useState(\"\");\n  const [opt1Values, setOpt1Values] = useState([]);\n  const [opt2Values, setOpt2Values] = useState([]);\n  const [opt3Values, setOpt3Values] = useState([]);\n  const [variantRows, setVariantRows] = useState([]);\n  const [savingVariants, setSavingVariants] = useState(false);\n\n  /* refs */\n  const nameRef = useRef(null);\n  const formTopRef = useRef(null);\n\n  /* toasts */\n  const {\n    toasts,\n    push,\n    remove\n  } = useToasts();\n\n  /* ---------- API Helpers ---------- */\n  const handleApiError = (err, fallback = \"เกิดข้อผิดพลาด\") => {\n    var _err$response, _err$response2, _err$response2$data;\n    console.error(fallback, (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || (err === null || err === void 0 ? void 0 : err.message) || err);\n    const msg = (err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || (err === null || err === void 0 ? void 0 : err.message) || fallback;\n    push(`❌ ${msg}`, \"danger\");\n  };\n\n  /* ---------- Load Products ---------- */\n  const fetchProducts = useCallback(async () => {\n    try {\n      const {\n        data\n      } = await api.get(path(\"/admin/products\"), {\n        params: {\n          include_archived: showArchived ? 1 : 0\n        }\n      });\n      let items = Array.isArray(data === null || data === void 0 ? void 0 : data.items) ? data.items : Array.isArray(data) ? data : [];\n      items = items.map(p => {\n        var _ref3, _p$stock_qty;\n        const stock = Number((_ref3 = (_p$stock_qty = p.stock_qty) !== null && _p$stock_qty !== void 0 ? _p$stock_qty : p.stock) !== null && _ref3 !== void 0 ? _ref3 : 0);\n        return {\n          ...p,\n          product_status_name: stock <= 0 ? \"สินค้าหมด\" : stock <= 5 ? \"สต็อกใกล้หมด\" : \"พร้อมจำหน่าย\"\n        };\n      });\n      setProducts(items);\n    } catch (err) {\n      handleApiError(err, \"❌ โหลดสินค้าไม่สำเร็จ\");\n    }\n  }, [showArchived]);\n\n  /* ---------- Load Statuses ---------- */\n  const fetchStatuses = useCallback(async () => {\n    try {\n      let res = await api.get(path(\"/product-status\"));\n      if (!Array.isArray(res.data)) {\n        try {\n          res = await api.get(path(\"/product-statuses\"));\n        } catch {}\n      }\n      const normalized = (res.data || []).map(x => {\n        var _x$product_status_id;\n        return {\n          id: asStr((_x$product_status_id = x === null || x === void 0 ? void 0 : x.product_status_id) !== null && _x$product_status_id !== void 0 ? _x$product_status_id : x === null || x === void 0 ? void 0 : x.id),\n          name: pickStatusName(x)\n        };\n      });\n      setStatuses(normalized);\n    } catch {\n      console.warn(\"⚠ ไม่มี endpoint product-status\");\n      setStatuses([]);\n    }\n  }, []);\n\n  /* ---------- Toggle publish/archive ---------- */\n  const togglePublish = useCallback(async (productId, current) => {\n    setProducts(prev => prev.map(p => p.product_id === productId ? {\n      ...p,\n      is_published: !current\n    } : p));\n    try {\n      await api.patch(path(`/admin/products/${productId}/publish`), {\n        is_published: !current\n      });\n      push(!current ? \"✅ เปิดแสดงสินค้าแล้ว\" : \"✅ ซ่อนสินค้าแล้ว\", \"ok\");\n      await fetchProducts();\n    } catch (err) {\n      handleApiError(err, \"❌ อัปเดตสถานะไม่สำเร็จ\");\n    }\n  }, [fetchProducts]);\n  const archiveProduct = useCallback(async id => {\n    if (!window.confirm(\"ต้องการเก็บสินค้านี้ไว้ในคลังใช่ไหม?\")) return;\n    try {\n      await api.delete(path(`/admin/products/${id}`));\n      push(\"🗃️ ย้ายไปถังเก็บแล้ว\", \"warn\");\n      await fetchProducts();\n    } catch (err) {\n      handleApiError(err, \"❌ เก็บสินค้าไม่สำเร็จ\");\n    }\n  }, [fetchProducts]);\n  const unarchiveProduct = useCallback(async id => {\n    try {\n      await api.patch(path(`/admin/products/${id}/unarchive`));\n      push(\"♻️ กู้คืนสินค้าแล้ว\", \"ok\");\n      await fetchProducts();\n    } catch (err) {\n      handleApiError(err, \"❌ กู้คืนสินค้าไม่สำเร็จ\");\n    }\n  }, [fetchProducts]);\n\n  /* ---------- Init ---------- */\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      await Promise.all([fetchProducts(), fetchStatuses(), reloadLookups()]);\n      setLoading(false);\n    })();\n  }, [fetchProducts, fetchStatuses, reloadLookups, showArchived]);\n  /* === ProductManagement.js (Part 1/4) END === */\n  /* === ProductManagement.js (Part 2/4) START === */\n  /* ---------- Form Events ---------- */\n  const onChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setForm(p => ({\n      ...p,\n      [name]: value\n    }));\n  };\n  const onFiles = e => setSelectedFiles(Array.from(e.target.files || []));\n  useEffect(() => {\n    if (!selectedFiles.length) {\n      setPreviews([]);\n      return;\n    }\n    const urls = selectedFiles.map(f => ({\n      name: f.name,\n      url: URL.createObjectURL(f)\n    }));\n    setPreviews(urls);\n    return () => urls.forEach(u => URL.revokeObjectURL(u.url));\n  }, [selectedFiles]);\n  const clearForm = () => {\n    setForm({\n      product_name: \"\",\n      description: \"\",\n      price: \"\",\n      category_id: null,\n      subcategory_id: null,\n      product_unit_id: null,\n      size_value: \"\",\n      size_unit_id: null,\n      origin: \"\",\n      product_status_id: \"\"\n    });\n    setSelectedFiles([]);\n    setPreviews([]);\n    setIsEditing(false);\n    setEditProductId(null);\n  };\n\n  /* ---------- Submit ---------- */\n  const onSubmit = async e => {\n    e.preventDefault();\n    const price = parseInt(form.price);\n    if (isNaN(price) || price < 0) {\n      push(\"⚠️ ราคาต้องเป็นจำนวนเต็ม\", \"warn\");\n      return;\n    }\n    try {\n      let uploaded = [];\n      if (selectedFiles.length > 0) uploaded = (await Promise.all(selectedFiles.map(uploadImage))).filter(Boolean);\n      const body = {\n        product_name: form.product_name.trim(),\n        description: form.description,\n        price,\n        category_id: form.category_id,\n        subcategory_id: form.subcategory_id,\n        product_unit_id: form.product_unit_id,\n        size_unit_id: form.size_unit_id,\n        size_value: form.size_value,\n        origin: form.origin,\n        product_status_id: form.product_status_id\n      };\n      let id = editProductId;\n      if (isEditing && id) {\n        await api.put(path(`/admin/products/${id}`), body);\n        push(\"✅ อัปเดตสินค้าสำเร็จ\", \"ok\");\n      } else {\n        var _res$data$product_id, _res$data5, _res$data6;\n        const res = await api.post(path(\"/admin/products\"), body);\n        id = (_res$data$product_id = res === null || res === void 0 ? void 0 : (_res$data5 = res.data) === null || _res$data5 === void 0 ? void 0 : _res$data5.product_id) !== null && _res$data$product_id !== void 0 ? _res$data$product_id : res === null || res === void 0 ? void 0 : (_res$data6 = res.data) === null || _res$data6 === void 0 ? void 0 : _res$data6.id;\n        push(\"🎉 เพิ่มสินค้าเรียบร้อย\", \"ok\");\n      }\n      if (uploaded.length) {\n        for (let i = 0; i < uploaded.length; i++) {\n          try {\n            await api.post(path(`/admin/products/${id}/images`), {\n              images: [{\n                url: uploaded[i],\n                position: i + 1,\n                is_primary: i === 0\n              }]\n            });\n          } catch {}\n        }\n      }\n      await fetchProducts();\n      await reloadLookups();\n      clearForm();\n    } catch (err) {\n      handleApiError(err, \"❌ บันทึกสินค้าไม่สำเร็จ\");\n    }\n  };\n\n  /* ---------- Variants Panel Handlers ---------- */\n  const addTag = (list, setList, txt) => {\n    const v = String(txt || \"\").trim();\n    if (!v) return;\n    if (!list.includes(v)) setList([...list, v]);\n  };\n  const removeTag = (list, setList, idx) => {\n    const arr = list.filter((_, i) => i !== idx);\n    setList(arr);\n    push(\"ลบค่าเรียบร้อย\", \"warn\");\n  };\n  const removeOption = opt => {\n    if (opt === 1) {\n      setOpt1Name(\"\");\n      setOpt1Values([]);\n    }\n    if (opt === 2) {\n      setOpt2Name(\"\");\n      setOpt2Values([]);\n    }\n    if (opt === 3) {\n      setOpt3Name(\"\");\n      setOpt3Values([]);\n    }\n    push(\"ลบตัวเลือกนี้แล้ว\", \"warn\");\n  };\n  const resetAllOptions = () => {\n    setOpt1Name(\"สี\");\n    setOpt2Name(\"ขนาด\");\n    setOpt3Name(\"\");\n    setOpt1Values([]);\n    setOpt2Values([]);\n    setOpt3Values([]);\n    setVariantRows([]);\n    push(\"ล้างตัวเลือกทั้งหมดแล้ว\", \"warn\");\n  };\n\n  /* ---------- Build Variant Rows (combinations) ---------- */\n  useEffect(() => {\n    const v1 = opt1Values.length ? opt1Values : [null];\n    const v2 = opt2Values.length ? opt2Values : [null];\n    const v3 = opt3Values.length ? opt3Values : [null];\n    const combos = [];\n    for (const a of v1) for (const b of v2) for (const c of v3) combos.push({\n      opt1: a,\n      opt2: b,\n      opt3: c,\n      price: \"\",\n      sku: \"\",\n      image: null,\n      variant_id: null\n    });\n    setVariantRows(combos);\n  }, [opt1Values, opt2Values, opt3Values]);\n\n  /* ---------- Upload per row ---------- */\n  const onUploadRowImage = async (file, idx) => {\n    if (!file) return;\n    const temp = URL.createObjectURL(file);\n    setVariantRows(prev => {\n      const a = [...prev];\n      a[idx] = {\n        ...a[idx],\n        image: temp\n      };\n      return a;\n    });\n    try {\n      const url = await uploadImage(file);\n      setVariantRows(prev => {\n        const a = [...prev];\n        a[idx] = {\n          ...a[idx],\n          image: url\n        };\n        return a;\n      });\n    } catch (err) {\n      handleApiError(err, \"อัปโหลดรูปไม่สำเร็จ\");\n    } finally {\n      setTimeout(() => URL.revokeObjectURL(temp), 2500);\n    }\n  };\n\n  /* ---------- Delete Variant Row ---------- */\n  const handleDeleteVariant = async (row, idx) => {\n    if (!row.variant_id) {\n      setVariantRows(p => p.filter((_, i) => i !== idx));\n      push(\"🗑️ ลบตัวเลือกออกจากรายการแล้ว\", \"warn\");\n      return;\n    }\n    if (!window.confirm(\"ต้องการลบตัวเลือกนี้ใช่ไหม?\")) return;\n    try {\n      await api.delete(path(`/api/variants/${row.variant_id}`));\n      setVariantRows(p => p.filter((_, i) => i !== idx));\n      push(\"✅ ลบตัวเลือกเรียบร้อย\", \"ok\");\n    } catch (err) {\n      handleApiError(err, \"❌ ลบตัวเลือกไม่สำเร็จ\");\n    }\n  };\n\n  /* ---------- Auto SKU ---------- */\n  const autoSku = () => {\n    setVariantRows(prev => prev.map((r, i) => {\n      var _form$product_name, _form$product_name$su;\n      const parts = [((_form$product_name = form.product_name) === null || _form$product_name === void 0 ? void 0 : (_form$product_name$su = _form$product_name.substring(0, 3)) === null || _form$product_name$su === void 0 ? void 0 : _form$product_name$su.toUpperCase()) || \"PRD\", r.opt1, r.opt2, r.opt3].filter(Boolean);\n      return {\n        ...r,\n        sku: parts.join(\"-\") + \"-\" + String(i + 1).padStart(2, \"0\")\n      };\n    }));\n    push(\"✨ เติม SKU สำเร็จ\", \"ok\");\n  };\n\n  /* ---------- Save All Variants ---------- */\n  const saveAllVariants = async () => {\n    if (!editProductId) {\n      push(\"กรุณาเลือกสินค้าก่อน\", \"warn\");\n      return;\n    }\n    setSavingVariants(true);\n    try {\n      const payloads = variantRows.filter(r => r.opt1 || r.opt2 || r.opt3).map(r => ({\n        product_id: editProductId,\n        options: [r.opt1 ? {\n          name: opt1Name,\n          value: r.opt1\n        } : null, r.opt2 ? {\n          name: opt2Name,\n          value: r.opt2\n        } : null, r.opt3 && opt3Name ? {\n          name: opt3Name,\n          value: r.opt3\n        } : null].filter(Boolean),\n        price: r.price ? Number(r.price) : null,\n        sku: r.sku || null,\n        image_url: r.image || null\n      }));\n      for (const p of payloads) await api.post(path(\"/api/variants/upsert-single\"), p);\n      push(\"✅ บันทึกตัวเลือกสำเร็จ\", \"ok\");\n    } catch (err) {\n      handleApiError(err, \"❌ บันทึกตัวเลือกไม่สำเร็จ\");\n    } finally {\n      setSavingVariants(false);\n    }\n  };\n  /* === ProductManagement.js (Part 2/4) END === */\n  /* === ProductManagement.js (Part 3/4) START === */\n  if (loading || lkLoading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 16\n    },\n    children: \"\\u23F3 \\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 351,\n    columnNumber: 12\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pm-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pm-toasts\",\n      children: toasts.map(t => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `toast ${t.type}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: t.msg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"toast-x\",\n          onClick: () => remove(t.id),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this)]\n      }, t.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pm-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pm-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"emoji\",\n          children: \"\\uD83E\\uDEB4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E41\\u0E25\\u0E30\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"subtitle\",\n          children: \"\\u0E42\\u0E2B\\u0E21\\u0E14\\u0E40\\u0E15\\u0E47\\u0E21 (Full Mode) \\u2014 \\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E43\\u0E19\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E40\\u0E14\\u0E35\\u0E22\\u0E27\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pm-links\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/admin/categories\",\n          className: \"btn btn-ghost\",\n          children: \"\\uD83D\\uDCC2 \\u0E1B\\u0E23\\u0E30\\u0E40\\u0E20\\u0E17\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/admin/subcategories\",\n          className: \"btn btn-ghost\",\n          children: \"\\uD83D\\uDDC2\\uFE0F \\u0E2B\\u0E21\\u0E27\\u0E14\\u0E22\\u0E48\\u0E2D\\u0E22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/admin/units\",\n          className: \"btn btn-ghost\",\n          children: \"\\uD83D\\uDCCF \\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pm-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"section-title\",\n        children: isEditing ? \"แก้ไขสินค้า\" : \"เพิ่มสินค้าใหม่\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSubmit,\n        className: \"pm-form\",\n        ref: formTopRef,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"frm\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"product_name\",\n            value: form.product_name,\n            onChange: onChange,\n            placeholder: \"\\u0E40\\u0E0A\\u0E48\\u0E19 \\u0E22\\u0E32\\u0E07\\u0E2D\\u0E34\\u0E19\\u0E42\\u0E14 / Monstera\",\n            ref: nameRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"frm\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0E23\\u0E32\\u0E04\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"price\",\n            min: \"0\",\n            value: form.price,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"frm\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0E41\\u0E2B\\u0E25\\u0E48\\u0E07\\u0E17\\u0E35\\u0E48\\u0E21\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"origin\",\n            value: form.origin,\n            onChange: onChange,\n            placeholder: \"\\u0E40\\u0E0A\\u0E48\\u0E19 \\u0E40\\u0E0A\\u0E35\\u0E22\\u0E07\\u0E43\\u0E2B\\u0E21\\u0E48\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"frm col-span-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0E04\\u0E33\\u0E2D\\u0E18\\u0E34\\u0E1A\\u0E32\\u0E22\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: form.description,\n            onChange: onChange,\n            placeholder: \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"frm col-span-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            multiple: true,\n            accept: \"image/*\",\n            onChange: onFiles\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, this), previews.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pm-files-preview\",\n            children: previews.map((p, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pm-file\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: p.url,\n                alt: p.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pm-meta\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: p.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn-xxs danger\",\n                  onClick: () => setSelectedFiles(prev => prev.filter((_, x) => x !== i)),\n                  children: \"\\u0E25\\u0E1A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 21\n              }, this)]\n            }, p.url, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pm-actions col-span-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary btn-lg\",\n            type: \"submit\",\n            children: isEditing ? \"อัปเดต\" : \"บันทึก\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this), isEditing && /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-ghost btn-lg\",\n            onClick: clearForm,\n            children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-primary btn-lg\",\n            onClick: () => setShowVariantPanel(true),\n            children: \"\\u2795 \\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 (\\u0E2A\\u0E35 / \\u0E02\\u0E19\\u0E32\\u0E14 / \\u0E27\\u0E31\\u0E2A\\u0E14\\u0E38)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), showVariantPanel && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pm-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"section-title\",\n        children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 11\n      }, this), [1, 2, 3].map(lvl => {\n        const nameState = lvl === 1 ? [opt1Name, setOpt1Name] : lvl === 2 ? [opt2Name, setOpt2Name] : [opt3Name, setOpt3Name];\n        const valsState = lvl === 1 ? [opt1Values, setOpt1Values] : lvl === 2 ? [opt2Values, setOpt2Values] : [opt3Values, setOpt3Values];\n        const [name, setName] = nameState;\n        const [vals, setVals] = valsState;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vm-opt\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E17\\u0E35\\u0E48 \", lvl]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              gap: 8,\n              alignItems: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              value: name,\n              onChange: e => setName(e.target.value),\n              placeholder: \"\\u0E40\\u0E0A\\u0E48\\u0E19 \\u0E2A\\u0E35 / \\u0E02\\u0E19\\u0E32\\u0E14 / \\u0E27\\u0E31\\u0E2A\\u0E14\\u0E38\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-xxs danger\",\n              onClick: () => removeOption(lvl),\n              children: \"\\uD83D\\uDDD1\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"vm-chips\",\n            children: [vals.map((v, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"vm-chip\",\n              children: [v, /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeTag(vals, setVals, i),\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 23\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 21\n            }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"\\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C\\u0E41\\u0E25\\u0E49\\u0E27 Enter\",\n              onKeyDown: e => {\n                if (e.key === \"Enter\") {\n                  e.preventDefault();\n                  addTag(vals, setVals, e.target.value);\n                  e.target.value = \"\";\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 17\n          }, this)]\n        }, lvl, true, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 15\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vm-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: resetAllOptions,\n          children: \"\\uD83D\\uDDD1\\uFE0F \\u0E25\\u0E1A\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: autoSku,\n          children: \"\\u2728 \\u0E40\\u0E15\\u0E34\\u0E21 SKU \\u0E2D\\u0E31\\u0E15\\u0E42\\u0E19\\u0E21\\u0E31\\u0E15\\u0E34\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary\",\n          disabled: savingVariants,\n          onClick: saveAllVariants,\n          children: savingVariants ? \"กำลังบันทึก...\" : \"💾 บันทึกทั้งหมด\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"vm-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: opt1Name || \"ตัวเลือก 1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: opt2Name || \"ตัวเลือก 2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: opt3Name || \"ตัวเลือก 3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E23\\u0E32\\u0E04\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"SKU\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E25\\u0E1A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: variantRows.map((r, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: r.image,\n                className: \"vm-thumb\",\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"vm-upload\",\n                children: [\"+\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"image/*\",\n                  onChange: e => {\n                    var _e$target$files;\n                    return onUploadRowImage((_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0], i);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.opt1 || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.opt2 || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.opt3 || \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                placeholder: \"\\u0E44\\u0E21\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E38\",\n                value: r.price,\n                onChange: e => {\n                  const v = e.target.value;\n                  setVariantRows(p => {\n                    const a = [...p];\n                    a[i] = {\n                      ...a[i],\n                      price: v\n                    };\n                    return a;\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                value: r.sku,\n                onChange: e => {\n                  const v = e.target.value;\n                  setVariantRows(p => {\n                    const a = [...p];\n                    a[i] = {\n                      ...a[i],\n                      sku: v\n                    };\n                    return a;\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn-xxs danger\",\n                onClick: () => handleDeleteVariant(r, i),\n                children: \"\\uD83D\\uDDD1\\uFE0F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 545,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 544,\n              columnNumber: 19\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 9\n    }, this), \"/* === ProductManagement.js (Part 3/4) END MARKER (outside JSX) === */ /* === ProductManagement.js (Part 4/4) START === */\", /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"section-title\",\n      children: \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 563,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pm-table-wrap\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"pm-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E23\\u0E32\\u0E04\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 30\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E04\\u0E07\\u0E40\\u0E2B\\u0E25\\u0E37\\u0E2D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 43\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 32\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 46\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: products.map(p => {\n            var _ref4, _p$stock_qty2, _p$price;\n            const stock = Number((_ref4 = (_p$stock_qty2 = p.stock_qty) !== null && _p$stock_qty2 !== void 0 ? _p$stock_qty2 : p.stock) !== null && _ref4 !== void 0 ? _ref4 : 0);\n            const published = !!p.is_published;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: p.product_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 578,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: Number((_p$price = p.price) !== null && _p$price !== void 0 ? _p$price : 0).toLocaleString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: stock\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 580,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: p.category_name || \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: p.product_status_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"cell-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `btn ${published ? \"btn-warn\" : \"btn-primary\"}`,\n                  onClick: () => togglePublish(p.product_id, published),\n                  children: published ? \"ไม่แสดง\" : \"แสดง\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 584,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-ghost\",\n                  onClick: () => {\n                    setIsEditing(true);\n                    setEditProductId(p.product_id);\n                    setForm({\n                      product_name: p.product_name,\n                      description: p.description,\n                      price: p.price,\n                      category_id: p.category_id,\n                      subcategory_id: p.subcategory_id,\n                      product_unit_id: p.product_unit_id,\n                      size_unit_id: p.size_unit_id,\n                      size_value: p.size_value,\n                      origin: p.origin,\n                      product_status_id: p.product_status_id\n                    });\n                    window.scrollTo({\n                      top: 0,\n                      behavior: \"smooth\"\n                    });\n                  },\n                  children: \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 588,\n                  columnNumber: 21\n                }, this), !p.is_archived ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger\",\n                  onClick: () => archiveProduct(p.product_id),\n                  children: \"\\u0E40\\u0E01\\u0E47\\u0E1A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 603,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-primary\",\n                  onClick: () => unarchiveProduct(p.product_id),\n                  children: \"\\u0E01\\u0E39\\u0E49\\u0E04\\u0E37\\u0E19\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 607,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-primary\",\n                  onClick: () => {\n                    setEditProductId(p.product_id);\n                    setShowVariantPanel(true);\n                  },\n                  children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 \\u23F7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 611,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 19\n              }, this)]\n            }, p.product_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 354,\n    columnNumber: 5\n  }, this);\n}\n/* === ProductManagement.js (Part 4/4) END === */\n_s2(ProductManagement, \"6m8RZS1w1g7Zo13iceaFh/MnTGs=\", false, function () {\n  return [useLookups, useToasts];\n});\n_c = ProductManagement;\nvar _c;\n$RefreshReg$(_c, \"ProductManagement\");","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","Link","api","path","useLookups","jsxDEV","_jsxDEV","asStr","v","undefined","String","pickStatusName","x","_ref","_ref2","_x$status_name","status_name","StatusName","name","toInt","n","parseInt","trim","Number","isFinite","toNum","replace","useToasts","_s","toasts","setToasts","push","msg","type","id","Math","random","toString","slice","xs","setTimeout","filter","t","remove","uploadImage","file","_res$data","_res$data2","_res$data3","_res$data4","fd","FormData","append","res","post","headers","data","url","imageUrl","location","ProductManagement","_s2","products","setProducts","statuses","setStatuses","loading","setLoading","showArchived","setShowArchived","query","setQuery","catFilter","setCatFilter","subcatFilter","setSubcatFilter","stockFilter","setStockFilter","lookups","reload","reloadLookups","lkLoading","published","form","setForm","product_name","description","price","category_id","subcategory_id","product_unit_id","size_value","size_unit_id","origin","product_status_id","selectedFiles","setSelectedFiles","previews","setPreviews","isEditing","setIsEditing","editProductId","setEditProductId","showVariantPanel","setShowVariantPanel","opt1Name","setOpt1Name","opt2Name","setOpt2Name","opt3Name","setOpt3Name","opt1Values","setOpt1Values","opt2Values","setOpt2Values","opt3Values","setOpt3Values","variantRows","setVariantRows","savingVariants","setSavingVariants","nameRef","formTopRef","handleApiError","err","fallback","_err$response","_err$response2","_err$response2$data","console","error","response","message","fetchProducts","get","params","include_archived","items","Array","isArray","map","p","_ref3","_p$stock_qty","stock","stock_qty","product_status_name","fetchStatuses","normalized","_x$product_status_id","warn","togglePublish","productId","current","prev","product_id","is_published","patch","archiveProduct","window","confirm","delete","unarchiveProduct","Promise","all","onChange","e","value","target","onFiles","from","files","length","urls","f","URL","createObjectURL","forEach","u","revokeObjectURL","clearForm","onSubmit","preventDefault","isNaN","uploaded","Boolean","body","put","_res$data$product_id","_res$data5","_res$data6","i","images","position","is_primary","addTag","list","setList","txt","includes","removeTag","idx","arr","_","removeOption","opt","resetAllOptions","v1","v2","v3","combos","a","b","c","opt1","opt2","opt3","sku","image","variant_id","onUploadRowImage","temp","handleDeleteVariant","row","autoSku","r","_form$product_name","_form$product_name$su","parts","substring","toUpperCase","join","padStart","saveAllVariants","payloads","options","image_url","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","to","ref","placeholder","min","multiple","accept","src","alt","lvl","nameState","valsState","setName","vals","setVals","display","gap","alignItems","onKeyDown","key","disabled","_e$target$files","_ref4","_p$stock_qty2","_p$price","toLocaleString","category_name","scrollTo","top","behavior","is_archived","_c","$RefreshReg$"],"sources":["D:/project19/frontend/src/admin/ProductManagement.js"],"sourcesContent":["/* === ProductManagement.js (Part 1/4) START === */\r\n// frontend/src/admin/ProductManagement.js\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./ProductManagement.css\";\r\nimport { api, path } from \"../lib/api\";\r\nimport { useLookups } from \"../lib/lookups\";\r\n\r\n/* ---------- Helpers ---------- */\r\nconst asStr = (v) => (v === null || v === undefined) ? \"\" : String(v);\r\nconst pickStatusName = (x) => x?.status_name ?? x?.StatusName ?? x?.name ?? \"\";\r\nconst toInt = (v) => {\r\n  const n = parseInt(String(v ?? \"\").trim(), 10);\r\n  return Number.isFinite(n) ? n : null;\r\n};\r\nconst toNum = (v) => {\r\n  if (v === null || v === undefined) return null;\r\n  const n = Number(String(v).replace(/[,\\s฿]/g, \"\"));\r\n  return Number.isFinite(n) ? n : null;\r\n};\r\n\r\n/* ---------- Tiny Toast ---------- */\r\nfunction useToasts() {\r\n  const [toasts, setToasts] = useState([]);\r\n  const push = (msg, type = \"info\") => {\r\n    const id = Math.random().toString(36).slice(2);\r\n    setToasts((xs) => [...xs, { id, msg, type }]);\r\n    setTimeout(() => setToasts((xs) => xs.filter((t) => t.id !== id)), 3000);\r\n  };\r\n  const remove = (id) => setToasts((xs) => xs.filter((t) => t.id !== id));\r\n  return { toasts, push, remove };\r\n}\r\n\r\n/* ---------- Upload Helper (generic) ---------- */\r\nasync function uploadImage(file) {\r\n  if (!file) return null;\r\n  const fd = new FormData();\r\n  fd.append(\"file\", file);\r\n  const res = await api.post(path(\"/upload\"), fd, { headers: { \"Content-Type\": \"multipart/form-data\" } });\r\n  return res?.data?.url || res?.data?.imageUrl || res?.data?.path || res?.data?.location || null;\r\n}\r\n\r\n/* ---------- Component ---------- */\r\nexport default function ProductManagement() {\r\n  const [products, setProducts] = useState([]);\r\n  const [statuses, setStatuses] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showArchived, setShowArchived] = useState(false);\r\n\r\n  /* filters (เผื่อใช้ต่อยอดฟิลเตอร์เดิมของคุณ) */\r\n  const [query, setQuery] = useState(\"\");\r\n  const [catFilter, setCatFilter] = useState(\"\");\r\n  const [subcatFilter, setSubcatFilter] = useState(\"\");\r\n  const [stockFilter, setStockFilter] = useState(\"all\");\r\n\r\n  /* lookups */\r\n  const { data: lookups, reload: reloadLookups, loading: lkLoading } = useLookups({ published: true });\r\n\r\n  /* form states */\r\n  const [form, setForm] = useState({\r\n    product_name: \"\", description: \"\", price: \"\",\r\n    category_id: null, subcategory_id: null,\r\n    product_unit_id: null, size_value: \"\", size_unit_id: null,\r\n    origin: \"\", product_status_id: \"\"\r\n  });\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [previews, setPreviews] = useState([]);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editProductId, setEditProductId] = useState(null);\r\n\r\n  /* variant panel state (รวม VariantsManager ในหน้านี้) */\r\n  const [showVariantPanel, setShowVariantPanel] = useState(false);\r\n  const [opt1Name, setOpt1Name] = useState(\"สี\");\r\n  const [opt2Name, setOpt2Name] = useState(\"ขนาด\");\r\n  const [opt3Name, setOpt3Name] = useState(\"\");\r\n  const [opt1Values, setOpt1Values] = useState([]);\r\n  const [opt2Values, setOpt2Values] = useState([]);\r\n  const [opt3Values, setOpt3Values] = useState([]);\r\n  const [variantRows, setVariantRows] = useState([]);\r\n  const [savingVariants, setSavingVariants] = useState(false);\r\n\r\n  /* refs */\r\n  const nameRef = useRef(null);\r\n  const formTopRef = useRef(null);\r\n\r\n  /* toasts */\r\n  const { toasts, push, remove } = useToasts();\r\n\r\n  /* ---------- API Helpers ---------- */\r\n  const handleApiError = (err, fallback = \"เกิดข้อผิดพลาด\") => {\r\n    console.error(fallback, err?.response?.data || err?.message || err);\r\n    const msg = err?.response?.data?.message || err?.message || fallback;\r\n    push(`❌ ${msg}`, \"danger\");\r\n  };\r\n\r\n  /* ---------- Load Products ---------- */\r\n  const fetchProducts = useCallback(async () => {\r\n    try {\r\n      const { data } = await api.get(path(\"/admin/products\"), {\r\n        params: { include_archived: showArchived ? 1 : 0 },\r\n      });\r\n      let items = Array.isArray(data?.items) ? data.items : (Array.isArray(data) ? data : []);\r\n      items = items.map((p) => {\r\n        const stock = Number(p.stock_qty ?? p.stock ?? 0);\r\n        return {\r\n          ...p,\r\n          product_status_name: stock <= 0 ? \"สินค้าหมด\" : stock <= 5 ? \"สต็อกใกล้หมด\" : \"พร้อมจำหน่าย\",\r\n        };\r\n      });\r\n      setProducts(items);\r\n    } catch (err) {\r\n      handleApiError(err, \"❌ โหลดสินค้าไม่สำเร็จ\");\r\n    }\r\n  }, [showArchived]);\r\n\r\n  /* ---------- Load Statuses ---------- */\r\n  const fetchStatuses = useCallback(async () => {\r\n    try {\r\n      let res = await api.get(path(\"/product-status\"));\r\n      if (!Array.isArray(res.data)) { try { res = await api.get(path(\"/product-statuses\")); } catch {} }\r\n      const normalized = (res.data || []).map((x) => ({\r\n        id: asStr(x?.product_status_id ?? x?.id),\r\n        name: pickStatusName(x),\r\n      }));\r\n      setStatuses(normalized);\r\n    } catch {\r\n      console.warn(\"⚠ ไม่มี endpoint product-status\");\r\n      setStatuses([]);\r\n    }\r\n  }, []);\r\n\r\n  /* ---------- Toggle publish/archive ---------- */\r\n  const togglePublish = useCallback(async (productId, current) => {\r\n    setProducts((prev) => prev.map((p) => p.product_id === productId ? { ...p, is_published: !current } : p));\r\n    try {\r\n      await api.patch(path(`/admin/products/${productId}/publish`), { is_published: !current });\r\n      push(!current ? \"✅ เปิดแสดงสินค้าแล้ว\" : \"✅ ซ่อนสินค้าแล้ว\", \"ok\");\r\n      await fetchProducts();\r\n    } catch (err) {\r\n      handleApiError(err, \"❌ อัปเดตสถานะไม่สำเร็จ\");\r\n    }\r\n  }, [fetchProducts]);\r\n\r\n  const archiveProduct = useCallback(async (id) => {\r\n    if (!window.confirm(\"ต้องการเก็บสินค้านี้ไว้ในคลังใช่ไหม?\")) return;\r\n    try {\r\n      await api.delete(path(`/admin/products/${id}`));\r\n      push(\"🗃️ ย้ายไปถังเก็บแล้ว\", \"warn\");\r\n      await fetchProducts();\r\n    } catch (err) {\r\n      handleApiError(err, \"❌ เก็บสินค้าไม่สำเร็จ\");\r\n    }\r\n  }, [fetchProducts]);\r\n\r\n  const unarchiveProduct = useCallback(async (id) => {\r\n    try {\r\n      await api.patch(path(`/admin/products/${id}/unarchive`));\r\n      push(\"♻️ กู้คืนสินค้าแล้ว\", \"ok\");\r\n      await fetchProducts();\r\n    } catch (err) {\r\n      handleApiError(err, \"❌ กู้คืนสินค้าไม่สำเร็จ\");\r\n    }\r\n  }, [fetchProducts]);\r\n\r\n  /* ---------- Init ---------- */\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      await Promise.all([fetchProducts(), fetchStatuses(), reloadLookups()]);\r\n      setLoading(false);\r\n    })();\r\n  }, [fetchProducts, fetchStatuses, reloadLookups, showArchived]);\r\n/* === ProductManagement.js (Part 1/4) END === */\r\n/* === ProductManagement.js (Part 2/4) START === */\r\n  /* ---------- Form Events ---------- */\r\n  const onChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setForm((p) => ({ ...p, [name]: value }));\r\n  };\r\n\r\n  const onFiles = (e) => setSelectedFiles(Array.from(e.target.files || []));\r\n  useEffect(() => {\r\n    if (!selectedFiles.length) { setPreviews([]); return; }\r\n    const urls = selectedFiles.map((f) => ({ name: f.name, url: URL.createObjectURL(f) }));\r\n    setPreviews(urls);\r\n    return () => urls.forEach((u) => URL.revokeObjectURL(u.url));\r\n  }, [selectedFiles]);\r\n\r\n  const clearForm = () => {\r\n    setForm({\r\n      product_name: \"\", description: \"\", price: \"\",\r\n      category_id: null, subcategory_id: null,\r\n      product_unit_id: null, size_value: \"\", size_unit_id: null,\r\n      origin: \"\", product_status_id: \"\"\r\n    });\r\n    setSelectedFiles([]); setPreviews([]);\r\n    setIsEditing(false); setEditProductId(null);\r\n  };\r\n\r\n  /* ---------- Submit ---------- */\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const price = parseInt(form.price);\r\n    if (isNaN(price) || price < 0) { push(\"⚠️ ราคาต้องเป็นจำนวนเต็ม\", \"warn\"); return; }\r\n    try {\r\n      let uploaded = [];\r\n      if (selectedFiles.length > 0)\r\n        uploaded = (await Promise.all(selectedFiles.map(uploadImage))).filter(Boolean);\r\n\r\n      const body = {\r\n        product_name: form.product_name.trim(),\r\n        description: form.description,\r\n        price,\r\n        category_id: form.category_id,\r\n        subcategory_id: form.subcategory_id,\r\n        product_unit_id: form.product_unit_id,\r\n        size_unit_id: form.size_unit_id,\r\n        size_value: form.size_value,\r\n        origin: form.origin,\r\n        product_status_id: form.product_status_id,\r\n      };\r\n\r\n      let id = editProductId;\r\n      if (isEditing && id) {\r\n        await api.put(path(`/admin/products/${id}`), body);\r\n        push(\"✅ อัปเดตสินค้าสำเร็จ\", \"ok\");\r\n      } else {\r\n        const res = await api.post(path(\"/admin/products\"), body);\r\n        id = res?.data?.product_id ?? res?.data?.id;\r\n        push(\"🎉 เพิ่มสินค้าเรียบร้อย\", \"ok\");\r\n      }\r\n\r\n      if (uploaded.length) {\r\n        for (let i = 0; i < uploaded.length; i++) {\r\n          try {\r\n            await api.post(path(`/admin/products/${id}/images`), {\r\n              images: [{ url: uploaded[i], position: i + 1, is_primary: i === 0 }],\r\n            });\r\n          } catch {}\r\n        }\r\n      }\r\n\r\n      await fetchProducts();\r\n      await reloadLookups();\r\n      clearForm();\r\n    } catch (err) {\r\n      handleApiError(err, \"❌ บันทึกสินค้าไม่สำเร็จ\");\r\n    }\r\n  };\r\n\r\n  /* ---------- Variants Panel Handlers ---------- */\r\n  const addTag = (list, setList, txt) => {\r\n    const v = String(txt || \"\").trim();\r\n    if (!v) return;\r\n    if (!list.includes(v)) setList([...list, v]);\r\n  };\r\n  const removeTag = (list, setList, idx) => {\r\n    const arr = list.filter((_, i) => i !== idx);\r\n    setList(arr);\r\n    push(\"ลบค่าเรียบร้อย\", \"warn\");\r\n  };\r\n  const removeOption = (opt) => {\r\n    if (opt === 1) { setOpt1Name(\"\"); setOpt1Values([]); }\r\n    if (opt === 2) { setOpt2Name(\"\"); setOpt2Values([]); }\r\n    if (opt === 3) { setOpt3Name(\"\"); setOpt3Values([]); }\r\n    push(\"ลบตัวเลือกนี้แล้ว\", \"warn\");\r\n  };\r\n  const resetAllOptions = () => {\r\n    setOpt1Name(\"สี\"); setOpt2Name(\"ขนาด\"); setOpt3Name(\"\");\r\n    setOpt1Values([]); setOpt2Values([]); setOpt3Values([]);\r\n    setVariantRows([]);\r\n    push(\"ล้างตัวเลือกทั้งหมดแล้ว\", \"warn\");\r\n  };\r\n\r\n  /* ---------- Build Variant Rows (combinations) ---------- */\r\n  useEffect(() => {\r\n    const v1 = opt1Values.length ? opt1Values : [null];\r\n    const v2 = opt2Values.length ? opt2Values : [null];\r\n    const v3 = opt3Values.length ? opt3Values : [null];\r\n    const combos = [];\r\n    for (const a of v1) for (const b of v2) for (const c of v3)\r\n      combos.push({ opt1: a, opt2: b, opt3: c, price: \"\", sku: \"\", image: null, variant_id: null });\r\n    setVariantRows(combos);\r\n  }, [opt1Values, opt2Values, opt3Values]);\r\n\r\n  /* ---------- Upload per row ---------- */\r\n  const onUploadRowImage = async (file, idx) => {\r\n    if (!file) return;\r\n    const temp = URL.createObjectURL(file);\r\n    setVariantRows((prev) => { const a = [...prev]; a[idx] = { ...a[idx], image: temp }; return a; });\r\n    try {\r\n      const url = await uploadImage(file);\r\n      setVariantRows((prev) => { const a = [...prev]; a[idx] = { ...a[idx], image: url }; return a; });\r\n    } catch (err) { handleApiError(err, \"อัปโหลดรูปไม่สำเร็จ\"); }\r\n    finally { setTimeout(() => URL.revokeObjectURL(temp), 2500); }\r\n  };\r\n\r\n  /* ---------- Delete Variant Row ---------- */\r\n  const handleDeleteVariant = async (row, idx) => {\r\n    if (!row.variant_id) {\r\n      setVariantRows((p) => p.filter((_, i) => i !== idx));\r\n      push(\"🗑️ ลบตัวเลือกออกจากรายการแล้ว\", \"warn\");\r\n      return;\r\n    }\r\n    if (!window.confirm(\"ต้องการลบตัวเลือกนี้ใช่ไหม?\")) return;\r\n    try {\r\n      await api.delete(path(`/api/variants/${row.variant_id}`));\r\n      setVariantRows((p) => p.filter((_, i) => i !== idx));\r\n      push(\"✅ ลบตัวเลือกเรียบร้อย\", \"ok\");\r\n    } catch (err) { handleApiError(err, \"❌ ลบตัวเลือกไม่สำเร็จ\"); }\r\n  };\r\n\r\n  /* ---------- Auto SKU ---------- */\r\n  const autoSku = () => {\r\n    setVariantRows((prev) => prev.map((r, i) => {\r\n      const parts = [\r\n        form.product_name?.substring(0, 3)?.toUpperCase() || \"PRD\",\r\n        r.opt1, r.opt2, r.opt3,\r\n      ].filter(Boolean);\r\n      return { ...r, sku: parts.join(\"-\") + \"-\" + String(i + 1).padStart(2, \"0\") };\r\n    }));\r\n    push(\"✨ เติม SKU สำเร็จ\", \"ok\");\r\n  };\r\n\r\n  /* ---------- Save All Variants ---------- */\r\n  const saveAllVariants = async () => {\r\n    if (!editProductId) { push(\"กรุณาเลือกสินค้าก่อน\", \"warn\"); return; }\r\n    setSavingVariants(true);\r\n    try {\r\n      const payloads = variantRows\r\n        .filter((r) => r.opt1 || r.opt2 || r.opt3)\r\n        .map((r) => ({\r\n          product_id: editProductId,\r\n          options: [\r\n            r.opt1 ? { name: opt1Name, value: r.opt1 } : null,\r\n            r.opt2 ? { name: opt2Name, value: r.opt2 } : null,\r\n            r.opt3 && opt3Name ? { name: opt3Name, value: r.opt3 } : null,\r\n          ].filter(Boolean),\r\n          price: r.price ? Number(r.price) : null,\r\n          sku: r.sku || null,\r\n          image_url: r.image || null,\r\n        }));\r\n      for (const p of payloads) await api.post(path(\"/api/variants/upsert-single\"), p);\r\n      push(\"✅ บันทึกตัวเลือกสำเร็จ\", \"ok\");\r\n    } catch (err) { handleApiError(err, \"❌ บันทึกตัวเลือกไม่สำเร็จ\"); }\r\n    finally { setSavingVariants(false); }\r\n  };\r\n/* === ProductManagement.js (Part 2/4) END === */\r\n/* === ProductManagement.js (Part 3/4) START === */\r\n  if (loading || lkLoading)\r\n    return <div style={{ padding: 16 }}>⏳ กำลังโหลดข้อมูล…</div>;\r\n\r\n  return (\r\n    <div className=\"pm-page\">\r\n      {/* Toast Host */}\r\n      <div className=\"pm-toasts\">\r\n        {toasts.map((t) => (\r\n          <div key={t.id} className={`toast ${t.type}`}>\r\n            <div>{t.msg}</div>\r\n            <button className=\"toast-x\" onClick={() => remove(t.id)}>×</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Header */}\r\n      <div className=\"pm-header\">\r\n        <div className=\"pm-title\">\r\n          <span className=\"emoji\">🪴</span>\r\n          <h1>เพิ่มและจัดการสินค้า</h1>\r\n          <span className=\"subtitle\">โหมดเต็ม (Full Mode) — ตัวเลือกในหน้าเดียว</span>\r\n        </div>\r\n        <div className=\"pm-links\">\r\n          <Link to=\"/admin/categories\" className=\"btn btn-ghost\">📂 ประเภท</Link>\r\n          <Link to=\"/admin/subcategories\" className=\"btn btn-ghost\">🗂️ หมวดย่อย</Link>\r\n          <Link to=\"/admin/units\" className=\"btn btn-ghost\">📏 หน่วยสินค้า</Link>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Add Product Form */}\r\n      <div className=\"pm-panel\">\r\n        <h2 className=\"section-title\">{isEditing ? \"แก้ไขสินค้า\" : \"เพิ่มสินค้าใหม่\"}</h2>\r\n        <form onSubmit={onSubmit} className=\"pm-form\" ref={formTopRef}>\r\n          <div className=\"frm\">\r\n            <label>ชื่อสินค้า</label>\r\n            <input name=\"product_name\" value={form.product_name} onChange={onChange}\r\n              placeholder=\"เช่น ยางอินโด / Monstera\" ref={nameRef} />\r\n          </div>\r\n          <div className=\"frm\">\r\n            <label>ราคา</label>\r\n            <input type=\"number\" name=\"price\" min=\"0\" value={form.price} onChange={onChange} />\r\n          </div>\r\n          <div className=\"frm\">\r\n            <label>แหล่งที่มา</label>\r\n            <input name=\"origin\" value={form.origin} onChange={onChange} placeholder=\"เช่น เชียงใหม่\" />\r\n          </div>\r\n          <div className=\"frm col-span-2\">\r\n            <label>คำอธิบายสินค้า</label>\r\n            <textarea name=\"description\" value={form.description} onChange={onChange} placeholder=\"รายละเอียดสินค้า\" />\r\n          </div>\r\n          <div className=\"frm col-span-2\">\r\n            <label>รูปภาพสินค้า</label>\r\n            <input type=\"file\" multiple accept=\"image/*\" onChange={onFiles} />\r\n            {previews.length > 0 && (\r\n              <div className=\"pm-files-preview\">\r\n                {previews.map((p, i) => (\r\n                  <div className=\"pm-file\" key={p.url}>\r\n                    <img src={p.url} alt={p.name} />\r\n                    <div className=\"pm-meta\">\r\n                      <div>{p.name}</div>\r\n                      <button type=\"button\" className=\"btn-xxs danger\"\r\n                        onClick={() => setSelectedFiles((prev) => prev.filter((_, x) => x !== i))}>\r\n                        ลบ\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"pm-actions col-span-2\">\r\n            <button className=\"btn btn-primary btn-lg\" type=\"submit\">\r\n              {isEditing ? \"อัปเดต\" : \"บันทึก\"}\r\n            </button>\r\n            {isEditing && (\r\n              <button type=\"button\" className=\"btn btn-ghost btn-lg\" onClick={clearForm}>\r\n                ยกเลิก\r\n              </button>\r\n            )}\r\n            <button type=\"button\" className=\"btn btn-primary btn-lg\"\r\n              onClick={() => setShowVariantPanel(true)}>\r\n              ➕ เพิ่มตัวเลือกสินค้า (สี / ขนาด / วัสดุ)\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      {/* Variants Panel */}\r\n      {showVariantPanel && (\r\n        <div className=\"pm-panel\">\r\n          <h2 className=\"section-title\">ตัวเลือกสินค้า</h2>\r\n\r\n          {/* Options 1-3 */}\r\n          {[1, 2, 3].map((lvl) => {\r\n            const nameState = lvl === 1 ? [opt1Name, setOpt1Name] : lvl === 2 ? [opt2Name, setOpt2Name] : [opt3Name, setOpt3Name];\r\n            const valsState = lvl === 1 ? [opt1Values, setOpt1Values] : lvl === 2 ? [opt2Values, setOpt2Values] : [opt3Values, setOpt3Values];\r\n            const [name, setName] = nameState;\r\n            const [vals, setVals] = valsState;\r\n            return (\r\n              <div key={lvl} className=\"vm-opt\">\r\n                <label>ตัวเลือกที่ {lvl}</label>\r\n                <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n                  <input value={name} onChange={(e) => setName(e.target.value)} placeholder=\"เช่น สี / ขนาด / วัสดุ\" />\r\n                  <button type=\"button\" className=\"btn-xxs danger\" onClick={() => removeOption(lvl)}>🗑️</button>\r\n                </div>\r\n                <div className=\"vm-chips\">\r\n                  {vals.map((v, i) => (\r\n                    <span className=\"vm-chip\" key={i}>\r\n                      {v}\r\n                      <button onClick={() => removeTag(vals, setVals, i)}>×</button>\r\n                    </span>\r\n                  ))}\r\n                  <input placeholder=\"พิมพ์แล้ว Enter\"\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === \"Enter\") {\r\n                        e.preventDefault();\r\n                        addTag(vals, setVals, e.target.value);\r\n                        e.target.value = \"\";\r\n                      }\r\n                    }} />\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n\r\n          <div className=\"vm-actions\">\r\n            <button className=\"btn\" onClick={resetAllOptions}>🗑️ ลบทั้งหมด</button>\r\n            <button className=\"btn\" onClick={autoSku}>✨ เติม SKU อัตโนมัติ</button>\r\n            <button className=\"btn-primary\" disabled={savingVariants} onClick={saveAllVariants}>\r\n              {savingVariants ? \"กำลังบันทึก...\" : \"💾 บันทึกทั้งหมด\"}\r\n            </button>\r\n          </div>\r\n\r\n          {/* Variant Table */}\r\n          <table className=\"vm-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>รูปภาพ</th>\r\n                <th>{opt1Name || \"ตัวเลือก 1\"}</th>\r\n                <th>{opt2Name || \"ตัวเลือก 2\"}</th>\r\n                <th>{opt3Name || \"ตัวเลือก 3\"}</th>\r\n                <th>ราคา</th>\r\n                <th>SKU</th>\r\n                <th>ลบ</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {variantRows.map((r, i) => (\r\n                <tr key={i}>\r\n                  <td>\r\n                    {r.image ? (\r\n                      <img src={r.image} className=\"vm-thumb\" alt=\"\" />\r\n                    ) : (\r\n                      <label className=\"vm-upload\">\r\n                        +\r\n                        <input\r\n                          type=\"file\"\r\n                          accept=\"image/*\"\r\n                          onChange={(e) => onUploadRowImage(e.target.files?.[0], i)}\r\n                        />\r\n                      </label>\r\n                    )}\r\n                  </td>\r\n                  <td>{r.opt1 || \"-\"}</td>\r\n                  <td>{r.opt2 || \"-\"}</td>\r\n                  <td>{r.opt3 || \"-\"}</td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"ไม่ระบุ\"\r\n                      value={r.price}\r\n                      onChange={(e) => {\r\n                        const v = e.target.value;\r\n                        setVariantRows((p) => {\r\n                          const a = [...p];\r\n                          a[i] = { ...a[i], price: v };\r\n                          return a;\r\n                        });\r\n                      }}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      value={r.sku}\r\n                      onChange={(e) => {\r\n                        const v = e.target.value;\r\n                        setVariantRows((p) => {\r\n                          const a = [...p];\r\n                          a[i] = { ...a[i], sku: v };\r\n                          return a;\r\n                        });\r\n                      }}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn-xxs danger\"\r\n                      onClick={() => handleDeleteVariant(r, i)}\r\n                    >\r\n                      🗑️\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n      {/* === ProductManagement.js (Part 3/4) END === */}\r\n/* === ProductManagement.js (Part 3/4) END MARKER (outside JSX) === */\r\n/* === ProductManagement.js (Part 4/4) START === */\r\n      {/* Product Table */}\r\n      <h2 className=\"section-title\">รายการสินค้า</h2>\r\n      <div className=\"pm-table-wrap\">\r\n        <table className=\"pm-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>สินค้า</th><th>ราคา</th><th>คงเหลือ</th>\r\n              <th>หมวดหมู่</th><th>สถานะ</th><th>จัดการ</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {products.map((p) => {\r\n              const stock = Number(p.stock_qty ?? p.stock ?? 0);\r\n              const published = !!p.is_published;\r\n              return (\r\n                <tr key={p.product_id}>\r\n                  <td><strong>{p.product_name}</strong></td>\r\n                  <td>{Number(p.price ?? 0).toLocaleString()}</td>\r\n                  <td>{stock}</td>\r\n                  <td>{p.category_name || \"-\"}</td>\r\n                  <td>{p.product_status_name}</td>\r\n                  <td className=\"cell-actions\">\r\n                    <button className={`btn ${published ? \"btn-warn\" : \"btn-primary\"}`}\r\n                      onClick={() => togglePublish(p.product_id, published)}>\r\n                      {published ? \"ไม่แสดง\" : \"แสดง\"}\r\n                    </button>\r\n                    <button className=\"btn btn-ghost\" onClick={() => {\r\n                      setIsEditing(true);\r\n                      setEditProductId(p.product_id);\r\n                      setForm({\r\n                        product_name: p.product_name, description: p.description,\r\n                        price: p.price, category_id: p.category_id,\r\n                        subcategory_id: p.subcategory_id,\r\n                        product_unit_id: p.product_unit_id,\r\n                        size_unit_id: p.size_unit_id,\r\n                        size_value: p.size_value,\r\n                        origin: p.origin, product_status_id: p.product_status_id\r\n                      });\r\n                      window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n                    }}>แก้ไข</button>\r\n                    {!p.is_archived ? (\r\n                      <button className=\"btn btn-danger\" onClick={() => archiveProduct(p.product_id)}>\r\n                        เก็บ\r\n                      </button>\r\n                    ) : (\r\n                      <button className=\"btn btn-primary\" onClick={() => unarchiveProduct(p.product_id)}>\r\n                        กู้คืน\r\n                      </button>\r\n                    )}\r\n                    <button className=\"btn btn-primary\"\r\n                      onClick={() => { setEditProductId(p.product_id); setShowVariantPanel(true); }}>\r\n                      จัดการสินค้า ⏷\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n/* === ProductManagement.js (Part 4/4) END === */\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}