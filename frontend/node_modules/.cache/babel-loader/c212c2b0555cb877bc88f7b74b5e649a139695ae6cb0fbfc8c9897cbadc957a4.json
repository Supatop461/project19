{"ast":null,"code":"var _jsxFileName = \"D:\\\\project19\\\\frontend\\\\src\\\\index.js\";\n// FRONTEND: src/index.js\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport axios from 'axios';\n\n/* =========================\n   1) Axios Global Config\n   ========================= */\n// ❗ เปลี่ยน default เป็นโดเมนอย่างเดียว (ไม่มี /api)\n// จากนี้ endpoint ทุกที่ในโปรเจกต์ ให้ขึ้นต้นด้วย /api/...\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = (process.env.REACT_APP_API_BASE || process.env.REACT_APP_API_BASEURL || 'http://localhost:3001').replace(/\\/+$/, ''); // ตัด \"/\" ท้าย ป้องกัน // ซ้อน\n\naxios.defaults.baseURL = API_BASE;\naxios.defaults.timeout = 10000; // กันรีเควสต์ค้างนาน\n\n// แนบ token ตั้งแต่บูต (กรณีเคยล็อกอินไว้)\nconst bootToken = localStorage.getItem('token');\nif (bootToken) {\n  axios.defaults.headers.common['Authorization'] = `Bearer ${bootToken}`;\n}\na;\nconst IS_DEV = process.env.NODE_ENV !== 'production';\n\n// helper สร้าง URL ไว้โชว์ใน log\nfunction buildUrl(cfg) {\n  const b = (cfg.baseURL || '').replace(/\\/+$/, '');\n  const u = cfg.url || '';\n  return /^https?:\\/\\//i.test(u) ? u : `${b}${u.startsWith('/') ? '' : '/'}${u}`;\n}\n\n// Request: อ่าน token ล่าสุดก่อนยิงทุกครั้ง + log\naxios.interceptors.request.use(cfg => {\n  const t = localStorage.getItem('token'); // เผื่อ token เปลี่ยนหลังบูต\n  if (t) cfg.headers.Authorization = `Bearer ${t}`;\n  if (IS_DEV) {\n    cfg.metadata = {\n      start: Date.now()\n    };\n    // eslint-disable-next-line no-console\n    console.log('➡️', (cfg.method || 'GET').toUpperCase(), buildUrl(cfg), cfg.params ? {\n      params: cfg.params\n    } : '', cfg.data instanceof FormData ? '[FormData]' : cfg.data ? {\n      data: cfg.data\n    } : '');\n  }\n  return cfg;\n});\n\n// Response: โชว์เวลา/สถานะ + จัดการ 401\naxios.interceptors.response.use(res => {\n  if (IS_DEV) {\n    var _res$config$metadata;\n    const ms = Date.now() - (((_res$config$metadata = res.config.metadata) === null || _res$config$metadata === void 0 ? void 0 : _res$config$metadata.start) || Date.now());\n    // eslint-disable-next-line no-console\n    console.log('✅', res.status, (res.config.method || 'GET').toUpperCase(), buildUrl(res.config), `${ms}ms`);\n  }\n  return res;\n}, err => {\n  const {\n    response,\n    config\n  } = err;\n  if (IS_DEV && config) {\n    var _config$metadata;\n    const ms = Date.now() - (((_config$metadata = config.metadata) === null || _config$metadata === void 0 ? void 0 : _config$metadata.start) || Date.now());\n    // eslint-disable-next-line no-console\n    console.warn('❌', (response === null || response === void 0 ? void 0 : response.status) || 'NETWORK', (config.method || 'GET').toUpperCase(), buildUrl(config), `${ms}ms`, err.message);\n  }\n\n  // ถ้า token หมดอายุ/ไม่ถูกต้อง\n  if ((response === null || response === void 0 ? void 0 : response.status) === 401) {\n    localStorage.removeItem('token');\n    localStorage.removeItem('role');\n    // ถ้าอยากเด้งไปหน้า login อัตโนมัติ เปิดบรรทัดล่าง\n    // window.location.assign('/login');\n  }\n  return Promise.reject(err);\n});\n\n/* =========================\n   3) React Mount\n   ========================= */\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(/*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 104,\n  columnNumber: 13\n}, this));","map":{"version":3,"names":["React","ReactDOM","App","axios","jsxDEV","_jsxDEV","API_BASE","process","env","REACT_APP_API_BASE","REACT_APP_API_BASEURL","replace","defaults","baseURL","timeout","bootToken","localStorage","getItem","headers","common","a","IS_DEV","NODE_ENV","buildUrl","cfg","b","u","url","test","startsWith","interceptors","request","use","t","Authorization","metadata","start","Date","now","console","log","method","toUpperCase","params","data","FormData","response","res","_res$config$metadata","ms","config","status","err","_config$metadata","warn","message","removeItem","Promise","reject","root","createRoot","document","getElementById","render","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["D:/project19/frontend/src/index.js"],"sourcesContent":["// FRONTEND: src/index.js\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport axios from 'axios';\n\n/* =========================\n   1) Axios Global Config\n   ========================= */\n// ❗ เปลี่ยน default เป็นโดเมนอย่างเดียว (ไม่มี /api)\n// จากนี้ endpoint ทุกที่ในโปรเจกต์ ให้ขึ้นต้นด้วย /api/...\nconst API_BASE = (\n  process.env.REACT_APP_API_BASE ||\n  process.env.REACT_APP_API_BASEURL ||\n  'http://localhost:3001'\n).replace(/\\/+$/, ''); // ตัด \"/\" ท้าย ป้องกัน // ซ้อน\n\naxios.defaults.baseURL = API_BASE;\naxios.defaults.timeout = 10000; // กันรีเควสต์ค้างนาน\n\n// แนบ token ตั้งแต่บูต (กรณีเคยล็อกอินไว้)\nconst bootToken = localStorage.getItem('token');\nif (bootToken) {\n  axios.defaults.headers.common['Authorization'] = `Bearer ${bootToken}`;\n}\n\na\nconst IS_DEV = process.env.NODE_ENV !== 'production';\n\n// helper สร้าง URL ไว้โชว์ใน log\nfunction buildUrl(cfg) {\n  const b = (cfg.baseURL || '').replace(/\\/+$/, '');\n  const u = cfg.url || '';\n  return /^https?:\\/\\//i.test(u) ? u : `${b}${u.startsWith('/') ? '' : '/'}${u}`;\n}\n\n// Request: อ่าน token ล่าสุดก่อนยิงทุกครั้ง + log\naxios.interceptors.request.use((cfg) => {\n  const t = localStorage.getItem('token'); // เผื่อ token เปลี่ยนหลังบูต\n  if (t) cfg.headers.Authorization = `Bearer ${t}`;\n\n  if (IS_DEV) {\n    cfg.metadata = { start: Date.now() };\n    // eslint-disable-next-line no-console\n    console.log(\n      '➡️',\n      (cfg.method || 'GET').toUpperCase(),\n      buildUrl(cfg),\n      cfg.params ? { params: cfg.params } : '',\n      cfg.data instanceof FormData ? '[FormData]' :\n      cfg.data ? { data: cfg.data } : ''\n    );\n  }\n  return cfg;\n});\n\n// Response: โชว์เวลา/สถานะ + จัดการ 401\naxios.interceptors.response.use(\n  (res) => {\n    if (IS_DEV) {\n      const ms = Date.now() - (res.config.metadata?.start || Date.now());\n      // eslint-disable-next-line no-console\n      console.log(\n        '✅',\n        res.status,\n        (res.config.method || 'GET').toUpperCase(),\n        buildUrl(res.config),\n        `${ms}ms`\n      );\n    }\n    return res;\n  },\n  (err) => {\n    const { response, config } = err;\n    if (IS_DEV && config) {\n      const ms = Date.now() - (config.metadata?.start || Date.now());\n      // eslint-disable-next-line no-console\n      console.warn(\n        '❌',\n        response?.status || 'NETWORK',\n        (config.method || 'GET').toUpperCase(),\n        buildUrl(config),\n        `${ms}ms`,\n        err.message\n      );\n    }\n\n    // ถ้า token หมดอายุ/ไม่ถูกต้อง\n    if (response?.status === 401) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('role');\n      // ถ้าอยากเด้งไปหน้า login อัตโนมัติ เปิดบรรทัดล่าง\n      // window.location.assign('/login');\n    }\n    return Promise.reject(err);\n  }\n);\n\n/* =========================\n   3) React Mount\n   ========================= */\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(<App />);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}